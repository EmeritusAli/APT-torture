var go=Object.defineProperty;var po=(t,e,n)=>e in t?go(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dn=(t,e,n)=>po(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function L(){}function wi(t){return t()}function lr(){return Object.create(null)}function Ue(t){t.forEach(wi)}function xi(t){return typeof t=="function"}function Tt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function mo(t){return Object.keys(t).length===0}function yo(t,...e){if(t==null){for(const r of e)r(void 0);return L}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function sn(t,e,n){t.$$.on_destroy.push(yo(e,n))}function b(t,e){t.appendChild(e)}function H(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function ce(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function bi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t){return document.createTextNode(t)}function F(){return q(" ")}function Ti(){return q("")}function Sn(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function vo(t){return Array.from(t.childNodes)}function rt(t,e){e=""+e,t.data!==e&&(t.data=e)}function ur(t,e){t.value=e??""}function cr(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}let Ye;function _o(){if(Ye===void 0){Ye=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ye=!0}}return Ye}function ki(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=A("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=_o();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Sn(window,"message",s=>{s.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=Sn(r.contentWindow,"resize",e),e()}),b(t,r),()=>{(i||o&&r.contentWindow)&&o(),P(r)}}function fr(t,e,n){t.classList.toggle(e,!!n)}function wo(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Me;function ke(t){Me=t}function Mi(){if(!Me)throw new Error("Function called outside component initialization");return Me}function an(t){Mi().$$.on_mount.push(t)}function Ci(){const t=Mi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=wo(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const oe=[],Be=[];let le=[];const hr=[],xo=Promise.resolve();let Un=!1;function bo(){Un||(Un=!0,xo.then(Ni))}function Ce(t){le.push(t)}const pn=new Set;let te=0;function Ni(){if(te!==0)return;const t=Me;do{try{for(;te<oe.length;){const e=oe[te];te++,ke(e),To(e.$$)}}catch(e){throw oe.length=0,te=0,e}for(ke(null),oe.length=0,te=0;Be.length;)Be.pop()();for(let e=0;e<le.length;e+=1){const n=le[e];pn.has(n)||(pn.add(n),n())}le.length=0}while(oe.length);for(;hr.length;)hr.pop()();Un=!1,pn.clear(),ke(t)}function To(t){if(t.fragment!==null){t.update(),Ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ce)}}function ko(t){const e=[],n=[];le.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),le=e}const Oe=new Set;let qt;function Ne(){qt={r:0,c:[],p:qt}}function Ae(){qt.r||Ue(qt.c),qt=qt.p}function Z(t,e){t&&t.i&&(Oe.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(Oe.has(t))return;Oe.add(t),qt.c.push(()=>{Oe.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function _t(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ct(t){t&&t.c()}function xt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Ce(()=>{const o=t.$$.on_mount.map(wi).filter(xi);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ue(o),t.$$.on_mount=[]}),i.forEach(Ce)}function bt(t,e){const n=t.$$;n.fragment!==null&&(ko(n.after_update),Ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Mo(t,e){t.$$.dirty[0]===-1&&(oe.push(t),bo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Nt(t,e,n,r,i,o,s=null,a=[-1]){const c=Me;ke(t);const l=t.$$={fragment:null,ctx:[],props:o,update:L,not_equal:i,bound:lr(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:lr(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},(f,h,...g)=>{const x=g.length?g[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=x)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](x),u&&Mo(t,f)),h}):[],l.update(),u=!0,Ue(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const f=vo(e.target);l.fragment&&l.fragment.l(f),f.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&Z(t.$$.fragment),xt(t,e.target,e.anchor),Ni()}ke(c)}class At{constructor(){dn(this,"$$");dn(this,"$$set")}$destroy(){bt(this,1),this.$destroy=L}$on(e,n){if(!xi(n))return L;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!mo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Co="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Co);function No(t){let e,n,r,i,o,s,a,c,l;return{c(){e=A("header"),n=A("div"),r=A("h1"),i=q(t[0]),o=F(),s=A("h2"),a=q(t[1]),c=F(),l=A("p"),l.textContent=`This visualization explores the global progress in torture prevention measures,\r
        highlighting the positive steps taken by countries worldwide in ratifying conventions,\r
        implementing preventive mechanisms, and establishing human rights institutions.`,N(r,"class","svelte-1rpvxrr"),N(s,"class","svelte-1rpvxrr"),N(l,"class","intro svelte-1rpvxrr"),N(n,"class","header-content svelte-1rpvxrr"),N(e,"class","svelte-1rpvxrr")},m(u,f){H(u,e,f),b(e,n),b(n,r),b(r,i),b(n,o),b(n,s),b(s,a),b(n,c),b(n,l)},p(u,[f]){f&1&&rt(i,u[0]),f&2&&rt(a,u[1])},i:L,o:L,d(u){u&&P(e)}}}function Ao(t,e,n){let{title:r="Global Torture Prevention Progress"}=e,{subtitle:i="A Global Overview of Anti-Torture Measures"}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"subtitle"in o&&n(1,i=o.subtitle)},[r,i]}class $o extends At{constructor(e){super(),Nt(this,e,Ao,No,Tt,{title:0,subtitle:1})}}function Do(t){let e;return{c(){e=A("footer"),e.innerHTML='<div class="footer-content svelte-lnurpo"><a href="https://www.apt.ch" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="/APT-torture/images/apt_logo.jpg" alt="Association for the Prevention of Torture Logo" class="logo svelte-lnurpo"/></a> <div class="author svelte-lnurpo"><p class="svelte-lnurpo">Designed by: <a href="https://www.linkedin.com/in/adekola-aliu" target="_blank" rel="noopener noreferrer" class="svelte-lnurpo">Adekola Aliu</a></p></div> <a href="https://www.vizforsocialgood.com" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="images/vfsg-logo.png" alt="Viz for Social Good Logo" class="logo svelte-lnurpo"/></a></div>',N(e,"class","svelte-lnurpo")},m(n,r){H(n,e,r)},p:L,i:L,o:L,d(n){n&&P(e)}}}function So(t){return new Date().getFullYear(),[]}class Uo extends At{constructor(e){super(),Nt(this,e,So,Do,Tt,{})}}function gr(t,e,n){const r=t.slice();return r[4]=e[n].term,r[5]=e[n].description,r}function dr(t,e,n){const r=t.slice();return r[8]=e[n].title,r[5]=e[n].description,r}function pr(t){let e,n,r=t[8]+"",i,o,s,a=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=q(r),o=q(":"),s=F(),c=q(a),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){H(u,e,f),b(e,n),b(n,i),b(n,o),b(e,s),b(e,c),b(e,l)},p(u,f){f&4&&r!==(r=u[8]+"")&&rt(i,r),f&4&&a!==(a=u[5]+"")&&rt(c,a)},d(u){u&&P(e)}}}function mr(t){let e,n,r=t[4]+"",i,o,s,a=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=q(r),o=q(":"),s=F(),c=q(a),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){H(u,e,f),b(e,n),b(n,i),b(n,o),b(e,s),b(e,c),b(e,l)},p(u,f){f&8&&r!==(r=u[4]+"")&&rt(i,r),f&8&&a!==(a=u[5]+"")&&rt(c,a)},d(u){u&&P(e)}}}function Io(t){let e,n,r,i,o,s,a,c,l,u,f,h,g,x,y=_t(t[2]),d=[];for(let p=0;p<y.length;p+=1)d[p]=pr(dr(t,y,p));let m=_t(t[3]),v=[];for(let p=0;p<m.length;p+=1)v[p]=mr(gr(t,m,p));return{c(){e=A("section"),n=A("h2"),r=q(t[0]),i=F(),o=A("p"),s=q(t[1]),a=F(),c=A("h3"),c.textContent="Indicator Definitions",l=F(),u=A("ul");for(let p=0;p<d.length;p+=1)d[p].c();f=F(),h=A("h3"),h.textContent="Relevant Terms",g=F(),x=A("ul");for(let p=0;p<v.length;p+=1)v[p].c();N(n,"class","methodology-title svelte-sdyjs1"),N(o,"class","methodology-content svelte-sdyjs1"),N(c,"class","subheading svelte-sdyjs1"),N(u,"class","definitions svelte-sdyjs1"),N(h,"class","subheading svelte-sdyjs1"),N(x,"class","terms svelte-sdyjs1"),N(e,"class","methodology svelte-sdyjs1")},m(p,w){H(p,e,w),b(e,n),b(n,r),b(e,i),b(e,o),b(o,s),b(e,a),b(e,c),b(e,l),b(e,u);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(u,null);b(e,f),b(e,h),b(e,g),b(e,x);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(x,null)},p(p,[w]){if(w&1&&rt(r,p[0]),w&2&&rt(s,p[1]),w&4){y=_t(p[2]);let _;for(_=0;_<y.length;_+=1){const T=dr(p,y,_);d[_]?d[_].p(T,w):(d[_]=pr(T),d[_].c(),d[_].m(u,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=y.length}if(w&8){m=_t(p[3]);let _;for(_=0;_<m.length;_+=1){const T=gr(p,m,_);v[_]?v[_].p(T,w):(v[_]=mr(T),v[_].c(),v[_].m(x,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=m.length}},i:L,o:L,d(p){p&&P(e),ce(d,p),ce(v,p)}}}function Eo(t,e,n){let{methodologyTitle:r="Methodology"}=e,{methodologyContent:i=`
        The data used in this visualization was provided by the Association for the Prevention of Torture (APT). 
        It includes eight indicators identified as legal benchmarks for measuring progress in torture prevention 
        across countries. Each indicator focuses on legal frameworks rather than practical implementation, 
        as these are easier to document consistently. These indicators represent whether a country has met specific 
        legal obligations or milestones, providing a foundation for understanding progress toward eradicating torture. 
        For each country, the data records whether the indicator has been implemented ("Yes"), partially implemented 
        ("Partially"), or not implemented ("No").
    `}=e,{indicatorDefinitions:o=[{title:"Ratification of the UN Convention against Torture",description:"Indicates whether the country has formally ratified the UN Convention against Torture and Other Cruel, Inhuman, or Degrading Treatment or Punishment."},{title:"Ratification of Optional Protocol (OPCAT)",description:"Reflects whether the country has adopted the OPCAT, a treaty that establishes a system for regular independent visits to places of detention."},{title:"Submission of initial report to CAT",description:"Indicates whether the country has submitted its first report to the Committee Against Torture (CAT), as required under the UN Convention against Torture."},{title:"Prohibition of torture in the constitution",description:"Shows whether the country's constitution explicitly prohibits torture."},{title:"Criminalisation of torture under domestic law",description:"Indicates whether torture is explicitly criminalized in national legislation."},{title:"Designation of the National Preventive Mechanism (in law)",description:"Reflects whether the country has designated a National Preventive Mechanism (NPM) in its legal framework to monitor places of detention."},{title:"Operationality of the National Preventive Mechanism",description:"Indicates whether the NPM is operational and performing its intended functions."},{title:"Existence of National Human Rights Institution that fully complies with Paris Principles",description:"Indicates whether the country has a National Human Rights Institution (NHRI) that meets the standards set by the Paris Principles."}]}=e,{relevantTerms:s=[{term:"Full Implementation ('Yes')",description:"Indicates that the country has completely adopted the measure as per the indicator's definition."},{term:"Partial Implementation ('Partially')",description:"Reflects that the country has taken steps toward adopting the measure but has not fully met the criteria."},{term:"Torture",description:"The intentional infliction of severe physical or mental pain or suffering for purposes such as obtaining information, punishment, intimidation, or discrimination, often conducted by or with the consent of public officials."}]}=e;return t.$$set=a=>{"methodologyTitle"in a&&n(0,r=a.methodologyTitle),"methodologyContent"in a&&n(1,i=a.methodologyContent),"indicatorDefinitions"in a&&n(2,o=a.indicatorDefinitions),"relevantTerms"in a&&n(3,s=a.relevantTerms)},[r,i,o,s]}class Fo extends At{constructor(e){super(),Nt(this,e,Eo,Io,Tt,{methodologyTitle:0,methodologyContent:1,indicatorDefinitions:2,relevantTerms:3})}}function Le(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qn(t){let e,n,r;t.length!==2?(e=Le,n=(a,c)=>Le(t(a),c),r=(a,c)=>t(a)-c):(e=t===Le||t===Yo?t:Ro,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){const f=i(a,c,l,u-1);return f>l&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:s,right:o}}function Ro(){return 0}function Po(t){return t===null?NaN:+t}const Ho=qn(Le),zo=Ho.right;qn(Po).center;class Oo extends Map{constructor(e,n=Xo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(yr(this,e))}has(e){return super.has(yr(this,e))}set(e,n){return super.set(Lo(this,e),n)}delete(e){return super.delete(Wo(this,e))}}function yr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Lo({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Wo({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Xo(t){return t!==null&&typeof t=="object"?t.valueOf():t}function vr(t){return t}function In(t,...e){return Vo(t,vr,vr,e)}function Vo(t,e,n,r){return function i(o,s){if(s>=r.length)return n(o);const a=new Oo,c=r[s++];let l=-1;for(const u of o){const f=c(u,++l,o),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,s));return e(a)}(t,0)}const qo=Math.sqrt(50),Bo=Math.sqrt(10),jo=Math.sqrt(2);function Ai(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=qo?10:o>=Bo?5:o>=jo?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?Ai(t,e,n*2):[a,c,l]}function _r(t,e,n){return e=+e,t=+t,n=+n,Ai(t,e,n)[2]}function wr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?_r(e,t,n):_r(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Zo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Go(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Qo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Ko(t){return t}var Jo=3,xr=1e-6;function ts(t){return"translate("+t+",0)"}function es(t){return e=>+t(e)}function ns(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function rs(){return!this.__axis}function is(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=1,u="y",f=ts;function h(g){var x=r??(e.ticks?e.ticks.apply(e,n):e.domain()),y=i??(e.tickFormat?e.tickFormat.apply(e,n):Ko),d=Math.max(o,0)+a,m=e.range(),v=+m[0]+c,p=+m[m.length-1]+c,w=(e.bandwidth?ns:es)(e.copy(),c),_=g.selection?g.selection():g,T=_.selectAll(".domain").data([null]),k=_.selectAll(".tick").data(x,e).order(),C=k.exit(),W=k.enter().append("g").attr("class","tick"),D=k.select("line"),E=k.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(W),D=D.merge(W.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),E=E.merge(W.append("text").attr("fill","currentColor").attr(u,l*d).attr("dy","0.71em")),g!==_&&(T=T.transition(g),k=k.transition(g),D=D.transition(g),E=E.transition(g),C=C.transition(g).attr("opacity",xr).attr("transform",function(O){return isFinite(O=w(O))?f(O+c):this.getAttribute("transform")}),W.attr("opacity",xr).attr("transform",function(O){var Y=this.parentNode.__axis;return f((Y&&isFinite(Y=Y(O))?Y:w(O))+c)})),C.remove(),T.attr("d",s?"M"+v+","+l*s+"V"+c+"H"+p+"V"+l*s:"M"+v+","+c+"H"+p),k.attr("opacity",1).attr("transform",function(O){return f(w(O)+c)}),D.attr(u+"2",l*o),E.attr(u,l*d).text(y),_.filter(rs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),_.each(function(){this.__axis=w})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(o=s=+g,h):o},h.tickSizeInner=function(g){return arguments.length?(o=+g,h):o},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(a=+g,h):a},h.offset=function(g){return arguments.length?(c=+g,h):c},h}function os(t){return is(Jo,t)}var ss={value:()=>{}};function ln(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new We(n)}function We(t){this._=t}function as(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}We.prototype=ln.prototype={constructor:We,on:function(t,e){var n=this._,r=as(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=ls(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=br(n[i],t.name,e);else if(e==null)for(i in n)n[i]=br(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new We(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ls(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function br(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ss,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var En="http://www.w3.org/1999/xhtml";const Tr={svg:"http://www.w3.org/2000/svg",xhtml:En,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function un(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Tr.hasOwnProperty(e)?{space:Tr[e],local:t}:t}function us(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===En&&e.documentElement.namespaceURI===En?e.createElement(t):e.createElementNS(n,t)}}function cs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $i(t){var e=un(t);return(e.local?cs:us)(e)}function fs(){}function Bn(t){return t==null?fs:function(){return this.querySelector(t)}}function hs(t){typeof t!="function"&&(t=Bn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new yt(r,this._parents)}function gs(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ds(){return[]}function Di(t){return t==null?ds:function(){return this.querySelectorAll(t)}}function ps(t){return function(){return gs(t.apply(this,arguments))}}function ms(t){typeof t=="function"?t=ps(t):t=Di(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new yt(r,i)}function Si(t){return function(){return this.matches(t)}}function Ui(t){return function(e){return e.matches(t)}}var ys=Array.prototype.find;function vs(t){return function(){return ys.call(this.children,t)}}function _s(){return this.firstElementChild}function ws(t){return this.select(t==null?_s:vs(typeof t=="function"?t:Ui(t)))}var xs=Array.prototype.filter;function bs(){return Array.from(this.children)}function Ts(t){return function(){return xs.call(this.children,t)}}function ks(t){return this.selectAll(t==null?bs:Ts(typeof t=="function"?t:Ui(t)))}function Ms(t){typeof t!="function"&&(t=Si(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new yt(r,this._parents)}function Ii(t){return new Array(t.length)}function Cs(){return new yt(this._enter||this._groups.map(Ii),this._parents)}function je(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}je.prototype={constructor:je,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ns(t){return function(){return t}}function As(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new je(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function $s(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,f=o.length,h=new Array(u),g;for(a=0;a<u;++a)(c=e[a])&&(h[a]=g=s.call(c,c.__data__,a,e)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<f;++a)g=s.call(t,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):n[a]=new je(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(h[a])===c&&(i[a]=c)}function Ds(t){return t.__data__}function Ss(t,e){if(!arguments.length)return Array.from(this,Ds);var n=e?$s:As,r=this._parents,i=this._groups;typeof t!="function"&&(t=Ns(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,g=Us(t.call(u,u&&u.__data__,l,r)),x=g.length,y=a[l]=new Array(x),d=s[l]=new Array(x),m=c[l]=new Array(h);n(u,f,y,d,m,g,e);for(var v=0,p=0,w,_;v<x;++v)if(w=y[v]){for(v>=p&&(p=v+1);!(_=d[p])&&++p<x;);w._next=_||null}}return s=new yt(s,r),s._enter=a,s._exit=c,s}function Us(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Is(){return new yt(this._exit||this._groups.map(Ii),this._parents)}function Es(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Fs(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),g,x=0;x<f;++x)(g=l[x]||u[x])&&(h[x]=g);for(;c<i;++c)a[c]=n[c];return new yt(a,this._parents)}function Ys(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Rs(t){t||(t=Ps);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new yt(i,this._parents).order()}function Ps(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Hs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zs(){return Array.from(this)}function Os(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Ls(){let t=0;for(const e of this)++t;return t}function Ws(){return!this.node()}function Xs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Vs(t){return function(){this.removeAttribute(t)}}function qs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Bs(t,e){return function(){this.setAttribute(t,e)}}function js(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Zs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Gs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Qs(t,e){var n=un(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?qs:Vs:typeof e=="function"?n.local?Gs:Zs:n.local?js:Bs)(n,e))}function Ei(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ks(t){return function(){this.style.removeProperty(t)}}function Js(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ta(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function ea(t,e,n){return arguments.length>1?this.each((e==null?Ks:typeof e=="function"?ta:Js)(t,e,n??"")):fe(this.node(),t)}function fe(t,e){return t.style.getPropertyValue(e)||Ei(t).getComputedStyle(t,null).getPropertyValue(e)}function na(t){return function(){delete this[t]}}function ra(t,e){return function(){this[t]=e}}function ia(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function oa(t,e){return arguments.length>1?this.each((e==null?na:typeof e=="function"?ia:ra)(t,e)):this.node()[t]}function Fi(t){return t.trim().split(/^|\s+/)}function jn(t){return t.classList||new Yi(t)}function Yi(t){this._node=t,this._names=Fi(t.getAttribute("class")||"")}Yi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ri(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Pi(t,e){for(var n=jn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function sa(t){return function(){Ri(this,t)}}function aa(t){return function(){Pi(this,t)}}function la(t,e){return function(){(e.apply(this,arguments)?Ri:Pi)(this,t)}}function ua(t,e){var n=Fi(t+"");if(arguments.length<2){for(var r=jn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?la:e?sa:aa)(n,e))}function ca(){this.textContent=""}function fa(t){return function(){this.textContent=t}}function ha(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ga(t){return arguments.length?this.each(t==null?ca:(typeof t=="function"?ha:fa)(t)):this.node().textContent}function da(){this.innerHTML=""}function pa(t){return function(){this.innerHTML=t}}function ma(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ya(t){return arguments.length?this.each(t==null?da:(typeof t=="function"?ma:pa)(t)):this.node().innerHTML}function va(){this.nextSibling&&this.parentNode.appendChild(this)}function _a(){return this.each(va)}function wa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xa(){return this.each(wa)}function ba(t){var e=typeof t=="function"?t:$i(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ta(){return null}function ka(t,e){var n=typeof t=="function"?t:$i(t),r=e==null?Ta:typeof e=="function"?e:Bn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ma(){var t=this.parentNode;t&&t.removeChild(this)}function Ca(){return this.each(Ma)}function Na(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Aa(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $a(t){return this.select(t?Aa:Na)}function Da(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Sa(t){return function(e){t.call(this,e,this.__data__)}}function Ua(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Ia(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function Ea(t,e,n){return function(){var r=this.__on,i,o=Sa(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Fa(t,e,n){var r=Ua(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?Ea:Ia,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Hi(t,e,n){var r=Ei(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ya(t,e){return function(){return Hi(this,t,e)}}function Ra(t,e){return function(){return Hi(this,t,e.apply(this,arguments))}}function Pa(t,e){return this.each((typeof e=="function"?Ra:Ya)(t,e))}function*Ha(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var zi=[null];function yt(t,e){this._groups=t,this._parents=e}function Ie(){return new yt([[document.documentElement]],zi)}function za(){return this}yt.prototype=Ie.prototype={constructor:yt,select:hs,selectAll:ms,selectChild:ws,selectChildren:ks,filter:Ms,data:Ss,enter:Cs,exit:Is,join:Es,merge:Fs,selection:za,order:Ys,sort:Rs,call:Hs,nodes:zs,node:Os,size:Ls,empty:Ws,each:Xs,attr:Qs,style:ea,property:oa,classed:ua,text:ga,html:ya,raise:_a,lower:xa,append:ba,insert:ka,remove:Ca,clone:$a,datum:Da,on:Fa,dispatch:Pa,[Symbol.iterator]:Ha};function lt(t){return typeof t=="string"?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],zi)}function Oa(t){let e;for(;e=t.sourceEvent;)t=e;return t}function kr(t,e){if(t=Oa(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Fn={capture:!0,passive:!1};function Yn(t){t.preventDefault(),t.stopImmediatePropagation()}function La(t){var e=t.document.documentElement,n=lt(t).on("dragstart.drag",Yn,Fn);"onselectstart"in e?n.on("selectstart.drag",Yn,Fn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Wa(t,e){var n=t.document.documentElement,r=lt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Yn,Fn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Zn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Oi(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ee(){}var $e=.7,Ze=1/$e,ue="\\s*([+-]?\\d+)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xa=/^#([0-9a-f]{3,8})$/,Va=new RegExp(`^rgb\\(${ue},${ue},${ue}\\)$`),qa=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),Ba=new RegExp(`^rgba\\(${ue},${ue},${ue},${De}\\)$`),ja=new RegExp(`^rgba\\(${St},${St},${St},${De}\\)$`),Za=new RegExp(`^hsl\\(${De},${St},${St}\\)$`),Ga=new RegExp(`^hsla\\(${De},${St},${St},${De}\\)$`),Mr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Zn(Ee,Zt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cr,formatHex:Cr,formatHex8:Qa,formatHsl:Ka,formatRgb:Nr,toString:Nr});function Cr(){return this.rgb().formatHex()}function Qa(){return this.rgb().formatHex8()}function Ka(){return Li(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function Zt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Xa.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ar(e):n===3?new pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Re(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Re(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Va.exec(t))?new pt(e[1],e[2],e[3],1):(e=qa.exec(t))?new pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ba.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=ja.exec(t))?Re(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Za.exec(t))?Sr(e[1],e[2]/100,e[3]/100,1):(e=Ga.exec(t))?Sr(e[1],e[2]/100,e[3]/100,e[4]):Mr.hasOwnProperty(t)?Ar(Mr[t]):t==="transparent"?new pt(NaN,NaN,NaN,0):null}function Ar(t){return new pt(t>>16&255,t>>8&255,t&255,1)}function Re(t,e,n,r){return r<=0&&(t=e=n=NaN),new pt(t,e,n,r)}function Ja(t){return t instanceof Ee||(t=Zt(t)),t?(t=t.rgb(),new pt(t.r,t.g,t.b,t.opacity)):new pt}function Rn(t,e,n,r){return arguments.length===1?Ja(t):new pt(t,e,n,r??1)}function pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Zn(pt,Rn,Oi(Ee,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$e:Math.pow($e,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pt(jt(this.r),jt(this.g),jt(this.b),Ge(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$r,formatHex:$r,formatHex8:tl,formatRgb:Dr,toString:Dr}));function $r(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function tl(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Dr(){const t=Ge(this.opacity);return`${t===1?"rgb(":"rgba("}${jt(this.r)}, ${jt(this.g)}, ${jt(this.b)}${t===1?")":`, ${t})`}`}function Ge(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function jt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bt(t){return t=jt(t),(t<16?"0":"")+t.toString(16)}function Sr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mt(t,e,n,r)}function Li(t){if(t instanceof Mt)return new Mt(t.h,t.s,t.l,t.opacity);if(t instanceof Ee||(t=Zt(t)),!t)return new Mt;if(t instanceof Mt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Mt(s,a,c,t.opacity)}function el(t,e,n,r){return arguments.length===1?Li(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Zn(Mt,el,Oi(Ee,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new Mt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$e:Math.pow($e,t),new Mt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new pt(mn(t>=240?t-240:t+120,i,r),mn(t,i,r),mn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Mt(Ur(this.h),Pe(this.s),Pe(this.l),Ge(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ge(this.opacity);return`${t===1?"hsl(":"hsla("}${Ur(this.h)}, ${Pe(this.s)*100}%, ${Pe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ur(t){return t=(t||0)%360,t<0?t+360:t}function Pe(t){return Math.max(0,Math.min(1,t||0))}function mn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Gn=t=>()=>t;function nl(t,e){return function(n){return t+n*e}}function rl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function il(t){return(t=+t)==1?Wi:function(e,n){return n-e?rl(e,n,t):Gn(isNaN(e)?n:e)}}function Wi(t,e){var n=e-t;return n?nl(t,n):Gn(isNaN(t)?e:t)}const Qe=function t(e){var n=il(e);function r(i,o){var s=n((i=Rn(i)).r,(o=Rn(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=Wi(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function ol(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function sl(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function al(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=cn(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function ll(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function kt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ul(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=cn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Pn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yn=new RegExp(Pn.source,"g");function cl(t){return function(){return t}}function fl(t){return function(e){return t(e)+""}}function Xi(t,e){var n=Pn.lastIndex=yn.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Pn.exec(t))&&(i=yn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:kt(r,i)})),n=yn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?fl(c[0].x):cl(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function cn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Gn(e):(n==="number"?kt:n==="string"?(r=Zt(e))?(e=r,Qe):Xi:e instanceof Zt?Qe:e instanceof Date?ll:sl(e)?ol:Array.isArray(e)?al:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ul:kt)(t,e)}function hl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Ir=180/Math.PI,Hn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vi(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ir,skewX:Math.atan(c)*Ir,scaleX:s,scaleY:a}}var He;function gl(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Hn:Vi(e.a,e.b,e.c,e.d,e.e,e.f)}function dl(t){return t==null||(He||(He=document.createElementNS("http://www.w3.org/2000/svg","g")),He.setAttribute("transform",t),!(t=He.transform.baseVal.consolidate()))?Hn:(t=t.matrix,Vi(t.a,t.b,t.c,t.d,t.e,t.f))}function qi(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,g,x){if(l!==f||u!==h){var y=g.push("translate(",null,e,null,n);x.push({i:y-4,x:kt(l,f)},{i:y-2,x:kt(u,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:kt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:kt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,g,x){if(l!==f||u!==h){var y=g.push(i(g)+"scale(",null,",",null,")");x.push({i:y-4,x:kt(l,f)},{i:y-2,x:kt(u,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(g){for(var x=-1,y=h.length,d;++x<y;)f[(d=h[x]).i]=d.x(g);return f.join("")}}}var pl=qi(gl,"px, ","px)","deg)"),ml=qi(dl,", ",")",")"),he=0,xe=0,me=0,Bi=1e3,Ke,be,Je=0,Gt=0,fn=0,Se=typeof performance=="object"&&performance.now?performance:Date,ji=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qn(){return Gt||(ji(yl),Gt=Se.now()+fn)}function yl(){Gt=0}function tn(){this._call=this._time=this._next=null}tn.prototype=Kn.prototype={constructor:tn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qn():+n)+(e==null?0:+e),!this._next&&be!==this&&(be?be._next=this:Ke=this,be=this),this._call=t,this._time=n,zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,zn())}};function Kn(t,e,n){var r=new tn;return r.restart(t,e,n),r}function vl(){Qn(),++he;for(var t=Ke,e;t;)(e=Gt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--he}function Er(){Gt=(Je=Se.now())+fn,he=xe=0;try{vl()}finally{he=0,wl(),Gt=0}}function _l(){var t=Se.now(),e=t-Je;e>Bi&&(fn-=e,Je=t)}function wl(){for(var t,e=Ke,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ke=n);be=t,zn(r)}function zn(t){if(!he){xe&&(xe=clearTimeout(xe));var e=t-Gt;e>24?(t<1/0&&(xe=setTimeout(Er,t-Se.now()-fn)),me&&(me=clearInterval(me))):(me||(Je=Se.now(),me=setInterval(_l,Bi)),he=1,ji(Er))}}function Fr(t,e,n){var r=new tn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var xl=ln("start","end","cancel","interrupt"),bl=[],Zi=0,Yr=1,On=2,Xe=3,Rr=4,Ln=5,Ve=6;function hn(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Tl(t,n,{name:e,index:r,group:i,on:xl,tween:bl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Zi})}function Jn(t,e){var n=$t(t,e);if(n.state>Zi)throw new Error("too late; already scheduled");return n}function Ut(t,e){var n=$t(t,e);if(n.state>Xe)throw new Error("too late; already running");return n}function $t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Tl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Kn(o,0,n.time);function o(l){n.state=Yr,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,h,g;if(n.state!==Yr)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Xe)return Fr(s);g.state===Rr?(g.state=Ve,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=Ve,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Fr(function(){n.state===Xe&&(n.state=Rr,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=On,n.on.call("start",t,t.__data__,n.index,n.group),n.state===On){for(n.state=Xe,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Ln,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===Ln&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ve,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function Wn(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>On&&r.state<Ln,r.state=Ve,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function kl(t){return this.each(function(){Wn(this,t)})}function Ml(t,e){var n,r;return function(){var i=Ut(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function Cl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ut(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function Nl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=$t(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?Ml:Cl)(n,t,e))}function tr(t,e,n){var r=t._id;return t.each(function(){var i=Ut(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return $t(i,r).value[e]}}function Gi(t,e){var n;return(typeof e=="number"?kt:e instanceof Zt?Qe:(n=Zt(e))?(e=n,Qe):Xi)(t,e)}function Al(t){return function(){this.removeAttribute(t)}}function $l(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Sl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Ul(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Il(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function El(t,e){var n=un(t),r=n==="transform"?ml:Gi;return this.attrTween(t,typeof e=="function"?(n.local?Il:Ul)(n,r,tr(this,"attr."+t,e)):e==null?(n.local?$l:Al)(n):(n.local?Sl:Dl)(n,r,e))}function Fl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Yl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Rl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Yl(t,o)),n}return i._value=e,i}function Pl(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Fl(t,o)),n}return i._value=e,i}function Hl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=un(t);return this.tween(n,(r.local?Rl:Pl)(r,e))}function zl(t,e){return function(){Jn(this,t).delay=+e.apply(this,arguments)}}function Ol(t,e){return e=+e,function(){Jn(this,t).delay=e}}function Ll(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?zl:Ol)(e,t)):$t(this.node(),e).delay}function Wl(t,e){return function(){Ut(this,t).duration=+e.apply(this,arguments)}}function Xl(t,e){return e=+e,function(){Ut(this,t).duration=e}}function Vl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Wl:Xl)(e,t)):$t(this.node(),e).duration}function ql(t,e){if(typeof e!="function")throw new Error;return function(){Ut(this,t).ease=e}}function Bl(t){var e=this._id;return arguments.length?this.each(ql(e,t)):$t(this.node(),e).ease}function jl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ut(this,t).ease=n}}function Zl(t){if(typeof t!="function")throw new Error;return this.each(jl(this._id,t))}function Gl(t){typeof t!="function"&&(t=Si(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new Ht(r,this._parents,this._name,this._id)}function Ql(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=n[a],u=c.length,f=s[a]=new Array(u),h,g=0;g<u;++g)(h=c[g]||l[g])&&(f[g]=h);for(;a<r;++a)s[a]=e[a];return new Ht(s,this._parents,this._name,this._id)}function Kl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Jl(t,e,n){var r,i,o=Kl(e)?Jn:Ut;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function tu(t,e){var n=this._id;return arguments.length<2?$t(this.node(),n).on.on(t):this.each(Jl(n,t,e))}function eu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function nu(){return this.on("end.remove",eu(this._id))}function ru(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,hn(l[h],e,n,h,l,$t(u,n)));return new Ht(o,this._parents,e,n)}function iu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Di(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),g,x=$t(u,n),y=0,d=h.length;y<d;++y)(g=h[y])&&hn(g,e,n,y,h,x);o.push(h),s.push(u)}return new Ht(o,s,e,n)}var ou=Ie.prototype.constructor;function su(){return new ou(this._groups,this._parents)}function au(t,e){var n,r,i;return function(){var o=fe(this,t),s=(this.style.removeProperty(t),fe(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Qi(t){return function(){this.style.removeProperty(t)}}function lu(t,e,n){var r,i=n+"",o;return function(){var s=fe(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function uu(t,e,n){var r,i,o;return function(){var s=fe(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),fe(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function cu(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=Ut(this,t),l=c.on,u=c.value[o]==null?a||(a=Qi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function fu(t,e,n){var r=(t+="")=="transform"?pl:Gi;return e==null?this.styleTween(t,au(t,r)).on("end.style."+t,Qi(t)):typeof e=="function"?this.styleTween(t,uu(t,r,tr(this,"style."+t,e))).each(cu(this._id,t)):this.styleTween(t,lu(t,r,e),n).on("end.style."+t,null)}function hu(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function gu(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&hu(t,s,n)),r}return o._value=e,o}function du(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,gu(t,e,n??""))}function pu(t){return function(){this.textContent=t}}function mu(t){return function(){var e=t(this);this.textContent=e??""}}function yu(t){return this.tween("text",typeof t=="function"?mu(tr(this,"text",t)):pu(t==null?"":t+""))}function vu(t){return function(e){this.textContent=t.call(this,e)}}function _u(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&vu(i)),e}return r._value=t,r}function wu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,_u(t))}function xu(){for(var t=this._name,e=this._id,n=Ki(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=$t(c,e);hn(c,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ht(r,this._parents,t,n)}function bu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=Ut(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var Tu=0;function Ht(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Ki(){return++Tu}var Ft=Ie.prototype;Ht.prototype={constructor:Ht,select:ru,selectAll:iu,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:Gl,merge:Ql,selection:su,transition:xu,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:tu,attr:El,attrTween:Hl,style:fu,styleTween:du,text:yu,textTween:wu,remove:nu,tween:Nl,delay:Ll,duration:Vl,ease:Bl,easeVarying:Zl,end:bu,[Symbol.iterator]:Ft[Symbol.iterator]};function ku(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xn=4/11,Mu=6/11,Cu=8/11,Nu=3/4,Au=9/11,$u=10/11,Du=15/16,Su=21/22,Uu=63/64,ze=1/Xn/Xn;function Iu(t){return(t=+t)<Xn?ze*t*t:t<Cu?ze*(t-=Mu)*t+Nu:t<$u?ze*(t-=Au)*t+Du:ze*(t-=Su)*t+Uu}var Eu={time:null,delay:0,duration:250,ease:ku};function Fu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Yu(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=Ki(),(n=Eu).time=Qn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&hn(c,t,e,l,s,n||Fu(c,e));return new Ht(r,this._parents,t,e)}Ie.prototype.interrupt=kl;Ie.prototype.transition=Yu;const vn=t=>()=>t;function Ru(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Pu(t){t.stopImmediatePropagation()}function _n(t){t.preventDefault(),t.stopImmediatePropagation()}var Pr={name:"drag"},wn={name:"space"},ee={name:"handle"},ne={name:"center"};const{abs:Hr,max:st,min:at}=Math;function zr(t){return[+t[0],+t[1]]}function Or(t){return[zr(t[0]),zr(t[1])]}var qe={name:"x",handles:["w","e"].map(en),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},xn={name:"y",handles:["n","s"].map(en),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Yt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Wr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Hu={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},zu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function en(t){return{type:t}}function Ou(t){return!t.ctrlKey&&!t.button}function Lu(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Wu(){return navigator.maxTouchPoints||"ontouchstart"in this}function bn(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Xu(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Vu(){return qu(qe)}function qu(t){var e=Lu,n=Ou,r=Wu,i=!0,o=ln("start","brush","end"),s=6,a;function c(d){var m=d.property("__brush",y).selectAll(".overlay").data([en("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Yt.overlay).merge(m).each(function(){var p=bn(this).extent;lt(this).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1])}),d.selectAll(".selection").data([en("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Yt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=d.selectAll(".handle").data(t.handles,function(p){return p.type});v.exit().remove(),v.enter().append("rect").attr("class",function(p){return"handle handle--"+p.type}).attr("cursor",function(p){return Yt[p.type]}),d.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(d,m,v){d.tween?d.on("start.brush",function(p){u(this,arguments).beforestart().start(p)}).on("interrupt.brush end.brush",function(p){u(this,arguments).end(p)}).tween("brush",function(){var p=this,w=p.__brush,_=u(p,arguments),T=w.selection,k=t.input(typeof m=="function"?m.apply(this,arguments):m,w.extent),C=cn(T,k);function W(D){w.selection=D===1&&k===null?null:C(D),l.call(p),_.brush()}return T!==null&&k!==null?W:W(1)}):d.each(function(){var p=this,w=arguments,_=p.__brush,T=t.input(typeof m=="function"?m.apply(p,w):m,_.extent),k=u(p,w).beforestart();Wn(p),_.selection=T===null?null:T,l.call(p),k.start(v).brush(v).end(v)})},c.clear=function(d,m){c.move(d,null,m)};function l(){var d=lt(this),m=bn(this).selection;m?(d.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),d.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?m[1][0]-s/2:m[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?m[1][1]-s/2:m[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?m[1][0]-m[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?m[1][1]-m[0][1]+s:s})):d.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(d,m,v){var p=d.__brush.emitter;return p&&(!v||!p.clean)?p:new f(d,m,v)}function f(d,m,v){this.that=d,this.args=m,this.state=d.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(d,m){return this.starting?(this.starting=!1,this.emit("start",d,m)):this.emit("brush",d),this},brush:function(d,m){return this.emit("brush",d,m),this},end:function(d,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",d,m)),this},emit:function(d,m,v){var p=lt(this.that).datum();o.call(d,this.that,new Ru(d,{sourceEvent:m,target:c,selection:t.output(this.state.selection),mode:v,dispatch:o}),p)}};function h(d){if(a&&!d.touches||!n.apply(this,arguments))return;var m=this,v=d.target.__data__.type,p=(i&&d.metaKey?v="overlay":v)==="selection"?Pr:i&&d.altKey?ne:ee,w=t===xn?null:Hu[v],_=t===qe?null:zu[v],T=bn(m),k=T.extent,C=T.selection,W=k[0][0],D,E,O=k[0][1],Y,tt,mt=k[1][0],et,G,gt=k[1][1],S,B,j=0,X=0,Lt,It=w&&_&&i&&d.shiftKey,Et,vt,Q=Array.from(d.touches||[d],U=>{const J=U.identifier;return U=kr(U,m),U.point0=U.slice(),U.identifier=J,U});Wn(m);var Vt=u(m,arguments,!0).beforestart();if(v==="overlay"){C&&(Lt=!0);const U=[Q[0],Q[1]||Q[0]];T.selection=C=[[D=t===xn?W:at(U[0][0],U[1][0]),Y=t===qe?O:at(U[0][1],U[1][1])],[et=t===xn?mt:st(U[0][0],U[1][0]),S=t===qe?gt:st(U[0][1],U[1][1])]],Q.length>1&&K(d)}else D=C[0][0],Y=C[0][1],et=C[1][0],S=C[1][1];E=D,tt=Y,G=et,B=S;var $=lt(m).attr("pointer-events","none"),I=$.selectAll(".overlay").attr("cursor",Yt[v]);if(d.touches)Vt.moved=M,Vt.ended=V;else{var R=lt(d.view).on("mousemove.brush",M,!0).on("mouseup.brush",V,!0);i&&R.on("keydown.brush",ut,!0).on("keyup.brush",ct,!0),La(d.view)}l.call(m),Vt.start(d,p.name);function M(U){for(const J of U.changedTouches||[U])for(const pe of Q)pe.identifier===J.identifier&&(pe.cur=kr(J,m));if(It&&!Et&&!vt&&Q.length===1){const J=Q[0];Hr(J.cur[0]-J[0])>Hr(J.cur[1]-J[1])?vt=!0:Et=!0}for(const J of Q)J.cur&&(J[0]=J.cur[0],J[1]=J.cur[1]);Lt=!0,_n(U),K(U)}function K(U){const J=Q[0],pe=J.point0;var Wt;switch(j=J[0]-pe[0],X=J[1]-pe[1],p){case wn:case Pr:{w&&(j=st(W-D,at(mt-et,j)),E=D+j,G=et+j),_&&(X=st(O-Y,at(gt-S,X)),tt=Y+X,B=S+X);break}case ee:{Q[1]?(w&&(E=st(W,at(mt,Q[0][0])),G=st(W,at(mt,Q[1][0])),w=1),_&&(tt=st(O,at(gt,Q[0][1])),B=st(O,at(gt,Q[1][1])),_=1)):(w<0?(j=st(W-D,at(mt-D,j)),E=D+j,G=et):w>0&&(j=st(W-et,at(mt-et,j)),E=D,G=et+j),_<0?(X=st(O-Y,at(gt-Y,X)),tt=Y+X,B=S):_>0&&(X=st(O-S,at(gt-S,X)),tt=Y,B=S+X));break}case ne:{w&&(E=st(W,at(mt,D-j*w)),G=st(W,at(mt,et+j*w))),_&&(tt=st(O,at(gt,Y-X*_)),B=st(O,at(gt,S+X*_)));break}}G<E&&(w*=-1,Wt=D,D=et,et=Wt,Wt=E,E=G,G=Wt,v in Lr&&I.attr("cursor",Yt[v=Lr[v]])),B<tt&&(_*=-1,Wt=Y,Y=S,S=Wt,Wt=tt,tt=B,B=Wt,v in Wr&&I.attr("cursor",Yt[v=Wr[v]])),T.selection&&(C=T.selection),Et&&(E=C[0][0],G=C[1][0]),vt&&(tt=C[0][1],B=C[1][1]),(C[0][0]!==E||C[0][1]!==tt||C[1][0]!==G||C[1][1]!==B)&&(T.selection=[[E,tt],[G,B]],l.call(m),Vt.brush(U,p.name))}function V(U){if(Pu(U),U.touches){if(U.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Wa(U.view,Lt),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),I.attr("cursor",Yt.overlay),T.selection&&(C=T.selection),Xu(C)&&(T.selection=null,l.call(m)),Vt.end(U,p.name)}function ut(U){switch(U.keyCode){case 16:{It=w&&_;break}case 18:{p===ee&&(w&&(et=G-j*w,D=E+j*w),_&&(S=B-X*_,Y=tt+X*_),p=ne,K(U));break}case 32:{(p===ee||p===ne)&&(w<0?et=G-j:w>0&&(D=E-j),_<0?S=B-X:_>0&&(Y=tt-X),p=wn,I.attr("cursor",Yt.selection),K(U));break}default:return}_n(U)}function ct(U){switch(U.keyCode){case 16:{It&&(Et=vt=It=!1,K(U));break}case 18:{p===ne&&(w<0?et=G:w>0&&(D=E),_<0?S=B:_>0&&(Y=tt),p=ee,K(U));break}case 32:{p===wn&&(U.altKey?(w&&(et=G-j*w,D=E+j*w),_&&(S=B-X*_,Y=tt+X*_),p=ne):(w<0?et=G:w>0&&(D=E),_<0?S=B:_>0&&(Y=tt),p=ee),I.attr("cursor",Yt[v]),K(U));break}default:return}_n(U)}}function g(d){u(this,arguments).moved(d)}function x(d){u(this,arguments).ended(d)}function y(){var d=this.__brush||{selection:null};return d.extent=Or(e.apply(this,arguments)),d.dim=t,d}return c.extent=function(d){return arguments.length?(e=typeof d=="function"?d:vn(Or(d)),c):e},c.filter=function(d){return arguments.length?(n=typeof d=="function"?d:vn(!!d),c):n},c.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:vn(!!d),c):r},c.handleSize=function(d){return arguments.length?(s=+d,c):s},c.keyModifiers=function(d){return arguments.length?(i=!!d,c):i},c.on=function(){var d=o.on.apply(o,arguments);return d===o?c:d},c}var Xr={},Tn={},kn=34,ye=10,Mn=13;function Ji(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Bu(t,e){var n=Ji(t);return function(r,i){return e(n(r),i,t)}}function Vr(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function dt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function ju(t){return t<0?"-"+dt(-t,6):t>9999?"+"+dt(t,6):dt(t,4)}function Zu(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":ju(t.getUTCFullYear())+"-"+dt(t.getUTCMonth()+1,2)+"-"+dt(t.getUTCDate(),2)+(i?"T"+dt(e,2)+":"+dt(n,2)+":"+dt(r,2)+"."+dt(i,3)+"Z":r?"T"+dt(e,2)+":"+dt(n,2)+":"+dt(r,2)+"Z":n||e?"T"+dt(e,2)+":"+dt(n,2)+"Z":"")}function Gu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var g,x,y=i(f,function(d,m){if(g)return g(d,m-1);x=d,g=h?Bu(d,h):Ji(d)});return y.columns=x||[],y}function i(f,h){var g=[],x=f.length,y=0,d=0,m,v=x<=0,p=!1;f.charCodeAt(x-1)===ye&&--x,f.charCodeAt(x-1)===Mn&&--x;function w(){if(v)return Tn;if(p)return p=!1,Xr;var T,k=y,C;if(f.charCodeAt(k)===kn){for(;y++<x&&f.charCodeAt(y)!==kn||f.charCodeAt(++y)===kn;);return(T=y)>=x?v=!0:(C=f.charCodeAt(y++))===ye?p=!0:C===Mn&&(p=!0,f.charCodeAt(y)===ye&&++y),f.slice(k+1,T-1).replace(/""/g,'"')}for(;y<x;){if((C=f.charCodeAt(T=y++))===ye)p=!0;else if(C===Mn)p=!0,f.charCodeAt(y)===ye&&++y;else if(C!==n)continue;return f.slice(k,T)}return v=!0,f.slice(k,x)}for(;(m=w())!==Tn;){for(var _=[];m!==Xr&&m!==Tn;)_.push(m),m=w();h&&(_=h(_,d++))==null||g.push(_)}return g}function o(f,h){return f.map(function(g){return h.map(function(x){return u(g[x])}).join(t)})}function s(f,h){return h==null&&(h=Vr(f)),[h.map(u).join(t)].concat(o(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Vr(f)),o(f,h).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Zu(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:c,formatRow:l,formatValue:u}}var Qu=Gu(","),Ku=Qu.parse;function Ju(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function tc(t,e){return fetch(t,e).then(Ju)}function ec(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),tc(e,n).then(function(i){return t(i,r)})}}var nc=ec(Ku);function rc(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return to(this.cover(e,n),e,n,t)}function to(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},a=t._x0,c=t._y0,l=t._x1,u=t._y1,f,h,g,x,y,d,m,v;if(!o)return t._root=s,t;for(;o.length;)if((y=e>=(f=(a+l)/2))?a=f:l=f,(d=n>=(h=(c+u)/2))?c=h:u=h,i=o,!(o=o[m=d<<1|y]))return i[m]=s,t;if(g=+t._x.call(null,o.data),x=+t._y.call(null,o.data),e===g&&n===x)return s.next=o,i?i[m]=s:t._root=s,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(y=e>=(f=(a+l)/2))?a=f:l=f,(d=n>=(h=(c+u)/2))?c=h:u=h;while((m=d<<1|y)===(v=(x>=h)<<1|g>=f));return i[v]=o,i[m]=s,t}function ic(t){var e,n,r=t.length,i,o,s=new Array(r),a=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,a[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)to(this,s[n],a[n],t[n]);return this}function oc(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,a=this._root,c,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=a,a=c,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function sc(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function ac(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ft(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function lc(t,e,n){var r,i=this._x0,o=this._y0,s,a,c,l,u=this._x1,f=this._y1,h=[],g=this._root,x,y;for(g&&h.push(new ft(g,i,o,u,f)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,f=e+n,n*=n);x=h.pop();)if(!(!(g=x.node)||(s=x.x0)>u||(a=x.y0)>f||(c=x.x1)<i||(l=x.y1)<o))if(g.length){var d=(s+c)/2,m=(a+l)/2;h.push(new ft(g[3],d,m,c,l),new ft(g[2],s,m,d,l),new ft(g[1],d,a,c,m),new ft(g[0],s,a,d,m)),(y=(e>=m)<<1|t>=d)&&(x=h[h.length-1],h[h.length-1]=h[h.length-1-y],h[h.length-1-y]=x)}else{var v=t-+this._x.call(null,g.data),p=e-+this._y.call(null,g.data),w=v*v+p*p;if(w<n){var _=Math.sqrt(n=w);i=t-_,o=e-_,u=t+_,f=e+_,r=g.data}}return r}function uc(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,a=this._y0,c=this._x1,l=this._y1,u,f,h,g,x,y,d,m;if(!n)return this;if(n.length)for(;;){if((x=u>=(h=(s+c)/2))?s=h:c=h,(y=f>=(g=(a+l)/2))?a=g:l=g,e=n,!(n=n[d=y<<1|x]))return this;if(!n.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(r=e,m=d)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[d]=o:delete e[d],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function cc(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function fc(){return this._root}function hc(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function gc(t){var e=[],n,r=this._root,i,o,s,a,c;for(r&&e.push(new ft(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,a=n.x1,c=n.y1)&&r.length){var l=(o+a)/2,u=(s+c)/2;(i=r[3])&&e.push(new ft(i,l,u,a,c)),(i=r[2])&&e.push(new ft(i,o,u,l,c)),(i=r[1])&&e.push(new ft(i,l,s,a,u)),(i=r[0])&&e.push(new ft(i,o,s,l,u))}return this}function dc(t){var e=[],n=[],r;for(this._root&&e.push(new ft(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,c=r.x1,l=r.y1,u=(s+c)/2,f=(a+l)/2;(o=i[0])&&e.push(new ft(o,s,a,u,f)),(o=i[1])&&e.push(new ft(o,u,a,c,f)),(o=i[2])&&e.push(new ft(o,s,f,u,l)),(o=i[3])&&e.push(new ft(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pc(t){return t[0]}function mc(t){return arguments.length?(this._x=t,this):this._x}function yc(t){return t[1]}function vc(t){return arguments.length?(this._y=t,this):this._y}function eo(t,e,n){var r=new er(e??pc,n??yc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function er(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function qr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ht=eo.prototype=er.prototype;ht.copy=function(){var t=new er(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=qr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=qr(r));return t};ht.add=rc;ht.addAll=ic;ht.cover=oc;ht.data=sc;ht.extent=ac;ht.find=lc;ht.remove=uc;ht.removeAll=cc;ht.root=fc;ht.size=hc;ht.visit=gc;ht.visitAfter=dc;ht.x=mc;ht.y=vc;function Dt(t){return function(){return t}}function Br(t){return(t()-.5)*1e-6}function _c(t){return t.x+t.vx}function wc(t){return t.y+t.vy}function no(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Dt(t==null?1:+t));function s(){for(var l,u=e.length,f,h,g,x,y,d,m=0;m<o;++m)for(f=eo(e,_c,wc).visitAfter(a),l=0;l<u;++l)h=e[l],y=n[h.index],d=y*y,g=h.x+h.vx,x=h.y+h.vy,f.visit(v);function v(p,w,_,T,k){var C=p.data,W=p.r,D=y+W;if(C){if(C.index>h.index){var E=g-C.x-C.vx,O=x-C.y-C.vy,Y=E*E+O*O;Y<D*D&&(E===0&&(E=Br(r),Y+=E*E),O===0&&(O=Br(r),Y+=O*O),Y=(D-(Y=Math.sqrt(Y)))/Y*i,h.vx+=(E*=Y)*(D=(W*=W)/(d+W)),h.vy+=(O*=Y)*D,C.vx-=E*(D=1-D),C.vy-=O*D)}return}return w>g+D||T<g-D||_>x+D||k<x-D}}function a(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(e){var l,u=e.length,f;for(n=new Array(u),l=0;l<u;++l)f=e[l],n[f.index]=+t(f,l,e)}}return s.initialize=function(l,u){e=l,r=u,c()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Dt(+l),c(),s):t},s}const xc=1664525,bc=1013904223,jr=4294967296;function Tc(){let t=1;return()=>(t=(xc*t+bc)%jr)/jr}var kc=10,Mc=Math.PI*(3-Math.sqrt(5));function ro(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,c=Kn(f),l=ln("tick","end"),u=Tc();t==null&&(t=[]);function f(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(y){var d,m=t.length,v;y===void 0&&(y=1);for(var p=0;p<y;++p)for(n+=(o-n)*i,a.forEach(function(w){w(n)}),d=0;d<m;++d)v=t[d],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return e}function g(){for(var y=0,d=t.length,m;y<d;++y){if(m=t[y],m.index=y,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var v=kc*Math.sqrt(.5+y),p=y*Mc;m.x=v*Math.cos(p),m.y=v*Math.sin(p)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function x(y){return y.initialize&&y.initialize(t,u),y}return g(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(y){return arguments.length?(t=y,g(),a.forEach(x),e):t},alpha:function(y){return arguments.length?(n=+y,e):n},alphaMin:function(y){return arguments.length?(r=+y,e):r},alphaDecay:function(y){return arguments.length?(i=+y,e):+i},alphaTarget:function(y){return arguments.length?(o=+y,e):o},velocityDecay:function(y){return arguments.length?(s=1-y,e):1-s},randomSource:function(y){return arguments.length?(u=y,a.forEach(x),e):u},force:function(y,d){return arguments.length>1?(d==null?a.delete(y):a.set(y,x(d)),e):a.get(y)},find:function(y,d,m){var v=0,p=t.length,w,_,T,k,C;for(m==null?m=1/0:m*=m,v=0;v<p;++v)k=t[v],w=y-k.x,_=d-k.y,T=w*w+_*_,T<m&&(C=k,m=T);return C},on:function(y,d){return arguments.length>1?(l.on(y,d),e):l.on(y)}}}function io(t){var e=Dt(.1),n,r,i;typeof t!="function"&&(t=Dt(t==null?0:+t));function o(a){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*a}function s(){if(n){var a,c=n.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(+a),s(),o):e},o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(+a),s(),o):t},o}function oo(t){var e=Dt(.1),n,r,i;typeof t!="function"&&(t=Dt(t==null?0:+t));function o(a){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*a}function s(){if(n){var a,c=n.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(+a),s(),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(+a),s(),o):t},o}function Cc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Nc(t){return function(){return t}}function Ac(t){return+t}var Zr=[0,1];function se(t){return t}function Vn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Nc(isNaN(e)?NaN:.5)}function $c(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Dc(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Vn(i,r),o=n(s,o)):(r=Vn(r,i),o=n(o,s)),function(a){return o(r(a))}}function Sc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Vn(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=zo(t,a,1,r)-1;return o[c](i[c](a))}}function Uc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ic(){var t=Zr,e=Zr,n=cn,r,i,o,s=se,a,c,l;function u(){var h=Math.min(t.length,e.length);return s!==se&&(s=$c(t[0],t[h-1])),a=h>2?Sc:Dc,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=a(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=a(e,t.map(r),kt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Ac),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=hl,u()},f.clamp=function(h){return arguments.length?(s=h?!0:se,u()):s!==se},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,g){return r=h,i=g,u()}}function Ec(){return Ic()(se,se)}function Fc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Cn=new Date,Nn=new Date;function it(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let l;do c.push(l=new Date(+o)),e(o,a),t(o);while(l<o&&o<s);return c},i.filter=o=>it(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(Cn.setTime(+o),Nn.setTime(+s),t(Cn),t(Nn),Math.floor(n(Cn,Nn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const nn=it(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);nn.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?it(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):nn);nn.range;const Rt=1e3,wt=Rt*60,Pt=wt*60,zt=Pt*24,nr=zt*7,Gr=zt*30,An=zt*365,ae=it(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Rt)},(t,e)=>(e-t)/Rt,t=>t.getUTCSeconds());ae.range;const rr=it(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rt)},(t,e)=>{t.setTime(+t+e*wt)},(t,e)=>(e-t)/wt,t=>t.getMinutes());rr.range;const Yc=it(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wt)},(t,e)=>(e-t)/wt,t=>t.getUTCMinutes());Yc.range;const ir=it(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rt-t.getMinutes()*wt)},(t,e)=>{t.setTime(+t+e*Pt)},(t,e)=>(e-t)/Pt,t=>t.getHours());ir.range;const Rc=it(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Pt)},(t,e)=>(e-t)/Pt,t=>t.getUTCHours());Rc.range;const Fe=it(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wt)/zt,t=>t.getDate()-1);Fe.range;const or=it(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zt,t=>t.getUTCDate()-1);or.range;const Pc=it(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zt,t=>Math.floor(t/zt));Pc.range;function Kt(t){return it(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*wt)/nr)}const gn=Kt(0),rn=Kt(1),Hc=Kt(2),zc=Kt(3),ge=Kt(4),Oc=Kt(5),Lc=Kt(6);gn.range;rn.range;Hc.range;zc.range;ge.range;Oc.range;Lc.range;function Jt(t){return it(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/nr)}const so=Jt(0),on=Jt(1),Wc=Jt(2),Xc=Jt(3),de=Jt(4),Vc=Jt(5),qc=Jt(6);so.range;on.range;Wc.range;Xc.range;de.range;Vc.range;qc.range;const sr=it(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());sr.range;const Bc=it(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Bc.range;const Ot=it(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ot.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:it(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ot.range;const Qt=it(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Qt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:it(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Qt.range;function jc(t,e,n,r,i,o){const s=[[ae,1,Rt],[ae,5,5*Rt],[ae,15,15*Rt],[ae,30,30*Rt],[o,1,wt],[o,5,5*wt],[o,15,15*wt],[o,30,30*wt],[i,1,Pt],[i,3,3*Pt],[i,6,6*Pt],[i,12,12*Pt],[r,1,zt],[r,2,2*zt],[n,1,nr],[e,1,Gr],[e,3,3*Gr],[t,1,An]];function a(l,u,f){const h=u<l;h&&([l,u]=[u,l]);const g=f&&typeof f.range=="function"?f:c(l,u,f),x=g?g.range(l,+u+1):[];return h?x.reverse():x}function c(l,u,f){const h=Math.abs(u-l)/f,g=qn(([,,d])=>d).right(s,h);if(g===s.length)return t.every(wr(l/An,u/An,f));if(g===0)return nn.every(Math.max(wr(l,u,f),1));const[x,y]=s[h/s[g-1][2]<s[g][2]/h?g-1:g];return x.every(y)}return[a,c]}const[Zc,Gc]=jc(Ot,sr,gn,Fe,ir,rr);function $n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Dn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ve(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Qc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,c=t.shortMonths,l=_e(i),u=we(i),f=_e(o),h=we(o),g=_e(s),x=we(s),y=_e(a),d=we(a),m=_e(c),v=we(c),p={a:G,A:gt,b:S,B,c:null,d:ni,e:ni,f:xf,g:Sf,G:If,H:vf,I:_f,j:wf,L:ao,m:bf,M:Tf,p:j,q:X,Q:oi,s:si,S:kf,u:Mf,U:Cf,V:Nf,w:Af,W:$f,x:null,X:null,y:Df,Y:Uf,Z:Ef,"%":ii},w={a:Lt,A:It,b:Et,B:vt,c:null,d:ri,e:ri,f:Pf,g:jf,G:Gf,H:Ff,I:Yf,j:Rf,L:uo,m:Hf,M:zf,p:Q,q:Vt,Q:oi,s:si,S:Of,u:Lf,U:Wf,V:Xf,w:Vf,W:qf,x:null,X:null,y:Bf,Y:Zf,Z:Qf,"%":ii},_={a:D,A:E,b:O,B:Y,c:tt,d:ti,e:ti,f:df,g:Jr,G:Kr,H:ei,I:ei,j:cf,L:gf,m:uf,M:ff,p:W,q:lf,Q:mf,s:yf,S:hf,u:nf,U:rf,V:of,w:ef,W:sf,x:mt,X:et,y:Jr,Y:Kr,Z:af,"%":pf};p.x=T(n,p),p.X=T(r,p),p.c=T(e,p),w.x=T(n,w),w.X=T(r,w),w.c=T(e,w);function T($,I){return function(R){var M=[],K=-1,V=0,ut=$.length,ct,U,J;for(R instanceof Date||(R=new Date(+R));++K<ut;)$.charCodeAt(K)===37&&(M.push($.slice(V,K)),(U=Qr[ct=$.charAt(++K)])!=null?ct=$.charAt(++K):U=ct==="e"?" ":"0",(J=I[ct])&&(ct=J(R,U)),M.push(ct),V=K+1);return M.push($.slice(V,K)),M.join("")}}function k($,I){return function(R){var M=ve(1900,void 0,1),K=C(M,$,R+="",0),V,ut;if(K!=R.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(I&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(V=Dn(ve(M.y,0,1)),ut=V.getUTCDay(),V=ut>4||ut===0?on.ceil(V):on(V),V=or.offset(V,(M.V-1)*7),M.y=V.getUTCFullYear(),M.m=V.getUTCMonth(),M.d=V.getUTCDate()+(M.w+6)%7):(V=$n(ve(M.y,0,1)),ut=V.getDay(),V=ut>4||ut===0?rn.ceil(V):rn(V),V=Fe.offset(V,(M.V-1)*7),M.y=V.getFullYear(),M.m=V.getMonth(),M.d=V.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),ut="Z"in M?Dn(ve(M.y,0,1)).getUTCDay():$n(ve(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(ut+5)%7:M.w+M.U*7-(ut+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,Dn(M)):$n(M)}}function C($,I,R,M){for(var K=0,V=I.length,ut=R.length,ct,U;K<V;){if(M>=ut)return-1;if(ct=I.charCodeAt(K++),ct===37){if(ct=I.charAt(K++),U=_[ct in Qr?I.charAt(K++):ct],!U||(M=U($,R,M))<0)return-1}else if(ct!=R.charCodeAt(M++))return-1}return M}function W($,I,R){var M=l.exec(I.slice(R));return M?($.p=u.get(M[0].toLowerCase()),R+M[0].length):-1}function D($,I,R){var M=g.exec(I.slice(R));return M?($.w=x.get(M[0].toLowerCase()),R+M[0].length):-1}function E($,I,R){var M=f.exec(I.slice(R));return M?($.w=h.get(M[0].toLowerCase()),R+M[0].length):-1}function O($,I,R){var M=m.exec(I.slice(R));return M?($.m=v.get(M[0].toLowerCase()),R+M[0].length):-1}function Y($,I,R){var M=y.exec(I.slice(R));return M?($.m=d.get(M[0].toLowerCase()),R+M[0].length):-1}function tt($,I,R){return C($,e,I,R)}function mt($,I,R){return C($,n,I,R)}function et($,I,R){return C($,r,I,R)}function G($){return s[$.getDay()]}function gt($){return o[$.getDay()]}function S($){return c[$.getMonth()]}function B($){return a[$.getMonth()]}function j($){return i[+($.getHours()>=12)]}function X($){return 1+~~($.getMonth()/3)}function Lt($){return s[$.getUTCDay()]}function It($){return o[$.getUTCDay()]}function Et($){return c[$.getUTCMonth()]}function vt($){return a[$.getUTCMonth()]}function Q($){return i[+($.getUTCHours()>=12)]}function Vt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var I=T($+="",p);return I.toString=function(){return $},I},parse:function($){var I=k($+="",!1);return I.toString=function(){return $},I},utcFormat:function($){var I=T($+="",w);return I.toString=function(){return $},I},utcParse:function($){var I=k($+="",!0);return I.toString=function(){return $},I}}}var Qr={"-":"",_:" ",0:"0"},ot=/^\s*\d+/,Kc=/^%/,Jc=/[\\^$*+?|[\]().{}]/g;function z(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function tf(t){return t.replace(Jc,"\\$&")}function _e(t){return new RegExp("^(?:"+t.map(tf).join("|")+")","i")}function we(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function ef(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function nf(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function rf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function of(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function sf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Kr(t,e,n){var r=ot.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Jr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function af(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function lf(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function uf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ti(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function cf(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ei(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ff(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function hf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function gf(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function df(t,e,n){var r=ot.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function pf(t,e,n){var r=Kc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function mf(t,e,n){var r=ot.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function yf(t,e,n){var r=ot.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ni(t,e){return z(t.getDate(),e,2)}function vf(t,e){return z(t.getHours(),e,2)}function _f(t,e){return z(t.getHours()%12||12,e,2)}function wf(t,e){return z(1+Fe.count(Ot(t),t),e,3)}function ao(t,e){return z(t.getMilliseconds(),e,3)}function xf(t,e){return ao(t,e)+"000"}function bf(t,e){return z(t.getMonth()+1,e,2)}function Tf(t,e){return z(t.getMinutes(),e,2)}function kf(t,e){return z(t.getSeconds(),e,2)}function Mf(t){var e=t.getDay();return e===0?7:e}function Cf(t,e){return z(gn.count(Ot(t)-1,t),e,2)}function lo(t){var e=t.getDay();return e>=4||e===0?ge(t):ge.ceil(t)}function Nf(t,e){return t=lo(t),z(ge.count(Ot(t),t)+(Ot(t).getDay()===4),e,2)}function Af(t){return t.getDay()}function $f(t,e){return z(rn.count(Ot(t)-1,t),e,2)}function Df(t,e){return z(t.getFullYear()%100,e,2)}function Sf(t,e){return t=lo(t),z(t.getFullYear()%100,e,2)}function Uf(t,e){return z(t.getFullYear()%1e4,e,4)}function If(t,e){var n=t.getDay();return t=n>=4||n===0?ge(t):ge.ceil(t),z(t.getFullYear()%1e4,e,4)}function Ef(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+z(e/60|0,"0",2)+z(e%60,"0",2)}function ri(t,e){return z(t.getUTCDate(),e,2)}function Ff(t,e){return z(t.getUTCHours(),e,2)}function Yf(t,e){return z(t.getUTCHours()%12||12,e,2)}function Rf(t,e){return z(1+or.count(Qt(t),t),e,3)}function uo(t,e){return z(t.getUTCMilliseconds(),e,3)}function Pf(t,e){return uo(t,e)+"000"}function Hf(t,e){return z(t.getUTCMonth()+1,e,2)}function zf(t,e){return z(t.getUTCMinutes(),e,2)}function Of(t,e){return z(t.getUTCSeconds(),e,2)}function Lf(t){var e=t.getUTCDay();return e===0?7:e}function Wf(t,e){return z(so.count(Qt(t)-1,t),e,2)}function co(t){var e=t.getUTCDay();return e>=4||e===0?de(t):de.ceil(t)}function Xf(t,e){return t=co(t),z(de.count(Qt(t),t)+(Qt(t).getUTCDay()===4),e,2)}function Vf(t){return t.getUTCDay()}function qf(t,e){return z(on.count(Qt(t)-1,t),e,2)}function Bf(t,e){return z(t.getUTCFullYear()%100,e,2)}function jf(t,e){return t=co(t),z(t.getUTCFullYear()%100,e,2)}function Zf(t,e){return z(t.getUTCFullYear()%1e4,e,4)}function Gf(t,e){var n=t.getUTCDay();return t=n>=4||n===0?de(t):de.ceil(t),z(t.getUTCFullYear()%1e4,e,4)}function Qf(){return"+0000"}function ii(){return"%"}function oi(t){return+t}function si(t){return Math.floor(+t/1e3)}var re,ar;Kf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Kf(t){return re=Qc(t),ar=re.format,re.parse,re.utcFormat,re.utcParse,re}function Jf(t){return new Date(t)}function th(t){return t instanceof Date?+t:+new Date(+t)}function fo(t,e,n,r,i,o,s,a,c,l){var u=Ec(),f=u.invert,h=u.domain,g=l(".%L"),x=l(":%S"),y=l("%I:%M"),d=l("%I %p"),m=l("%a %d"),v=l("%b %d"),p=l("%B"),w=l("%Y");function _(T){return(c(T)<T?g:a(T)<T?x:s(T)<T?y:o(T)<T?d:r(T)<T?i(T)<T?m:v:n(T)<T?p:w)(T)}return u.invert=function(T){return new Date(f(T))},u.domain=function(T){return arguments.length?h(Array.from(T,th)):h().map(Jf)},u.ticks=function(T){var k=h();return t(k[0],k[k.length-1],T??10)},u.tickFormat=function(T,k){return k==null?_:l(k)},u.nice=function(T){var k=h();return(!T||typeof T.range!="function")&&(T=e(k[0],k[k.length-1],T??10)),T?h(Fc(k,T)):u},u.copy=function(){return Uc(u,fo(t,e,n,r,i,o,s,a,c,l))},u}function eh(){return Cc.apply(fo(Zc,Gc,Ot,sr,gn,Fe,ir,rr,ae,ar).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Te(t,e,n){this.k=t,this.x=e,this.y=n}Te.prototype={constructor:Te,scale:function(t){return t===1?this:new Te(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Te(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Te.prototype;function nh(t){let e,n,r;return{c(){e=A("div"),n=bi("svg"),N(n,"class","svelte-1ymucs0"),N(e,"class","beeswarm svelte-1ymucs0"),Ce(()=>t[7].call(e))},m(i,o){H(i,e,o),b(e,n),t[6](n),r=ki(e,t[7].bind(e))},p:L,i:L,o:L,d(i){i&&P(e),t[6](null),r()}}}function rh(t,e,n){let r,{data:i}=e,{selectedIndicator:o}=e;const s=Ci();let a,c,l,u=null,f;function h(){if(!a||!c||!l||!(r!=null&&r.length))return;const y={top:20,right:20,bottom:30,left:40},d=c-y.left-y.right,m=l-y.top-y.bottom;lt(a).selectAll("*").remove();const v=lt(a).append("g").attr("transform",`translate(${y.left},${y.top})`);f||(f=lt("body").append("div").attr("class","timeline-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"));const p=+Go(r,S=>S.year),w=+Zo(r,S=>S.year),_=eh().domain([new Date(1983,0),new Date(2025,0)]).range([0,d]),T=r.map(S=>({id:Math.random(),fx:_(new Date(S.year,0)),y:m/2,year:S.year,country:S.country,region:S.region,indicator:S.indicator,value:S.value,color:S.color})),k=ro(T).force("y",oo(m/2).strength(.1)).force("collide",no().radius(6).strength(1)).force("x",io(S=>S.fx).strength(1)).stop();for(let S=0;S<300;++S)k.tick();const C=v.append("g").attr("class","points");C.selectAll("circle").data(T).join("circle").attr("cx",S=>S.fx).attr("cy",m).attr("r",0).attr("fill",S=>S.color).attr("stroke","none").transition().duration(1500).ease(Iu).attr("cy",S=>S.y).attr("r",5).on("end",function(){lt(this).on("mouseover",W).on("mousemove",D).on("mouseout",E).on("click",O)});function W(S,B){f.transition().duration(200).style("opacity",1),f.html(`
            <strong>${B.country}</strong><br/>
            <p class=timeline-region>${B.region}</p>
        `).style("left",S.pageX+10+"px").style("top",S.pageY-28+"px")}function D(S){f.style("left",S.pageX+10+"px").style("top",S.pageY-28+"px")}function E(){f.transition().duration(500).style("opacity",0)}function O(S,B){const j=_(new Date(1985,0))-_(new Date(1984,0)),X=B.fx;u.move(gt,[X-j/2,X+j/2])}const tt=Qo(1984,w+1,5).map(S=>new Date(S,0));v.append("g").attr("transform",`translate(0,${m})`).call(os(_).tickValues(tt).tickFormat(ar("%Y")));const mt=_(new Date(1985,0))-_(new Date(1984,0));function et(S){var Et;if(!S.selection)return;const[B,j]=S.selection,X=r.filter(vt=>{const Q=_(new Date(vt.year,0));return Q>=B&&Q<=j}),Lt=((Et=X[0])==null?void 0:Et.year)||null,It=X||[];console.log("Dispatching yearSelect:",{year:Lt,events:It}),C.selectAll("circle").data(T).attr("stroke",vt=>X.find(Q=>Q.year===vt.year)?"#000":"none").attr("stroke-width",vt=>X.find(Q=>Q.year===vt.year)?2:0),s("yearSelect",{year:Lt,events:It})}const G=_(new Date(p,0)),gt=v.append("g").attr("class","brush");u=Vu().extent([[0,0],[d,m]]).on("brush",et),gt.call(u),G&&u.move(gt,[G-mt/2,G+mt/2])}an(()=>{(r==null?void 0:r.length)>0&&h()});function g(y){Be[y?"unshift":"push"](()=>{a=y,n(0,a)})}function x(){c=this.clientWidth,l=this.clientHeight,n(1,c),n(2,l)}return t.$$set=y=>{"data"in y&&n(3,i=y.data),"selectedIndicator"in y&&n(4,o=y.selectedIndicator)},t.$$.update=()=>{t.$$.dirty&24&&n(5,r=i.filter(y=>(console.log("Checking indicator match:",{dataIndicator:y.indicator,selectedIndicator:o,matches:y.indicator===o}),y.indicator===o)).map(y=>({...y,year:+y.year<1984?1984:+y.year})).filter(y=>!isNaN(y.year))),t.$$.dirty&32&&(r==null?void 0:r.length)>0&&h()},[a,c,l,i,o,r,g,x]}class ih extends At{constructor(e){super(),Nt(this,e,rh,nh,Tt,{data:3,selectedIndicator:4})}}const ie=[];function oh(t,e=L){let n;const r=new Set;function i(a){if(Tt(t,a)&&(t=a,n)){const c=!ie.length;for(const l of r)l[1](),ie.push(l,t);if(c){for(let l=0;l<ie.length;l+=2)ie[l][0](ie[l+1]);ie.length=0}}}function o(a){i(a(t))}function s(a,c=L){const l=[a,c];return r.add(l),r.size===1&&(n=e(i,o)||L),a(t),()=>{r.delete(l),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:s}}const Xt=oh("Ratification of the UN Convention against Torture");function ai(t,e,n){const r=t.slice();return r[4]=e[n][0],r[5]=e[n][1],r}function li(t,e,n){const r=t.slice();return r[8]=e[n],r}function sh(t){let e;return{c(){e=A("div"),e.innerHTML="<p>Hover over the points above to see details</p>",N(e,"class","placeholder")},m(n,r){H(n,e,r)},p:L,d(n){n&&P(e)}}}function ah(t){let e,n,r,i,o,s,a,c,l=_t([...t[2]]),u=[];for(let f=0;f<l.length;f+=1)u[f]=fi(ai(t,l,f));return{c(){e=A("div"),n=A("h3"),r=q("Countries Implementing "),i=q(t[3]),o=q(" in "),s=q(t[1]),a=F(),c=A("div");for(let f=0;f<u.length;f+=1)u[f].c();N(n,"class","svelte-98892s"),N(c,"class","events-grid"),N(e,"class","timeline-details")},m(f,h){H(f,e,h),b(e,n),b(n,r),b(n,i),b(n,o),b(n,s),b(e,a),b(e,c);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(c,null)},p(f,h){if(h&8&&rt(i,f[3]),h&2&&rt(s,f[1]),h&4){l=_t([...f[2]]);let g;for(g=0;g<l.length;g+=1){const x=ai(f,l,g);u[g]?u[g].p(x,h):(u[g]=fi(x),u[g].c(),u[g].m(c,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}},d(f){f&&P(e),ce(u,f)}}}function ui(t){let e,n=t[8].value==="Yes"?"Full Implementation":"Partial Implementation",r;return{c(){e=A("span"),r=q(n),N(e,"class","status svelte-98892s"),fr(e,"partial",t[8].value==="Partially")},m(i,o){H(i,e,o),b(e,r)},p(i,o){o&4&&n!==(n=i[8].value==="Yes"?"Full Implementation":"Partial Implementation")&&rt(r,n),o&4&&fr(e,"partial",i[8].value==="Partially")},d(i){i&&P(e)}}}function ci(t){let e,n,r=t[8].country+"",i,o,s,a=t[8].indicator==="Criminalisation of torture under domestic law"&&ui(t);return{c(){e=A("li"),n=A("span"),i=q(r),o=F(),a&&a.c(),s=F(),N(n,"class","country svelte-98892s"),N(e,"class","svelte-98892s")},m(c,l){H(c,e,l),b(e,n),b(n,i),b(e,o),a&&a.m(e,null),b(e,s)},p(c,l){l&4&&r!==(r=c[8].country+"")&&rt(i,r),c[8].indicator==="Criminalisation of torture under domestic law"?a?a.p(c,l):(a=ui(c),a.c(),a.m(e,s)):a&&(a.d(1),a=null)},d(c){c&&P(e),a&&a.d()}}}function fi(t){let e,n,r=t[4]+"",i,o,s,a,c=_t(t[5]),l=[];for(let u=0;u<c.length;u+=1)l[u]=ci(li(t,c,u));return{c(){e=A("div"),n=A("h4"),i=q(r),o=F(),s=A("ul");for(let u=0;u<l.length;u+=1)l[u].c();a=F(),N(n,"class","svelte-98892s"),N(s,"class","country-grid svelte-98892s"),N(e,"class","region-group")},m(u,f){H(u,e,f),b(e,n),b(n,i),b(e,o),b(e,s);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(s,null);b(e,a)},p(u,f){if(f&4&&r!==(r=u[4]+"")&&rt(i,r),f&4){c=_t(u[5]);let h;for(h=0;h<c.length;h+=1){const g=li(u,c,h);l[h]?l[h].p(g,f):(l[h]=ci(g),l[h].c(),l[h].m(s,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=c.length}},d(u){u&&P(e),ce(l,u)}}}function lh(t){let e;function n(o,s){return o[1]&&o[0].length>0?ah:sh}let r=n(t),i=r(t);return{c(){i.c(),e=Ti()},m(o,s){i.m(o,s),H(o,e,s)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},i:L,o:L,d(o){o&&P(e),i.d(o)}}}function uh(t,e,n){let r,i;sn(t,Xt,a=>n(3,i=a));let{events:o=[]}=e,{year:s=null}=e;return t.$$set=a=>{"events"in a&&n(0,o=a.events),"year"in a&&n(1,s=a.year)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=In(o,a=>a.region))},[o,s,r,i]}class ch extends At{constructor(e){super(),Nt(this,e,uh,lh,Tt,{events:0,year:1})}}function hi(t,e,n){const r=t.slice();return r[4]=e[n],r}function gi(t){let e,n=t[4]+"",r,i;return{c(){e=A("option"),r=q(n),e.__value=i=t[4],ur(e,e.__value)},m(o,s){H(o,e,s),b(e,r)},p(o,s){s&1&&n!==(n=o[4]+"")&&rt(r,n),s&1&&i!==(i=o[4])&&(e.__value=i,ur(e,e.__value))},d(o){o&&P(e)}}}function fh(t){let e,n,r,i,o,s,a=_t(t[0]),c=[];for(let l=0;l<a.length;l+=1)c[l]=gi(hi(t,a,l));return{c(){e=A("div"),n=A("label"),n.textContent="Select Indicator:",r=F(),i=A("select");for(let l=0;l<c.length;l+=1)c[l].c();N(n,"for","indicator"),N(n,"class","svelte-o395lv"),N(i,"id","indicator"),N(i,"class","svelte-o395lv"),N(e,"class","selector svelte-o395lv")},m(l,u){H(l,e,u),b(e,n),b(e,r),b(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null);cr(i,t[1]),o||(s=Sn(i,"change",t[2]),o=!0)},p(l,[u]){if(u&1){a=_t(l[0]);let f;for(f=0;f<a.length;f+=1){const h=hi(l,a,f);c[f]?c[f].p(h,u):(c[f]=gi(h),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=a.length}u&3&&cr(i,l[1])},i:L,o:L,d(l){l&&P(e),ce(c,l),o=!1,s()}}}function hh(t,e,n){let r;sn(t,Xt,a=>n(1,r=a));const i=Ci();let{indicators:o=["Ratification of the UN Convention against Torture","Ratification of Optional Protocol (OPCAT)","Submission of initial report to CAT","Prohibition of torture in the constitution","Criminalisation of torture under domestic law","Designation of the National Preventive Mechanism (in law)","Operationality of the National Preventive Mechanism","Existence of National Human Rights Institution that fully complies with Paris Principles"].map(a=>a.trim())}=e;an(()=>{r||Xt.set(o[0])});function s(a){Xt.set(a.target.value)}return t.$$set=a=>{"indicators"in a&&n(0,o=a.indicators)},t.$$.update=()=>{t.$$.dirty&2&&r&&i("select",{indicator:r})},[o,r,s]}class ho extends At{constructor(e){super(),Nt(this,e,hh,fh,Tt,{indicators:0})}}function di(t){let e,n,r,i,o;n=new ih({props:{data:t[2],selectedIndicator:t[3]}}),n.$on("yearSelect",t[5]);let s=t[0]&&pi(t);return{c(){e=A("div"),Ct(n.$$.fragment),r=F(),s&&s.c(),i=Ti(),N(e,"class","beeswarm-container svelte-1j4gyne")},m(a,c){H(a,e,c),xt(n,e,null),H(a,r,c),s&&s.m(a,c),H(a,i,c),o=!0},p(a,c){const l={};c&4&&(l.data=a[2]),c&8&&(l.selectedIndicator=a[3]),n.$set(l),a[0]?s?(s.p(a,c),c&1&&Z(s,1)):(s=pi(a),s.c(),Z(s,1),s.m(i.parentNode,i)):s&&(Ne(),nt(s,1,1,()=>{s=null}),Ae())},i(a){o||(Z(n.$$.fragment,a),Z(s),o=!0)},o(a){nt(n.$$.fragment,a),nt(s),o=!1},d(a){a&&(P(e),P(r),P(i)),bt(n),s&&s.d(a)}}}function pi(t){let e,n,r;return n=new ch({props:{events:t[1],year:t[0]}}),{c(){e=A("div"),Ct(n.$$.fragment),N(e,"class","details-container svelte-1j4gyne")},m(i,o){H(i,e,o),xt(n,e,null),r=!0},p(i,o){const s={};o&2&&(s.events=i[1]),o&1&&(s.year=i[0]),n.$set(s)},i(i){r||(Z(n.$$.fragment,i),r=!0)},o(i){nt(n.$$.fragment,i),r=!1},d(i){i&&P(e),bt(n)}}}function gh(t){let e,n,r,i,o,s,a,c,l,u;s=new ho({}),s.$on("select",t[4]);let f=t[3]&&di(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Progress Timeline",r=F(),i=A("p"),i.innerHTML=`Explore how countries have adopted various torture prevention measures over time. 
      Each dot represents a country and highlights a milestone in implementing anti-torture mechanisms. 
      For most indicators, progress is marked as <span class="text-label full svelte-1j4gyne">Yes (fully implemented)</span>. However, for &#39;Criminalisation of torture under domestic law,&#39; progress can be categorized as <span class="text-label full svelte-1j4gyne">Full</span> or <span class="text-label partial svelte-1j4gyne">Partial</span>.`,o=F(),Ct(s.$$.fragment),a=F(),c=A("p"),c.textContent="Drag the rectangle below or click on any of the circle to explore details about countries that implemented the selected indicator.",l=F(),f&&f.c(),N(n,"class","svelte-1j4gyne"),N(i,"class","description svelte-1j4gyne"),N(c,"class","interaction-note svelte-1j4gyne"),N(e,"class","timeline-section svelte-1j4gyne")},m(h,g){H(h,e,g),b(e,n),b(e,r),b(e,i),b(e,o),xt(s,e,null),b(e,a),b(e,c),b(e,l),f&&f.m(e,null),u=!0},p(h,[g]){h[3]?f?(f.p(h,g),g&8&&Z(f,1)):(f=di(h),f.c(),Z(f,1),f.m(e,null)):f&&(Ne(),nt(f,1,1,()=>{f=null}),Ae())},i(h){u||(Z(s.$$.fragment,h),Z(f),u=!0)},o(h){nt(s.$$.fragment,h),nt(f),u=!1},d(h){h&&P(e),bt(s),f&&f.d()}}}function dh(t,e,n){let r,i;sn(t,Xt,u=>n(3,i=u));let{data:o}=e,s=null,a=[];function c(u){Xt.set(u.detail.indicator),n(0,s=null),n(1,a=[])}function l(u){n(0,s=u.detail.year),n(1,a=u.detail.events||[])}return t.$$set=u=>{"data"in u&&n(6,o=u.data)},t.$$.update=()=>{t.$$.dirty&64&&n(2,r=o.map(u=>({year:+u.Date,country:u.Country,region:u.Region,indicator:u.Indicator.trim(),value:u.Input,color:u.Input==="Yes"?"var(--color-primary)":"var(--color-primary-light)"})).filter(u=>u.value==="Yes"||u.value==="Partially"))},[s,a,r,i,c,l,o]}class ph extends At{constructor(e){super(),Nt(this,e,dh,gh,Tt,{data:6})}}function mh(t){let e,n,r,i,o;return{c(){e=A("div"),n=bi("svg"),i=F(),o=A("div"),N(n,"class","svelte-xz2ppn"),N(e,"class","circles-viz svelte-xz2ppn"),Ce(()=>t[5].call(e)),N(o,"id","tooltip"),N(o,"class","tooltip hidden svelte-xz2ppn")},m(s,a){H(s,e,a),b(e,n),t[4](n),r=ki(e,t[5].bind(e)),H(s,i,a),H(s,o,a)},p:L,i:L,o:L,d(s){s&&(P(e),P(i),P(o)),t[4](null),r()}}}function yh(t,e,n){let{processedData:r}=e,i,o,s;function a(){if(!i||!o||!s||!(r!=null&&r.length))return;const u={top:30,right:50,bottom:50,left:50},f=o-u.left-u.right,h=s-u.top-u.bottom;lt(i).selectAll("*").remove();const g=lt(i).append("g").attr("transform",`translate(${u.left},${u.top})`),x=Math.min(20,Math.floor(f/(Math.sqrt(r.length)*3))),y={x:[x,f-x],y:[x,h-x]},d=[...new Set(r.map(k=>k.region))],m={};d.forEach((k,C)=>{m[k]={x:f*(.2+.7*C/Math.max(1,d.length-1)),y:h*.5}}),console.log("Region Centers:",m);const v=ro(r).force("x",io(f/2).strength(.1)).force("y",oo(h/2).strength(.1)).force("collide",no().radius(x+5).strength(.5)).force("cluster",_()).force("bounds",T(y)).on("tick",()=>{p.attr("transform",k=>{const C=(Math.random()-.5)*.5;return`translate(${k.x+C},${k.y+C})`})});for(let k=0;k<300;++k)v.tick();const p=g.selectAll("g").data(r).join("g").attr("transform",k=>`translate(${f/2},${h/2})`);p.transition().duration(1e3).delay((k,C)=>C*50).attr("transform",k=>`translate(${k.x},${k.y})`),setTimeout(()=>{v.stop()},1e3+r.length*50),p.append("circle").attr("r",0).attr("fill","white").attr("stroke",k=>k.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)").attr("stroke-width",1).transition().duration(500).delay((k,C)=>C*50).attr("r",x),p.append("image").attr("x",-x*.7).attr("y",-x*.7).attr("width",x*1.4).attr("height",x*1.4).attr("xlink:href",k=>`/APT-torture/images/${k.iso2}.svg`).attr("preserveAspectRatio","xMidYMid meet").style("opacity",0).transition().duration(500).delay((k,C)=>C*50).style("opacity",1);const w=lt("#tooltip");p.on("mouseover",(k,C)=>{w.style("--tooltip-color",C.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)"),w.html(`
            <div class="tooltip-content">
                <div class="section">
                    <div class="title">${C.country} | ${C.iso2.toUpperCase()}</div>
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <img src="/APT-torture/images/${C.iso2}.svg" alt="${C.country}" class="country-flag" />
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <div class="label">Region</div>
                    <div class="region-value">${C.region}</div>
                    <div class="indicator">${C.indicator}</div>
                    <div class="tooltip-status">${C.value==="Yes"?"Full Implemention":"Partial Implemention"}</div>
                    <div class="date-value">${Math.floor(C.date)}</div>
                </div>
            </div>
        `).style("left",`${k.pageX+10}px`).style("top",`${k.pageY-50}px`).classed("hidden",!1),lt(k.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1.3)`)}).on("mousemove",k=>{w.style("left",`${k.pageX+10}px`).style("top",`${k.pageY-50}px`)}).on("mouseout",(k,C)=>{w.classed("hidden",!0),lt(k.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1)`)});function _(k=.5){return function(W){r.forEach(D=>{const E=m[D.region];if(!E){console.warn(`Region "${D.region}" not found in centers.`);return}D.vx+=(E.x-D.x)*k*W,D.vy+=(E.y-D.y)*k*W})}}function T(k){return function(W){r.forEach(D=>{D.x<k.x[0]&&(D.x=k.x[0]),D.x>k.x[1]&&(D.x=k.x[1]),D.y<k.y[0]&&(D.y=k.y[0]),D.y>k.y[1]&&(D.y=k.y[1])})}}}an(()=>{r&&a()});function c(u){Be[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(){o=this.clientWidth,s=this.clientHeight,n(1,o),n(2,s),n(3,r)}return t.$$set=u=>{"processedData"in u&&n(3,r=u.processedData)},t.$$.update=()=>{if(t.$$.dirty&8){const h=Math.ceil(Math.sqrt((r==null?void 0:r.length)||1))*40;n(2,s=Math.max(700,h*1))}t.$$.dirty&8&&r&&a()},[i,o,s,r,c,l]}class vh extends At{constructor(e){super(),Nt(this,e,yh,mh,Tt,{processedData:3})}}function mi(t,e,n){const r=t.slice();return r[3]=e[n],r}function yi(t){let e,n,r=t[3].region+"",i,o,s,a=t[3].percentage+"",c,l,u,f,h,g,x=t[3].implemented+"",y,d,m,v,p=t[3].partial+"",w,_;return{c(){e=A("div"),n=A("h3"),i=q(r),o=F(),s=A("div"),c=q(a),l=q("%"),u=F(),f=A("div"),h=A("span"),g=q("Full: "),y=q(x),d=F(),m=A("span"),v=q("Partial: "),w=q(p),_=F(),N(n,"class","svelte-1tdfzl5"),N(s,"class","percentage svelte-1tdfzl5"),N(h,"class","implemented svelte-1tdfzl5"),N(m,"class","partial svelte-1tdfzl5"),N(f,"class","details svelte-1tdfzl5"),N(e,"class","region-card svelte-1tdfzl5")},m(T,k){H(T,e,k),b(e,n),b(n,i),b(e,o),b(e,s),b(s,c),b(s,l),b(e,u),b(e,f),b(f,h),b(h,g),b(h,y),b(f,d),b(f,m),b(m,v),b(m,w),b(e,_)},p(T,k){k&1&&r!==(r=T[3].region+"")&&rt(i,r),k&1&&a!==(a=T[3].percentage+"")&&rt(c,a),k&1&&x!==(x=T[3].implemented+"")&&rt(y,x),k&1&&p!==(p=T[3].partial+"")&&rt(w,p)},d(T){T&&P(e)}}}function _h(t){let e,n,r,i,o=_t(t[0]),s=[];for(let a=0;a<o.length;a+=1)s[a]=yi(mi(t,o,a));return{c(){e=A("div"),n=A("h2"),n.textContent="Regional Progress",r=F(),i=A("div");for(let a=0;a<s.length;a+=1)s[a].c();N(n,"class","svelte-1tdfzl5"),N(i,"class","regions-list svelte-1tdfzl5"),N(e,"class","regional-breakdown svelte-1tdfzl5")},m(a,c){H(a,e,c),b(e,n),b(e,r),b(e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,null)},p(a,[c]){if(c&1){o=_t(a[0]);let l;for(l=0;l<o.length;l+=1){const u=mi(a,o,l);s[l]?s[l].p(u,c):(s[l]=yi(u),s[l].c(),s[l].m(i,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},i:L,o:L,d(a){a&&P(e),ce(s,a)}}}function wh(t,e,n){let r,{regionalData:i}=e,{processedRegionalData:o}=e;return t.$$set=s=>{"regionalData"in s&&n(1,i=s.regionalData),"processedRegionalData"in s&&n(2,o=s.processedRegionalData)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=[...i].map(([s,a])=>{const c=o.get(s)||[];return{region:s,total:a.length,implemented:c.filter(l=>l.value==="Yes").length,partial:c.filter(l=>l.value==="Partially").length,percentage:(c.length/a.length*100).toFixed(1)}}).sort((s,a)=>parseFloat(a.percentage)-parseFloat(s.percentage)))},[r,i,o]}class xh extends At{constructor(e){super(),Nt(this,e,wh,_h,Tt,{regionalData:1,processedRegionalData:2})}}function vi(t){let e,n,r,i,o=t[4].percentage+"",s,a,c,l,u,f,h,g,x,y,d,m;return g=new vh({props:{processedData:t[0]}}),d=new xh({props:{regionalData:t[3],processedRegionalData:t[2]}}),{c(){e=A("div"),n=A("h4"),n.textContent="Global Implementation",r=F(),i=A("div"),s=q(o),a=q("%"),c=F(),l=A("p"),l.textContent="of countries have implemented or partially implemented this measure",u=F(),f=A("div"),h=A("div"),Ct(g.$$.fragment),x=F(),y=A("div"),Ct(d.$$.fragment),N(n,"class","svelte-jdjhuu"),N(i,"class","stats-number svelte-jdjhuu"),N(l,"class","stats-detail svelte-jdjhuu"),N(e,"class","global-stats svelte-jdjhuu"),N(h,"class","circles-container svelte-jdjhuu"),N(y,"class","breakdown-container svelte-jdjhuu"),N(f,"class","visualization-container svelte-jdjhuu")},m(v,p){H(v,e,p),b(e,n),b(e,r),b(e,i),b(i,s),b(i,a),b(e,c),b(e,l),H(v,u,p),H(v,f,p),b(f,h),xt(g,h,null),b(f,x),b(f,y),xt(d,y,null),m=!0},p(v,p){(!m||p&16)&&o!==(o=v[4].percentage+"")&&rt(s,o);const w={};p&1&&(w.processedData=v[0]),g.$set(w);const _={};p&8&&(_.regionalData=v[3]),p&4&&(_.processedRegionalData=v[2]),d.$set(_)},i(v){m||(Z(g.$$.fragment,v),Z(d.$$.fragment,v),m=!0)},o(v){nt(g.$$.fragment,v),nt(d.$$.fragment,v),m=!1},d(v){v&&(P(e),P(u),P(f)),bt(g),bt(d)}}}function bh(t){let e,n,r,i,o,s,a,c,l;a=new ho({}),a.$on("select",t[5]);let u=t[1]&&vi(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Implementation Status Overview",r=F(),i=A("p"),i.textContent=`Explore the global and regional progress of countries implementing key anti-torture mechanisms. \r
        The visualizations below provide insights into the distribution and extent of implementation for the selected indicator, highlighting successes and areas for improvement.`,o=F(),s=A("div"),Ct(a.$$.fragment),c=F(),u&&u.c(),N(n,"class","svelte-jdjhuu"),N(i,"class","description svelte-jdjhuu"),N(s,"class","selector-container svelte-jdjhuu"),N(e,"class","indicator-view svelte-jdjhuu")},m(f,h){H(f,e,h),b(e,n),b(e,r),b(e,i),b(e,o),b(e,s),xt(a,s,null),b(e,c),u&&u.m(e,null),l=!0},p(f,[h]){f[1]?u?(u.p(f,h),h&2&&Z(u,1)):(u=vi(f),u.c(),Z(u,1),u.m(e,null)):u&&(Ne(),nt(u,1,1,()=>{u=null}),Ae())},i(f){l||(Z(a.$$.fragment,f),Z(u),l=!0)},o(f){nt(a.$$.fragment,f),nt(u),l=!1},d(f){f&&P(e),bt(a),u&&u.d()}}}function Th(t,e,n){let r,i,o,s,a;sn(t,Xt,u=>n(1,a=u));let{data:c}=e;function l(u){Xt.set(u.detail.indicator)}return t.$$set=u=>{"data"in u&&n(6,c=u.data)},t.$$.update=()=>{t.$$.dirty&66&&n(0,r=a&&c?c.filter(u=>{const f=u.Indicator.trim(),h=a.trim();return console.log("Filtering:",{currentIndicator:f,selectedIndicator:h,isMatch:f===h,value:u.Input}),f===h&&(u.Input==="Yes"||u.Input==="Partially")}).map(u=>({country:u.Country,region:u.Region,indicator:u.Indicator,date:u.Date,value:u.Input,iso2:u.iso2})):[]),t.$$.dirty&67&&n(4,i={total:r.length,implemented:r.filter(u=>u.value==="Yes").length,partial:r.filter(u=>u.value==="Partially").length,percentage:a?(r.length/c.filter(u=>u.Indicator.trim()===a.trim()).length*100).toFixed(1):"0.0"}),t.$$.dirty&66&&n(3,o=In(c.filter(u=>u.Indicator.trim()===a),u=>u.Region)),t.$$.dirty&1&&n(2,s=In(r,u=>u.region))},[r,a,s,o,i,l,c]}class kh extends At{constructor(e){super(),Nt(this,e,Th,bh,Tt,{data:6})}}function Mh(t){let e;return{c(){e=A("div"),e.textContent="Loading data...",N(e,"class","loading svelte-o574d9")},m(n,r){H(n,e,r)},p:L,i:L,o:L,d(n){n&&P(e)}}}function Ch(t){let e,n;return e=new ph({props:{data:t[0]}}),{c(){Ct(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){nt(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function _i(t){let e,n;return e=new kh({props:{data:t[0]}}),{c(){Ct(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(Z(e.$$.fragment,r),n=!0)},o(r){nt(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function Nh(t){let e,n,r,i,o,s,a,c,l,u,f,h,g,x,y;e=new $o({});const d=[Ch,Mh],m=[];function v(w,_){return w[1]&&w[0].length>0?0:1}s=v(t),a=m[s]=d[s](t);let p=t[0]&&_i(t);return h=new Fo({}),x=new Uo({}),{c(){Ct(e.$$.fragment),n=F(),r=A("main"),i=A("div"),o=A("section"),a.c(),c=F(),l=A("section"),p&&p.c(),u=F(),f=A("section"),Ct(h.$$.fragment),g=F(),Ct(x.$$.fragment),N(o,"class","timeline svelte-o574d9"),N(l,"class","indicators svelte-o574d9"),N(f,"class","svelte-o574d9"),N(i,"class","container svelte-o574d9")},m(w,_){xt(e,w,_),H(w,n,_),H(w,r,_),b(r,i),b(i,o),m[s].m(o,null),b(i,c),b(i,l),p&&p.m(l,null),b(i,u),b(i,f),xt(h,f,null),H(w,g,_),xt(x,w,_),y=!0},p(w,[_]){let T=s;s=v(w),s===T?m[s].p(w,_):(Ne(),nt(m[T],1,1,()=>{m[T]=null}),Ae(),a=m[s],a?a.p(w,_):(a=m[s]=d[s](w),a.c()),Z(a,1),a.m(o,null)),w[0]?p?(p.p(w,_),_&1&&Z(p,1)):(p=_i(w),p.c(),Z(p,1),p.m(l,null)):p&&(Ne(),nt(p,1,1,()=>{p=null}),Ae())},i(w){y||(Z(e.$$.fragment,w),Z(a),Z(p),Z(h.$$.fragment,w),Z(x.$$.fragment,w),y=!0)},o(w){nt(e.$$.fragment,w),nt(a),nt(p),nt(h.$$.fragment,w),nt(x.$$.fragment,w),y=!1},d(w){w&&(P(n),P(r),P(g)),bt(e,w),m[s].d(),p&&p.d(),bt(h),bt(x,w)}}}function Ah(t,e,n){let r=[],i=!1;const o="/APT-torture/data/apt-data_updated.csv";return an(async()=>{try{n(0,r=await nc(o)),n(1,i=!0),console.log("Data loaded:",r)}catch(s){console.error("Failed to load data:",s),n(1,i=!1),n(0,r=[])}}),[r,i]}class $h extends At{constructor(e){super(),Nt(this,e,Ah,Nh,Tt,{})}}new $h({target:document.getElementById("app")});
