var uo=Object.defineProperty;var co=(t,e,n)=>e in t?uo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fn=(t,e,n)=>co(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function j(){}function mi(t){return t()}function or(){return Object.create(null)}function De(t){t.forEach(mi)}function yi(t){return typeof t=="function"}function kt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function fo(t){return Object.keys(t).length===0}function b(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function se(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function vi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t){return document.createTextNode(t)}function F(){return X(" ")}function _i(){return X("")}function An(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ho(t){return Array.from(t.childNodes)}function nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function ar(t,e){t.value=e??""}function sr(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}let Ie;function go(){if(Ie===void 0){Ie=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ie=!0}}return Ie}function wi(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=A("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=go();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=An(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=An(r.contentWindow,"resize",e),e()}),b(t,r),()=>{(i||o&&r.contentWindow)&&o(),P(r)}}function lr(t,e,n){t.classList.toggle(e,!!n)}function po(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Te;function be(t){Te=t}function xi(){if(!Te)throw new Error("Function called outside component initialization");return Te}function rn(t){xi().$$.on_mount.push(t)}function bi(){const t=xi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=po(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}const ne=[],Xe=[];let oe=[];const ur=[],mo=Promise.resolve();let $n=!1;function yo(){$n||($n=!0,mo.then(Ti))}function Me(t){oe.push(t)}const hn=new Set;let Kt=0;function Ti(){if(Kt!==0)return;const t=Te;do{try{for(;Kt<ne.length;){const e=ne[Kt];Kt++,be(e),vo(e.$$)}}catch(e){throw ne.length=0,Kt=0,e}for(be(null),ne.length=0,Kt=0;Xe.length;)Xe.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];hn.has(n)||(hn.add(n),n())}oe.length=0}while(ne.length);for(;ur.length;)ur.pop()();$n=!1,hn.clear(),be(t)}function vo(t){if(t.fragment!==null){t.update(),De(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Me)}}function _o(t){const e=[],n=[];oe.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),oe=e}const He=new Set;let zt;function ke(){zt={r:0,c:[],p:zt}}function Ce(){zt.r||De(zt.c),zt=zt.p}function B(t,e){t&&t.i&&(He.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(He.has(t))return;He.add(t),zt.c.push(()=>{He.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function vt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Mt(t){t&&t.c()}function wt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Me(()=>{const o=t.$$.on_mount.map(mi).filter(yi);t.$$.on_destroy?t.$$.on_destroy.push(...o):De(o),t.$$.on_mount=[]}),i.forEach(Me)}function xt(t,e){const n=t.$$;n.fragment!==null&&(_o(n.after_update),De(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wo(t,e){t.$$.dirty[0]===-1&&(ne.push(t),yo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ct(t,e,n,r,i,o,a=null,s=[-1]){const c=Te;be(t);const l=t.$$={fragment:null,ctx:[],props:o,update:j,not_equal:i,bound:or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:or(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};a&&a(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},(f,h,...d)=>{const y=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=y)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](y),u&&wo(t,f)),h}):[],l.update(),u=!0,De(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const f=ho(e.target);l.fragment&&l.fragment.l(f),f.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&B(t.$$.fragment),wt(t,e.target,e.anchor),Ti()}be(c)}class Nt{constructor(){fn(this,"$$");fn(this,"$$set")}$destroy(){xt(this,1),this.$destroy=j}$on(e,n){if(!yi(n))return j;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!fo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xo);function bo(t){let e,n,r,i,o,a,s,c,l;return{c(){e=A("header"),n=A("div"),r=A("h1"),i=X(t[0]),o=F(),a=A("h2"),s=X(t[1]),c=F(),l=A("p"),l.textContent=`This visualization explores the global progress in torture prevention measures,\r
        highlighting the positive steps taken by countries worldwide in ratifying conventions,\r
        implementing preventive mechanisms, and establishing human rights institutions.`,N(r,"class","svelte-1rpvxrr"),N(a,"class","svelte-1rpvxrr"),N(l,"class","intro svelte-1rpvxrr"),N(n,"class","header-content svelte-1rpvxrr"),N(e,"class","svelte-1rpvxrr")},m(u,f){z(u,e,f),b(e,n),b(n,r),b(r,i),b(n,o),b(n,a),b(a,s),b(n,c),b(n,l)},p(u,[f]){f&1&&nt(i,u[0]),f&2&&nt(s,u[1])},i:j,o:j,d(u){u&&P(e)}}}function To(t,e,n){let{title:r="Global Torture Prevention Progress"}=e,{subtitle:i="A Global Overview of Anti-Torture Measures"}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"subtitle"in o&&n(1,i=o.subtitle)},[r,i]}class Mo extends Nt{constructor(e){super(),Ct(this,e,To,bo,kt,{title:0,subtitle:1})}}function ko(t){let e;return{c(){e=A("footer"),e.innerHTML='<div class="footer-content svelte-lnurpo"><a href="https://www.apt.ch" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="/APT-torture/images/apt_logo.jpg" alt="Association for the Prevention of Torture Logo" class="logo svelte-lnurpo"/></a> <div class="author svelte-lnurpo"><p class="svelte-lnurpo">Designed by: <a href="https://www.linkedin.com/in/adekola-aliu" target="_blank" rel="noopener noreferrer" class="svelte-lnurpo">Adekola Aliu</a></p></div> <a href="https://www.vizforsocialgood.com" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="images/vfsg-logo.png" alt="Viz for Social Good Logo" class="logo svelte-lnurpo"/></a></div>',N(e,"class","svelte-lnurpo")},m(n,r){z(n,e,r)},p:j,i:j,o:j,d(n){n&&P(e)}}}function Co(t){return new Date().getFullYear(),[]}class No extends Nt{constructor(e){super(),Ct(this,e,Co,ko,kt,{})}}function cr(t,e,n){const r=t.slice();return r[4]=e[n].term,r[5]=e[n].description,r}function fr(t,e,n){const r=t.slice();return r[8]=e[n].title,r[5]=e[n].description,r}function hr(t){let e,n,r=t[8]+"",i,o,a,s=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=X(r),o=X(":"),a=F(),c=X(s),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(n,o),b(e,a),b(e,c),b(e,l)},p(u,f){f&4&&r!==(r=u[8]+"")&&nt(i,r),f&4&&s!==(s=u[5]+"")&&nt(c,s)},d(u){u&&P(e)}}}function gr(t){let e,n,r=t[4]+"",i,o,a,s=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=X(r),o=X(":"),a=F(),c=X(s),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(n,o),b(e,a),b(e,c),b(e,l)},p(u,f){f&8&&r!==(r=u[4]+"")&&nt(i,r),f&8&&s!==(s=u[5]+"")&&nt(c,s)},d(u){u&&P(e)}}}function Ao(t){let e,n,r,i,o,a,s,c,l,u,f,h,d,y,v=vt(t[2]),g=[];for(let p=0;p<v.length;p+=1)g[p]=hr(fr(t,v,p));let m=vt(t[3]),_=[];for(let p=0;p<m.length;p+=1)_[p]=gr(cr(t,m,p));return{c(){e=A("section"),n=A("h2"),r=X(t[0]),i=F(),o=A("p"),a=X(t[1]),s=F(),c=A("h3"),c.textContent="Indicator Definitions",l=F(),u=A("ul");for(let p=0;p<g.length;p+=1)g[p].c();f=F(),h=A("h3"),h.textContent="Relevant Terms",d=F(),y=A("ul");for(let p=0;p<_.length;p+=1)_[p].c();N(n,"class","methodology-title svelte-sdyjs1"),N(o,"class","methodology-content svelte-sdyjs1"),N(c,"class","subheading svelte-sdyjs1"),N(u,"class","definitions svelte-sdyjs1"),N(h,"class","subheading svelte-sdyjs1"),N(y,"class","terms svelte-sdyjs1"),N(e,"class","methodology svelte-sdyjs1")},m(p,w){z(p,e,w),b(e,n),b(n,r),b(e,i),b(e,o),b(o,a),b(e,s),b(e,c),b(e,l),b(e,u);for(let x=0;x<g.length;x+=1)g[x]&&g[x].m(u,null);b(e,f),b(e,h),b(e,d),b(e,y);for(let x=0;x<_.length;x+=1)_[x]&&_[x].m(y,null)},p(p,[w]){if(w&1&&nt(r,p[0]),w&2&&nt(a,p[1]),w&4){v=vt(p[2]);let x;for(x=0;x<v.length;x+=1){const M=fr(p,v,x);g[x]?g[x].p(M,w):(g[x]=hr(M),g[x].c(),g[x].m(u,null))}for(;x<g.length;x+=1)g[x].d(1);g.length=v.length}if(w&8){m=vt(p[3]);let x;for(x=0;x<m.length;x+=1){const M=cr(p,m,x);_[x]?_[x].p(M,w):(_[x]=gr(M),_[x].c(),_[x].m(y,null))}for(;x<_.length;x+=1)_[x].d(1);_.length=m.length}},i:j,o:j,d(p){p&&P(e),se(g,p),se(_,p)}}}function $o(t,e,n){let{methodologyTitle:r="Methodology"}=e,{methodologyContent:i=`
        The data used in this visualization was provided by the Association for the Prevention of Torture (APT). 
        It includes eight indicators identified as legal benchmarks for measuring progress in torture prevention 
        across countries. Each indicator focuses on legal frameworks rather than practical implementation, 
        as these are easier to document consistently. These indicators represent whether a country has met specific 
        legal obligations or milestones, providing a foundation for understanding progress toward eradicating torture. 
        For each country, the data records whether the indicator has been implemented ("Yes"), partially implemented 
        ("Partially"), or not implemented ("No").
    `}=e,{indicatorDefinitions:o=[{title:"Ratification of the UN Convention against Torture",description:"Indicates whether the country has formally ratified the UN Convention against Torture and Other Cruel, Inhuman, or Degrading Treatment or Punishment."},{title:"Adoption of the Optional Protocol (OPCAT)",description:"Reflects whether the country has adopted the OPCAT, a treaty that establishes a system for regular independent visits to places of detention."},{title:"Establishment of a National Preventive Mechanism (NPM)",description:"Indicates if the country has set up an independent mechanism to monitor detention facilities."},{title:"Criminalisation of torture under domestic law",description:"Indicates whether torture is explicitly criminalized in national legislation."},{title:"Independent investigative mechanisms for torture allegations",description:"Reflects whether the country has mechanisms in place to independently investigate allegations of torture."},{title:"Procedures for complaint and protection of victims",description:"Indicates whether mechanisms exist for victims to report and seek protection from torture."},{title:"Procedures for monitoring and visiting places of detention",description:"Indicates if the country has procedures for regular monitoring of detention facilities."},{title:"Training and capacity-building of relevant authorities",description:"Indicates whether training programs for law enforcement, military personnel, and other relevant authorities include torture prevention measures."}]}=e,{relevantTerms:a=[{term:"Full Implementation ('Yes')",description:"Indicates that the country has completely adopted the measure as per the indicator's definition."},{term:"Partial Implementation ('Partially')",description:"Reflects that the country has taken steps toward adopting the measure but has not fully met the criteria."}]}=e;return t.$$set=s=>{"methodologyTitle"in s&&n(0,r=s.methodologyTitle),"methodologyContent"in s&&n(1,i=s.methodologyContent),"indicatorDefinitions"in s&&n(2,o=s.indicatorDefinitions),"relevantTerms"in s&&n(3,a=s.relevantTerms)},[r,i,o,a]}class Do extends Nt{constructor(e){super(),Ct(this,e,$o,Ao,kt,{methodologyTitle:0,methodologyContent:1,indicatorDefinitions:2,relevantTerms:3})}}function Oe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function So(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wn(t){let e,n,r;t.length!==2?(e=Oe,n=(s,c)=>Oe(t(s),c),r=(s,c)=>t(s)-c):(e=t===Oe||t===So?t:Uo,n=t,r=t);function i(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(s,c,l=0,u=s.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(s[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function a(s,c,l=0,u=s.length){const f=i(s,c,l,u-1);return f>l&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function Uo(){return 0}function Eo(t){return t===null?NaN:+t}const Io=Wn(Oe),Fo=Io.right;Wn(Eo).center;class Yo extends Map{constructor(e,n=Ho){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dr(this,e))}has(e){return super.has(dr(this,e))}set(e,n){return super.set(Ro(this,e),n)}delete(e){return super.delete(Po(this,e))}}function dr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ro({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Po({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ho(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pr(t){return t}function Dn(t,...e){return Oo(t,pr,pr,e)}function Oo(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new Yo,c=r[a++];let l=-1;for(const u of o){const f=c(u,++l,o),h=s.get(f);h?h.push(u):s.set(f,[u])}for(const[u,f]of s)s.set(u,i(f,a));return e(s)}(t,0)}const zo=Math.sqrt(50),Lo=Math.sqrt(10),Wo=Math.sqrt(2);function Mi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=zo?10:o>=Lo?5:o>=Wo?2:1;let s,c,l;return i<0?(l=Math.pow(10,-i)/a,s=Math.round(t*l),c=Math.round(e*l),s/l<t&&++s,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*a,s=Math.round(t/l),c=Math.round(e/l),s*l<t&&++s,c*l>e&&--c),c<s&&.5<=n&&n<2?Mi(t,e,n*2):[s,c,l]}function mr(t,e,n){return e=+e,t=+t,n=+n,Mi(t,e,n)[2]}function yr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?mr(e,t,n):mr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Vo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Xo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function qo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Bo(t){return t}var jo=3,vr=1e-6;function Zo(t){return"translate("+t+",0)"}function Go(t){return e=>+t(e)}function Qo(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ko(){return!this.__axis}function Jo(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=1,u="y",f=Zo;function h(d){var y=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):Bo),g=Math.max(o,0)+s,m=e.range(),_=+m[0]+c,p=+m[m.length-1]+c,w=(e.bandwidth?Qo:Go)(e.copy(),c),x=d.selection?d.selection():d,M=x.selectAll(".domain").data([null]),T=x.selectAll(".tick").data(y,e).order(),C=T.exit(),L=T.enter().append("g").attr("class","tick"),D=T.select("line"),I=T.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(L),D=D.merge(L.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),I=I.merge(L.append("text").attr("fill","currentColor").attr(u,l*g).attr("dy","0.71em")),d!==x&&(M=M.transition(d),T=T.transition(d),D=D.transition(d),I=I.transition(d),C=C.transition(d).attr("opacity",vr).attr("transform",function(H){return isFinite(H=w(H))?f(H+c):this.getAttribute("transform")}),L.attr("opacity",vr).attr("transform",function(H){var Y=this.parentNode.__axis;return f((Y&&isFinite(Y=Y(H))?Y:w(H))+c)})),C.remove(),M.attr("d",a?"M"+_+","+l*a+"V"+c+"H"+p+"V"+l*a:"M"+_+","+c+"H"+p),T.attr("opacity",1).attr("transform",function(H){return f(w(H)+c)}),D.attr(u+"2",l*o),I.attr(u,l*g).text(v),x.filter(Ko).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),x.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(o=a=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function ta(t){return Jo(jo,t)}var ea={value:()=>{}};function on(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new ze(n)}function ze(t){this._=t}function na(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}ze.prototype=on.prototype={constructor:ze,on:function(t,e){var n=this._,r=na(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ra(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=_r(n[i],t.name,e);else if(e==null)for(i in n)n[i]=_r(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ze(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ra(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function _r(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ea,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Sn="http://www.w3.org/1999/xhtml";const wr={svg:"http://www.w3.org/2000/svg",xhtml:Sn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),wr.hasOwnProperty(e)?{space:wr[e],local:t}:t}function ia(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Sn&&e.documentElement.namespaceURI===Sn?e.createElement(t):e.createElementNS(n,t)}}function oa(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ki(t){var e=an(t);return(e.local?oa:ia)(e)}function aa(){}function Vn(t){return t==null?aa:function(){return this.querySelector(t)}}function sa(t){typeof t!="function"&&(t=Vn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,l,u=0;u<a;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),s[u]=l);return new mt(r,this._parents)}function la(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ua(){return[]}function Ci(t){return t==null?ua:function(){return this.querySelectorAll(t)}}function ca(t){return function(){return la(t.apply(this,arguments))}}function fa(t){typeof t=="function"?t=ca(t):t=Ci(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&(r.push(t.call(c,c.__data__,l,a)),i.push(c));return new mt(r,i)}function Ni(t){return function(){return this.matches(t)}}function Ai(t){return function(e){return e.matches(t)}}var ha=Array.prototype.find;function ga(t){return function(){return ha.call(this.children,t)}}function da(){return this.firstElementChild}function pa(t){return this.select(t==null?da:ga(typeof t=="function"?t:Ai(t)))}var ma=Array.prototype.filter;function ya(){return Array.from(this.children)}function va(t){return function(){return ma.call(this.children,t)}}function _a(t){return this.selectAll(t==null?ya:va(typeof t=="function"?t:Ai(t)))}function wa(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new mt(r,this._parents)}function $i(t){return new Array(t.length)}function xa(){return new mt(this._enter||this._groups.map($i),this._parents)}function qe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qe.prototype={constructor:qe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ba(t){return function(){return t}}function Ta(t,e,n,r,i,o){for(var a=0,s,c=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new qe(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function Ma(t,e,n,r,i,o,a){var s,c,l=new Map,u=e.length,f=o.length,h=new Array(u),d;for(s=0;s<u;++s)(c=e[s])&&(h[s]=d=a.call(c,c.__data__,s,e)+"",l.has(d)?i[s]=c:l.set(d,c));for(s=0;s<f;++s)d=a.call(t,o[s],s,o)+"",(c=l.get(d))?(r[s]=c,c.__data__=o[s],l.delete(d)):n[s]=new qe(t,o[s]);for(s=0;s<u;++s)(c=e[s])&&l.get(h[s])===c&&(i[s]=c)}function ka(t){return t.__data__}function Ca(t,e){if(!arguments.length)return Array.from(this,ka);var n=e?Ma:Ta,r=this._parents,i=this._groups;typeof t!="function"&&(t=ba(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,d=Na(t.call(u,u&&u.__data__,l,r)),y=d.length,v=s[l]=new Array(y),g=a[l]=new Array(y),m=c[l]=new Array(h);n(u,f,v,g,m,d,e);for(var _=0,p=0,w,x;_<y;++_)if(w=v[_]){for(_>=p&&(p=_+1);!(x=g[p])&&++p<y;);w._next=x||null}}return a=new mt(a,r),a._enter=s,a._exit=c,a}function Na(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Aa(){return new mt(this._exit||this._groups.map($i),this._parents)}function $a(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Da(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var l=n[c],u=r[c],f=l.length,h=s[c]=new Array(f),d,y=0;y<f;++y)(d=l[y]||u[y])&&(h[y]=d);for(;c<i;++c)s[c]=n[c];return new mt(s,this._parents)}function Sa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ua(t){t||(t=Ea);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),l,u=0;u<s;++u)(l=a[u])&&(c[u]=l);c.sort(e)}return new mt(i,this._parents).order()}function Ea(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ia(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Fa(){return Array.from(this)}function Ya(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Ra(){let t=0;for(const e of this)++t;return t}function Pa(){return!this.node()}function Ha(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Oa(t){return function(){this.removeAttribute(t)}}function za(t){return function(){this.removeAttributeNS(t.space,t.local)}}function La(t,e){return function(){this.setAttribute(t,e)}}function Wa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Va(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Xa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function qa(t,e){var n=an(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?za:Oa:typeof e=="function"?n.local?Xa:Va:n.local?Wa:La)(n,e))}function Di(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ba(t){return function(){this.style.removeProperty(t)}}function ja(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Za(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ga(t,e,n){return arguments.length>1?this.each((e==null?Ba:typeof e=="function"?Za:ja)(t,e,n??"")):le(this.node(),t)}function le(t,e){return t.style.getPropertyValue(e)||Di(t).getComputedStyle(t,null).getPropertyValue(e)}function Qa(t){return function(){delete this[t]}}function Ka(t,e){return function(){this[t]=e}}function Ja(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ts(t,e){return arguments.length>1?this.each((e==null?Qa:typeof e=="function"?Ja:Ka)(t,e)):this.node()[t]}function Si(t){return t.trim().split(/^|\s+/)}function Xn(t){return t.classList||new Ui(t)}function Ui(t){this._node=t,this._names=Si(t.getAttribute("class")||"")}Ui.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ei(t,e){for(var n=Xn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ii(t,e){for(var n=Xn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function es(t){return function(){Ei(this,t)}}function ns(t){return function(){Ii(this,t)}}function rs(t,e){return function(){(e.apply(this,arguments)?Ei:Ii)(this,t)}}function is(t,e){var n=Si(t+"");if(arguments.length<2){for(var r=Xn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?rs:e?es:ns)(n,e))}function os(){this.textContent=""}function as(t){return function(){this.textContent=t}}function ss(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ls(t){return arguments.length?this.each(t==null?os:(typeof t=="function"?ss:as)(t)):this.node().textContent}function us(){this.innerHTML=""}function cs(t){return function(){this.innerHTML=t}}function fs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function hs(t){return arguments.length?this.each(t==null?us:(typeof t=="function"?fs:cs)(t)):this.node().innerHTML}function gs(){this.nextSibling&&this.parentNode.appendChild(this)}function ds(){return this.each(gs)}function ps(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ms(){return this.each(ps)}function ys(t){var e=typeof t=="function"?t:ki(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vs(){return null}function _s(t,e){var n=typeof t=="function"?t:ki(t),r=e==null?vs:typeof e=="function"?e:Vn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ws(){var t=this.parentNode;t&&t.removeChild(this)}function xs(){return this.each(ws)}function bs(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ts(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ms(t){return this.select(t?Ts:bs)}function ks(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Cs(t){return function(e){t.call(this,e,this.__data__)}}function Ns(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function As(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function $s(t,e,n){return function(){var r=this.__on,i,o=Cs(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ds(t,e,n){var r=Ns(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?$s:As,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Fi(t,e,n){var r=Di(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ss(t,e){return function(){return Fi(this,t,e)}}function Us(t,e){return function(){return Fi(this,t,e.apply(this,arguments))}}function Es(t,e){return this.each((typeof e=="function"?Us:Ss)(t,e))}function*Is(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Yi=[null];function mt(t,e){this._groups=t,this._parents=e}function Se(){return new mt([[document.documentElement]],Yi)}function Fs(){return this}mt.prototype=Se.prototype={constructor:mt,select:sa,selectAll:fa,selectChild:pa,selectChildren:_a,filter:wa,data:Ca,enter:xa,exit:Aa,join:$a,merge:Da,selection:Fs,order:Sa,sort:Ua,call:Ia,nodes:Fa,node:Ya,size:Ra,empty:Pa,each:Ha,attr:qa,style:Ga,property:ts,classed:is,text:ls,html:hs,raise:ds,lower:ms,append:ys,insert:_s,remove:xs,clone:Ms,datum:ks,on:Ds,dispatch:Es,[Symbol.iterator]:Is};function gt(t){return typeof t=="string"?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],Yi)}function Ys(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xr(t,e){if(t=Ys(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Un={capture:!0,passive:!1};function En(t){t.preventDefault(),t.stopImmediatePropagation()}function Rs(t){var e=t.document.documentElement,n=gt(t).on("dragstart.drag",En,Un);"onselectstart"in e?n.on("selectstart.drag",En,Un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ps(t,e){var n=t.document.documentElement,r=gt(t).on("dragstart.drag",null);e&&(r.on("click.drag",En,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function qn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ri(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ue(){}var Ne=.7,Be=1/Ne,ae="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hs=/^#([0-9a-f]{3,8})$/,Os=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),zs=new RegExp(`^rgb\\(${Dt},${Dt},${Dt}\\)$`),Ls=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ae}\\)$`),Ws=new RegExp(`^rgba\\(${Dt},${Dt},${Dt},${Ae}\\)$`),Vs=new RegExp(`^hsl\\(${Ae},${Dt},${Dt}\\)$`),Xs=new RegExp(`^hsla\\(${Ae},${Dt},${Dt},${Ae}\\)$`),br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(Ue,Vt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tr,formatHex:Tr,formatHex8:qs,formatHsl:Bs,formatRgb:Mr,toString:Mr});function Tr(){return this.rgb().formatHex()}function qs(){return this.rgb().formatHex8()}function Bs(){return Pi(this).formatHsl()}function Mr(){return this.rgb().formatRgb()}function Vt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Hs.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?kr(e):n===3?new dt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Os.exec(t))?new dt(e[1],e[2],e[3],1):(e=zs.exec(t))?new dt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ls.exec(t))?Fe(e[1],e[2],e[3],e[4]):(e=Ws.exec(t))?Fe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Vs.exec(t))?Ar(e[1],e[2]/100,e[3]/100,1):(e=Xs.exec(t))?Ar(e[1],e[2]/100,e[3]/100,e[4]):br.hasOwnProperty(t)?kr(br[t]):t==="transparent"?new dt(NaN,NaN,NaN,0):null}function kr(t){return new dt(t>>16&255,t>>8&255,t&255,1)}function Fe(t,e,n,r){return r<=0&&(t=e=n=NaN),new dt(t,e,n,r)}function js(t){return t instanceof Ue||(t=Vt(t)),t?(t=t.rgb(),new dt(t.r,t.g,t.b,t.opacity)):new dt}function In(t,e,n,r){return arguments.length===1?js(t):new dt(t,e,n,r??1)}function dt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}qn(dt,In,Ri(Ue,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ne:Math.pow(Ne,t),new dt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new dt(Wt(this.r),Wt(this.g),Wt(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cr,formatHex:Cr,formatHex8:Zs,formatRgb:Nr,toString:Nr}));function Cr(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}`}function Zs(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}${Lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nr(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function Ar(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Tt(t,e,n,r)}function Pi(t){if(t instanceof Tt)return new Tt(t.h,t.s,t.l,t.opacity);if(t instanceof Ue||(t=Vt(t)),!t)return new Tt;if(t instanceof Tt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new Tt(a,s,c,t.opacity)}function Gs(t,e,n,r){return arguments.length===1?Pi(t):new Tt(t,e,n,r??1)}function Tt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qn(Tt,Gs,Ri(Ue,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new Tt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ne:Math.pow(Ne,t),new Tt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new dt(gn(t>=240?t-240:t+120,i,r),gn(t,i,r),gn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Tt($r(this.h),Ye(this.s),Ye(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${$r(this.h)}, ${Ye(this.s)*100}%, ${Ye(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $r(t){return t=(t||0)%360,t<0?t+360:t}function Ye(t){return Math.max(0,Math.min(1,t||0))}function gn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Bn=t=>()=>t;function Qs(t,e){return function(n){return t+n*e}}function Ks(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Js(t){return(t=+t)==1?Hi:function(e,n){return n-e?Ks(e,n,t):Bn(isNaN(e)?n:e)}}function Hi(t,e){var n=e-t;return n?Qs(t,n):Bn(isNaN(t)?e:t)}const Ze=function t(e){var n=Js(e);function r(i,o){var a=n((i=In(i)).r,(o=In(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),l=Hi(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function tl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function el(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nl(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=sn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function rl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function il(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=sn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(Fn.source,"g");function ol(t){return function(){return t}}function al(t){return function(e){return t(e)+""}}function Oi(t,e){var n=Fn.lastIndex=dn.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=Fn.exec(t))&&(i=dn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:bt(r,i)})),n=dn.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?al(c[0].x):ol(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)s[(f=c[u]).i]=f.x(l);return s.join("")})}function sn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Bn(e):(n==="number"?bt:n==="string"?(r=Vt(e))?(e=r,Ze):Oi:e instanceof Vt?Ze:e instanceof Date?rl:el(e)?tl:Array.isArray(e)?nl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?il:bt)(t,e)}function sl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Dr=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zi(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Dr,skewX:Math.atan(c)*Dr,scaleX:a,scaleY:s}}var Re;function ll(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yn:zi(e.a,e.b,e.c,e.d,e.e,e.f)}function ul(t){return t==null||(Re||(Re=document.createElementNS("http://www.w3.org/2000/svg","g")),Re.setAttribute("transform",t),!(t=Re.transform.baseVal.consolidate()))?Yn:(t=t.matrix,zi(t.a,t.b,t.c,t.d,t.e,t.f))}function Li(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,d,y){if(l!==f||u!==h){var v=d.push("translate(",null,e,null,n);y.push({i:v-4,x:bt(l,f)},{i:v-2,x:bt(u,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:bt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function s(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:bt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,d,y){if(l!==f||u!==h){var v=d.push(i(d)+"scale(",null,",",null,")");y.push({i:v-4,x:bt(l,f)},{i:v-2,x:bt(u,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),a(l.rotate,u.rotate,f,h),s(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(d){for(var y=-1,v=h.length,g;++y<v;)f[(g=h[y]).i]=g.x(d);return f.join("")}}}var cl=Li(ll,"px, ","px)","deg)"),fl=Li(ul,", ",")",")"),ue=0,_e=0,de=0,Wi=1e3,Ge,we,Qe=0,Xt=0,ln=0,$e=typeof performance=="object"&&performance.now?performance:Date,Vi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jn(){return Xt||(Vi(hl),Xt=$e.now()+ln)}function hl(){Xt=0}function Ke(){this._call=this._time=this._next=null}Ke.prototype=Zn.prototype={constructor:Ke,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?jn():+n)+(e==null?0:+e),!this._next&&we!==this&&(we?we._next=this:Ge=this,we=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function Zn(t,e,n){var r=new Ke;return r.restart(t,e,n),r}function gl(){jn(),++ue;for(var t=Ge,e;t;)(e=Xt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ue}function Sr(){Xt=(Qe=$e.now())+ln,ue=_e=0;try{gl()}finally{ue=0,pl(),Xt=0}}function dl(){var t=$e.now(),e=t-Qe;e>Wi&&(ln-=e,Qe=t)}function pl(){for(var t,e=Ge,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ge=n);we=t,Rn(r)}function Rn(t){if(!ue){_e&&(_e=clearTimeout(_e));var e=t-Xt;e>24?(t<1/0&&(_e=setTimeout(Sr,t-$e.now()-ln)),de&&(de=clearInterval(de))):(de||(Qe=$e.now(),de=setInterval(dl,Wi)),ue=1,Vi(Sr))}}function Ur(t,e,n){var r=new Ke;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ml=on("start","end","cancel","interrupt"),yl=[],Xi=0,Er=1,Pn=2,Le=3,Ir=4,Hn=5,We=6;function un(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;vl(t,n,{name:e,index:r,group:i,on:ml,tween:yl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Xi})}function Gn(t,e){var n=At(t,e);if(n.state>Xi)throw new Error("too late; already scheduled");return n}function St(t,e){var n=At(t,e);if(n.state>Le)throw new Error("too late; already running");return n}function At(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Zn(o,0,n.time);function o(l){n.state=Er,n.timer.restart(a,n.delay,n.time),n.delay<=l&&a(l-n.delay)}function a(l){var u,f,h,d;if(n.state!==Er)return c();for(u in r)if(d=r[u],d.name===n.name){if(d.state===Le)return Ur(a);d.state===Ir?(d.state=We,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=We,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Ur(function(){n.state===Le&&(n.state=Ir,n.timer.restart(s,n.delay,n.time),s(l))}),n.state=Pn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Pn){for(n.state=Le,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function s(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Hn,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===Hn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=We,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function On(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Pn&&r.state<Hn,r.state=We,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function _l(t){return this.each(function(){On(this,t)})}function wl(t,e){var n,r;return function(){var i=St(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function xl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=St(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=s;break}c===l&&i.push(s)}o.tween=i}}function bl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=At(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?wl:xl)(n,t,e))}function Qn(t,e,n){var r=t._id;return t.each(function(){var i=St(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return At(i,r).value[e]}}function qi(t,e){var n;return(typeof e=="number"?bt:e instanceof Vt?Ze:(n=Vt(e))?(e=n,Ze):Oi)(t,e)}function Tl(t){return function(){this.removeAttribute(t)}}function Ml(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kl(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function Cl(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function Nl(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function Al(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function $l(t,e){var n=an(t),r=n==="transform"?fl:qi;return this.attrTween(t,typeof e=="function"?(n.local?Al:Nl)(n,r,Qn(this,"attr."+t,e)):e==null?(n.local?Ml:Tl)(n):(n.local?Cl:kl)(n,r,e))}function Dl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Sl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ul(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Sl(t,o)),n}return i._value=e,i}function El(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Dl(t,o)),n}return i._value=e,i}function Il(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=an(t);return this.tween(n,(r.local?Ul:El)(r,e))}function Fl(t,e){return function(){Gn(this,t).delay=+e.apply(this,arguments)}}function Yl(t,e){return e=+e,function(){Gn(this,t).delay=e}}function Rl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fl:Yl)(e,t)):At(this.node(),e).delay}function Pl(t,e){return function(){St(this,t).duration=+e.apply(this,arguments)}}function Hl(t,e){return e=+e,function(){St(this,t).duration=e}}function Ol(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Pl:Hl)(e,t)):At(this.node(),e).duration}function zl(t,e){if(typeof e!="function")throw new Error;return function(){St(this,t).ease=e}}function Ll(t){var e=this._id;return arguments.length?this.each(zl(e,t)):At(this.node(),e).ease}function Wl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;St(this,t).ease=n}}function Vl(t){if(typeof t!="function")throw new Error;return this.each(Wl(this._id,t))}function Xl(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,l=0;l<a;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&s.push(c);return new Yt(r,this._parents,this._name,this._id)}function ql(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],l=n[s],u=c.length,f=a[s]=new Array(u),h,d=0;d<u;++d)(h=c[d]||l[d])&&(f[d]=h);for(;s<r;++s)a[s]=e[s];return new Yt(a,this._parents,this._name,this._id)}function Bl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function jl(t,e,n){var r,i,o=Bl(e)?Gn:St;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Zl(t,e){var n=this._id;return arguments.length<2?At(this.node(),n).on.on(t):this.each(jl(n,t,e))}function Gl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ql(){return this.on("end.remove",Gl(this._id))}function Kl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Vn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,l=o[a]=new Array(c),u,f,h=0;h<c;++h)(u=s[h])&&(f=t.call(u,u.__data__,h,s))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,un(l[h],e,n,h,l,At(u,n)));return new Yt(o,this._parents,e,n)}function Jl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ci(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),d,y=At(u,n),v=0,g=h.length;v<g;++v)(d=h[v])&&un(d,e,n,v,h,y);o.push(h),a.push(u)}return new Yt(o,a,e,n)}var tu=Se.prototype.constructor;function eu(){return new tu(this._groups,this._parents)}function nu(t,e){var n,r,i;return function(){var o=le(this,t),a=(this.style.removeProperty(t),le(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Bi(t){return function(){this.style.removeProperty(t)}}function ru(t,e,n){var r,i=n+"",o;return function(){var a=le(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function iu(t,e,n){var r,i,o;return function(){var a=le(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),le(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function ou(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=St(this,t),l=c.on,u=c.value[o]==null?s||(s=Bi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(a,i=u),c.on=r}}function au(t,e,n){var r=(t+="")=="transform"?cl:qi;return e==null?this.styleTween(t,nu(t,r)).on("end.style."+t,Bi(t)):typeof e=="function"?this.styleTween(t,iu(t,r,Qn(this,"style."+t,e))).each(ou(this._id,t)):this.styleTween(t,ru(t,r,e),n).on("end.style."+t,null)}function su(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function lu(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&su(t,a,n)),r}return o._value=e,o}function uu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,lu(t,e,n??""))}function cu(t){return function(){this.textContent=t}}function fu(t){return function(){var e=t(this);this.textContent=e??""}}function hu(t){return this.tween("text",typeof t=="function"?fu(Qn(this,"text",t)):cu(t==null?"":t+""))}function gu(t){return function(e){this.textContent=t.call(this,e)}}function du(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&gu(i)),e}return r._value=t,r}function pu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,du(t))}function mu(){for(var t=this._name,e=this._id,n=ji(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)if(c=a[l]){var u=At(c,e);un(c,t,n,l,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Yt(r,this._parents,t,n)}function yu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var l=St(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),l.on=e}),i===0&&o()})}var vu=0;function Yt(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ji(){return++vu}var Ut=Se.prototype;Yt.prototype={constructor:Yt,select:Kl,selectAll:Jl,selectChild:Ut.selectChild,selectChildren:Ut.selectChildren,filter:Xl,merge:ql,selection:eu,transition:mu,call:Ut.call,nodes:Ut.nodes,node:Ut.node,size:Ut.size,empty:Ut.empty,each:Ut.each,on:Zl,attr:$l,attrTween:Il,style:au,styleTween:uu,text:hu,textTween:pu,remove:Ql,tween:bl,delay:Rl,duration:Ol,ease:Ll,easeVarying:Vl,end:yu,[Symbol.iterator]:Ut[Symbol.iterator]};function _u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var zn=4/11,wu=6/11,xu=8/11,bu=3/4,Tu=9/11,Mu=10/11,ku=15/16,Cu=21/22,Nu=63/64,Pe=1/zn/zn;function Au(t){return(t=+t)<zn?Pe*t*t:t<xu?Pe*(t-=wu)*t+bu:t<Mu?Pe*(t-=Tu)*t+ku:Pe*(t-=Cu)*t+Nu}var $u={time:null,delay:0,duration:250,ease:_u};function Du(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Su(t){var e,n;t instanceof Yt?(e=t._id,t=t._name):(e=ji(),(n=$u).time=jn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,l=0;l<s;++l)(c=a[l])&&un(c,t,e,l,a,n||Du(c,e));return new Yt(r,this._parents,t,e)}Se.prototype.interrupt=_l;Se.prototype.transition=Su;const pn=t=>()=>t;function Uu(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Eu(t){t.stopImmediatePropagation()}function mn(t){t.preventDefault(),t.stopImmediatePropagation()}var Fr={name:"drag"},yn={name:"space"},Jt={name:"handle"},te={name:"center"};const{abs:Yr,max:at,min:st}=Math;function Rr(t){return[+t[0],+t[1]]}function Pr(t){return[Rr(t[0]),Rr(t[1])]}var Ve={name:"x",handles:["w","e"].map(Je),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},vn={name:"y",handles:["n","s"].map(Je),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Et={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Or={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Iu={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Fu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Je(t){return{type:t}}function Yu(t){return!t.ctrlKey&&!t.button}function Ru(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Pu(){return navigator.maxTouchPoints||"ontouchstart"in this}function _n(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Hu(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Ou(){return zu(Ve)}function zu(t){var e=Ru,n=Yu,r=Pu,i=!0,o=on("start","brush","end"),a=6,s;function c(g){var m=g.property("__brush",v).selectAll(".overlay").data([Je("overlay")]);m.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Et.overlay).merge(m).each(function(){var p=_n(this).extent;gt(this).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1])}),g.selectAll(".selection").data([Je("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Et.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=g.selectAll(".handle").data(t.handles,function(p){return p.type});_.exit().remove(),_.enter().append("rect").attr("class",function(p){return"handle handle--"+p.type}).attr("cursor",function(p){return Et[p.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(g,m,_){g.tween?g.on("start.brush",function(p){u(this,arguments).beforestart().start(p)}).on("interrupt.brush end.brush",function(p){u(this,arguments).end(p)}).tween("brush",function(){var p=this,w=p.__brush,x=u(p,arguments),M=w.selection,T=t.input(typeof m=="function"?m.apply(this,arguments):m,w.extent),C=sn(M,T);function L(D){w.selection=D===1&&T===null?null:C(D),l.call(p),x.brush()}return M!==null&&T!==null?L:L(1)}):g.each(function(){var p=this,w=arguments,x=p.__brush,M=t.input(typeof m=="function"?m.apply(p,w):m,x.extent),T=u(p,w).beforestart();On(p),x.selection=M===null?null:M,l.call(p),T.start(_).brush(_).end(_)})},c.clear=function(g,m){c.move(g,null,m)};function l(){var g=gt(this),m=_n(this).selection;m?(g.selectAll(".selection").style("display",null).attr("x",m[0][0]).attr("y",m[0][1]).attr("width",m[1][0]-m[0][0]).attr("height",m[1][1]-m[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?m[1][0]-a/2:m[0][0]-a/2}).attr("y",function(_){return _.type[0]==="s"?m[1][1]-a/2:m[0][1]-a/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?m[1][0]-m[0][0]+a:a}).attr("height",function(_){return _.type==="e"||_.type==="w"?m[1][1]-m[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(g,m,_){var p=g.__brush.emitter;return p&&(!_||!p.clean)?p:new f(g,m,_)}function f(g,m,_){this.that=g,this.args=m,this.state=g.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,m){return this.starting?(this.starting=!1,this.emit("start",g,m)):this.emit("brush",g),this},brush:function(g,m){return this.emit("brush",g,m),this},end:function(g,m){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,m)),this},emit:function(g,m,_){var p=gt(this.that).datum();o.call(g,this.that,new Uu(g,{sourceEvent:m,target:c,selection:t.output(this.state.selection),mode:_,dispatch:o}),p)}};function h(g){if(s&&!g.touches||!n.apply(this,arguments))return;var m=this,_=g.target.__data__.type,p=(i&&g.metaKey?_="overlay":_)==="selection"?Fr:i&&g.altKey?te:Jt,w=t===vn?null:Iu[_],x=t===Ve?null:Fu[_],M=_n(m),T=M.extent,C=M.selection,L=T[0][0],D,I,H=T[0][1],Y,U,yt=T[1][0],tt,Z,pt=T[1][1],G,Q,q=0,V=0,he,Zt=w&&x&&i&&g.shiftKey,Gt,Qt,ot=Array.from(g.touches||[g],S=>{const J=S.identifier;return S=xr(S,m),S.point0=S.slice(),S.identifier=J,S});On(m);var Ot=u(m,arguments,!0).beforestart();if(_==="overlay"){C&&(he=!0);const S=[ot[0],ot[1]||ot[0]];M.selection=C=[[D=t===vn?L:st(S[0][0],S[1][0]),Y=t===Ve?H:st(S[0][1],S[1][1])],[tt=t===vn?yt:at(S[0][0],S[1][0]),G=t===Ve?pt:at(S[0][1],S[1][1])]],ot.length>1&&K(g)}else D=C[0][0],Y=C[0][1],tt=C[1][0],G=C[1][1];I=D,U=Y,Z=tt,Q=G;var $=gt(m).attr("pointer-events","none"),E=$.selectAll(".overlay").attr("cursor",Et[_]);if(g.touches)Ot.moved=k,Ot.ended=W;else{var R=gt(g.view).on("mousemove.brush",k,!0).on("mouseup.brush",W,!0);i&&R.on("keydown.brush",lt,!0).on("keyup.brush",ut,!0),Rs(g.view)}l.call(m),Ot.start(g,p.name);function k(S){for(const J of S.changedTouches||[S])for(const ge of ot)ge.identifier===J.identifier&&(ge.cur=xr(J,m));if(Zt&&!Gt&&!Qt&&ot.length===1){const J=ot[0];Yr(J.cur[0]-J[0])>Yr(J.cur[1]-J[1])?Qt=!0:Gt=!0}for(const J of ot)J.cur&&(J[0]=J.cur[0],J[1]=J.cur[1]);he=!0,mn(S),K(S)}function K(S){const J=ot[0],ge=J.point0;var Ht;switch(q=J[0]-ge[0],V=J[1]-ge[1],p){case yn:case Fr:{w&&(q=at(L-D,st(yt-tt,q)),I=D+q,Z=tt+q),x&&(V=at(H-Y,st(pt-G,V)),U=Y+V,Q=G+V);break}case Jt:{ot[1]?(w&&(I=at(L,st(yt,ot[0][0])),Z=at(L,st(yt,ot[1][0])),w=1),x&&(U=at(H,st(pt,ot[0][1])),Q=at(H,st(pt,ot[1][1])),x=1)):(w<0?(q=at(L-D,st(yt-D,q)),I=D+q,Z=tt):w>0&&(q=at(L-tt,st(yt-tt,q)),I=D,Z=tt+q),x<0?(V=at(H-Y,st(pt-Y,V)),U=Y+V,Q=G):x>0&&(V=at(H-G,st(pt-G,V)),U=Y,Q=G+V));break}case te:{w&&(I=at(L,st(yt,D-q*w)),Z=at(L,st(yt,tt+q*w))),x&&(U=at(H,st(pt,Y-V*x)),Q=at(H,st(pt,G+V*x)));break}}Z<I&&(w*=-1,Ht=D,D=tt,tt=Ht,Ht=I,I=Z,Z=Ht,_ in Hr&&E.attr("cursor",Et[_=Hr[_]])),Q<U&&(x*=-1,Ht=Y,Y=G,G=Ht,Ht=U,U=Q,Q=Ht,_ in Or&&E.attr("cursor",Et[_=Or[_]])),M.selection&&(C=M.selection),Gt&&(I=C[0][0],Z=C[1][0]),Qt&&(U=C[0][1],Q=C[1][1]),(C[0][0]!==I||C[0][1]!==U||C[1][0]!==Z||C[1][1]!==Q)&&(M.selection=[[I,U],[Z,Q]],l.call(m),Ot.brush(S,p.name))}function W(S){if(Eu(S),S.touches){if(S.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Ps(S.view,he),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),E.attr("cursor",Et.overlay),M.selection&&(C=M.selection),Hu(C)&&(M.selection=null,l.call(m)),Ot.end(S,p.name)}function lt(S){switch(S.keyCode){case 16:{Zt=w&&x;break}case 18:{p===Jt&&(w&&(tt=Z-q*w,D=I+q*w),x&&(G=Q-V*x,Y=U+V*x),p=te,K(S));break}case 32:{(p===Jt||p===te)&&(w<0?tt=Z-q:w>0&&(D=I-q),x<0?G=Q-V:x>0&&(Y=U-V),p=yn,E.attr("cursor",Et.selection),K(S));break}default:return}mn(S)}function ut(S){switch(S.keyCode){case 16:{Zt&&(Gt=Qt=Zt=!1,K(S));break}case 18:{p===te&&(w<0?tt=Z:w>0&&(D=I),x<0?G=Q:x>0&&(Y=U),p=Jt,K(S));break}case 32:{p===yn&&(S.altKey?(w&&(tt=Z-q*w,D=I+q*w),x&&(G=Q-V*x,Y=U+V*x),p=te):(w<0?tt=Z:w>0&&(D=I),x<0?G=Q:x>0&&(Y=U),p=Jt),E.attr("cursor",Et[_]),K(S));break}default:return}mn(S)}}function d(g){u(this,arguments).moved(g)}function y(g){u(this,arguments).ended(g)}function v(){var g=this.__brush||{selection:null};return g.extent=Pr(e.apply(this,arguments)),g.dim=t,g}return c.extent=function(g){return arguments.length?(e=typeof g=="function"?g:pn(Pr(g)),c):e},c.filter=function(g){return arguments.length?(n=typeof g=="function"?g:pn(!!g),c):n},c.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:pn(!!g),c):r},c.handleSize=function(g){return arguments.length?(a=+g,c):a},c.keyModifiers=function(g){return arguments.length?(i=!!g,c):i},c.on=function(){var g=o.on.apply(o,arguments);return g===o?c:g},c}var zr={},wn={},xn=34,pe=10,bn=13;function Zi(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Lu(t,e){var n=Zi(t);return function(r,i){return e(n(r),i,t)}}function Lr(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function ht(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Wu(t){return t<0?"-"+ht(-t,6):t>9999?"+"+ht(t,6):ht(t,4)}function Vu(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Wu(t.getUTCFullYear())+"-"+ht(t.getUTCMonth()+1,2)+"-"+ht(t.getUTCDate(),2)+(i?"T"+ht(e,2)+":"+ht(n,2)+":"+ht(r,2)+"."+ht(i,3)+"Z":r?"T"+ht(e,2)+":"+ht(n,2)+":"+ht(r,2)+"Z":n||e?"T"+ht(e,2)+":"+ht(n,2)+"Z":"")}function Xu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var d,y,v=i(f,function(g,m){if(d)return d(g,m-1);y=g,d=h?Lu(g,h):Zi(g)});return v.columns=y||[],v}function i(f,h){var d=[],y=f.length,v=0,g=0,m,_=y<=0,p=!1;f.charCodeAt(y-1)===pe&&--y,f.charCodeAt(y-1)===bn&&--y;function w(){if(_)return wn;if(p)return p=!1,zr;var M,T=v,C;if(f.charCodeAt(T)===xn){for(;v++<y&&f.charCodeAt(v)!==xn||f.charCodeAt(++v)===xn;);return(M=v)>=y?_=!0:(C=f.charCodeAt(v++))===pe?p=!0:C===bn&&(p=!0,f.charCodeAt(v)===pe&&++v),f.slice(T+1,M-1).replace(/""/g,'"')}for(;v<y;){if((C=f.charCodeAt(M=v++))===pe)p=!0;else if(C===bn)p=!0,f.charCodeAt(v)===pe&&++v;else if(C!==n)continue;return f.slice(T,M)}return _=!0,f.slice(T,y)}for(;(m=w())!==wn;){for(var x=[];m!==zr&&m!==wn;)x.push(m),m=w();h&&(x=h(x,g++))==null||d.push(x)}return d}function o(f,h){return f.map(function(d){return h.map(function(y){return u(d[y])}).join(t)})}function a(f,h){return h==null&&(h=Lr(f)),[h.map(u).join(t)].concat(o(f,h)).join(`
`)}function s(f,h){return h==null&&(h=Lr(f)),o(f,h).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Vu(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:l,formatValue:u}}var qu=Xu(","),Bu=qu.parse;function ju(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Zu(t,e){return fetch(t,e).then(ju)}function Gu(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zu(e,n).then(function(i){return t(i,r)})}}var Qu=Gu(Bu);function Ku(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Gi(this.cover(e,n),e,n,t)}function Gi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,c=t._y0,l=t._x1,u=t._y1,f,h,d,y,v,g,m,_;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(f=(s+l)/2))?s=f:l=f,(g=n>=(h=(c+u)/2))?c=h:u=h,i=o,!(o=o[m=g<<1|v]))return i[m]=a,t;if(d=+t._x.call(null,o.data),y=+t._y.call(null,o.data),e===d&&n===y)return a.next=o,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+l)/2))?s=f:l=f,(g=n>=(h=(c+u)/2))?c=h:u=h;while((m=g<<1|v)===(_=(y>=h)<<1|d>=f));return i[_]=o,i[m]=a,t}function Ju(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)Gi(this,a[n],s[n],t[n]);return this}function tc(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,c,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=s,s=c,a*=2,l){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ec(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function nc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ct(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function rc(t,e,n){var r,i=this._x0,o=this._y0,a,s,c,l,u=this._x1,f=this._y1,h=[],d=this._root,y,v;for(d&&h.push(new ct(d,i,o,u,f)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,f=e+n,n*=n);y=h.pop();)if(!(!(d=y.node)||(a=y.x0)>u||(s=y.y0)>f||(c=y.x1)<i||(l=y.y1)<o))if(d.length){var g=(a+c)/2,m=(s+l)/2;h.push(new ct(d[3],g,m,c,l),new ct(d[2],a,m,g,l),new ct(d[1],g,s,c,m),new ct(d[0],a,s,g,m)),(v=(e>=m)<<1|t>=g)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=y)}else{var _=t-+this._x.call(null,d.data),p=e-+this._y.call(null,d.data),w=_*_+p*p;if(w<n){var x=Math.sqrt(n=w);i=t-x,o=e-x,u=t+x,f=e+x,r=d.data}}return r}function ic(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,l=this._y1,u,f,h,d,y,v,g,m;if(!n)return this;if(n.length)for(;;){if((y=u>=(h=(a+c)/2))?a=h:c=h,(v=f>=(d=(s+l)/2))?s=d:l=d,e=n,!(n=n[g=v<<1|y]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,m=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[g]=o:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=o,this)}function oc(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function ac(){return this._root}function sc(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function lc(t){var e=[],n,r=this._root,i,o,a,s,c;for(r&&e.push(new ct(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var l=(o+s)/2,u=(a+c)/2;(i=r[3])&&e.push(new ct(i,l,u,s,c)),(i=r[2])&&e.push(new ct(i,o,u,l,c)),(i=r[1])&&e.push(new ct(i,l,a,s,u)),(i=r[0])&&e.push(new ct(i,o,a,l,u))}return this}function uc(t){var e=[],n=[],r;for(this._root&&e.push(new ct(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,l=r.y1,u=(a+c)/2,f=(s+l)/2;(o=i[0])&&e.push(new ct(o,a,s,u,f)),(o=i[1])&&e.push(new ct(o,u,s,c,f)),(o=i[2])&&e.push(new ct(o,a,f,u,l)),(o=i[3])&&e.push(new ct(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cc(t){return t[0]}function fc(t){return arguments.length?(this._x=t,this):this._x}function hc(t){return t[1]}function gc(t){return arguments.length?(this._y=t,this):this._y}function Qi(t,e,n){var r=new Kn(e??cc,n??hc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Kn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Wr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ft=Qi.prototype=Kn.prototype;ft.copy=function(){var t=new Kn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Wr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Wr(r));return t};ft.add=Ku;ft.addAll=Ju;ft.cover=tc;ft.data=ec;ft.extent=nc;ft.find=rc;ft.remove=ic;ft.removeAll=oc;ft.root=ac;ft.size=sc;ft.visit=lc;ft.visitAfter=uc;ft.x=fc;ft.y=gc;function $t(t){return function(){return t}}function Vr(t){return(t()-.5)*1e-6}function dc(t){return t.x+t.vx}function pc(t){return t.y+t.vy}function Ki(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=$t(t==null?1:+t));function a(){for(var l,u=e.length,f,h,d,y,v,g,m=0;m<o;++m)for(f=Qi(e,dc,pc).visitAfter(s),l=0;l<u;++l)h=e[l],v=n[h.index],g=v*v,d=h.x+h.vx,y=h.y+h.vy,f.visit(_);function _(p,w,x,M,T){var C=p.data,L=p.r,D=v+L;if(C){if(C.index>h.index){var I=d-C.x-C.vx,H=y-C.y-C.vy,Y=I*I+H*H;Y<D*D&&(I===0&&(I=Vr(r),Y+=I*I),H===0&&(H=Vr(r),Y+=H*H),Y=(D-(Y=Math.sqrt(Y)))/Y*i,h.vx+=(I*=Y)*(D=(L*=L)/(g+L)),h.vy+=(H*=Y)*D,C.vx-=I*(D=1-D),C.vy-=H*D)}return}return w>d+D||M<d-D||x>y+D||T<y-D}}function s(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(e){var l,u=e.length,f;for(n=new Array(u),l=0;l<u;++l)f=e[l],n[f.index]=+t(f,l,e)}}return a.initialize=function(l,u){e=l,r=u,c()},a.iterations=function(l){return arguments.length?(o=+l,a):o},a.strength=function(l){return arguments.length?(i=+l,a):i},a.radius=function(l){return arguments.length?(t=typeof l=="function"?l:$t(+l),c(),a):t},a}const mc=1664525,yc=1013904223,Xr=4294967296;function vc(){let t=1;return()=>(t=(mc*t+yc)%Xr)/Xr}var _c=10,wc=Math.PI*(3-Math.sqrt(5));function Ji(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=Zn(f),l=on("tick","end"),u=vc();t==null&&(t=[]);function f(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(v){var g,m=t.length,_;v===void 0&&(v=1);for(var p=0;p<v;++p)for(n+=(o-n)*i,s.forEach(function(w){w(n)}),g=0;g<m;++g)_=t[g],_.fx==null?_.x+=_.vx*=a:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=a:(_.y=_.fy,_.vy=0);return e}function d(){for(var v=0,g=t.length,m;v<g;++v){if(m=t[v],m.index=v,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var _=_c*Math.sqrt(.5+v),p=v*wc;m.x=_*Math.cos(p),m.y=_*Math.sin(p)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function y(v){return v.initialize&&v.initialize(t,u),v}return d(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(t=v,d(),s.forEach(y),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(u=v,s.forEach(y),e):u},force:function(v,g){return arguments.length>1?(g==null?s.delete(v):s.set(v,y(g)),e):s.get(v)},find:function(v,g,m){var _=0,p=t.length,w,x,M,T,C;for(m==null?m=1/0:m*=m,_=0;_<p;++_)T=t[_],w=v-T.x,x=g-T.y,M=w*w+x*x,M<m&&(C=T,m=M);return C},on:function(v,g){return arguments.length>1?(l.on(v,g),e):l.on(v)}}}function to(t){var e=$t(.1),n,r,i;typeof t!="function"&&(t=$t(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:$t(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:$t(+s),a(),o):t},o}function eo(t){var e=$t(.1),n,r,i;typeof t!="function"&&(t=$t(t==null?0:+t));function o(s){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:$t(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:$t(+s),a(),o):t},o}function xc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bc(t){return function(){return t}}function Tc(t){return+t}var qr=[0,1];function re(t){return t}function Ln(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bc(isNaN(e)?NaN:.5)}function Mc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kc(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ln(i,r),o=n(a,o)):(r=Ln(r,i),o=n(o,a)),function(s){return o(r(s))}}function Cc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ln(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var c=Fo(t,s,1,r)-1;return o[c](i[c](s))}}function Nc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ac(){var t=qr,e=qr,n=sn,r,i,o,a=re,s,c,l;function u(){var h=Math.min(t.length,e.length);return a!==re&&(a=Mc(t[0],t[h-1])),s=h>2?Cc:kc,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((l||(l=s(e,t.map(r),bt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Tc),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=sl,u()},f.clamp=function(h){return arguments.length?(a=h?!0:re,u()):a!==re},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,u()}}function $c(){return Ac()(re,re)}function Dc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Tn=new Date,Mn=new Date;function rt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let l;do c.push(l=new Date(+o)),e(o,s),t(o);while(l<o&&o<a);return c},i.filter=o=>rt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Tn.setTime(+o),Mn.setTime(+a),t(Tn),t(Mn),Math.floor(n(Tn,Mn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const tn=rt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tn.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?rt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):tn);tn.range;const It=1e3,_t=It*60,Ft=_t*60,Rt=Ft*24,Jn=Rt*7,Br=Rt*30,kn=Rt*365,ie=rt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*It)},(t,e)=>(e-t)/It,t=>t.getUTCSeconds());ie.range;const tr=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*It)},(t,e)=>{t.setTime(+t+e*_t)},(t,e)=>(e-t)/_t,t=>t.getMinutes());tr.range;const Sc=rt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_t)},(t,e)=>(e-t)/_t,t=>t.getUTCMinutes());Sc.range;const er=rt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*It-t.getMinutes()*_t)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getHours());er.range;const Uc=rt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getUTCHours());Uc.range;const Ee=rt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_t)/Rt,t=>t.getDate()-1);Ee.range;const nr=rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rt,t=>t.getUTCDate()-1);nr.range;const Ec=rt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Rt,t=>Math.floor(t/Rt));Ec.range;function Bt(t){return rt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*_t)/Jn)}const cn=Bt(0),en=Bt(1),Ic=Bt(2),Fc=Bt(3),ce=Bt(4),Yc=Bt(5),Rc=Bt(6);cn.range;en.range;Ic.range;Fc.range;ce.range;Yc.range;Rc.range;function jt(t){return rt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Jn)}const no=jt(0),nn=jt(1),Pc=jt(2),Hc=jt(3),fe=jt(4),Oc=jt(5),zc=jt(6);no.range;nn.range;Pc.range;Hc.range;fe.range;Oc.range;zc.range;const rr=rt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rr.range;const Lc=rt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Lc.range;const Pt=rt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Pt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Pt.range;const qt=rt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());qt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:rt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});qt.range;function Wc(t,e,n,r,i,o){const a=[[ie,1,It],[ie,5,5*It],[ie,15,15*It],[ie,30,30*It],[o,1,_t],[o,5,5*_t],[o,15,15*_t],[o,30,30*_t],[i,1,Ft],[i,3,3*Ft],[i,6,6*Ft],[i,12,12*Ft],[r,1,Rt],[r,2,2*Rt],[n,1,Jn],[e,1,Br],[e,3,3*Br],[t,1,kn]];function s(l,u,f){const h=u<l;h&&([l,u]=[u,l]);const d=f&&typeof f.range=="function"?f:c(l,u,f),y=d?d.range(l,+u+1):[];return h?y.reverse():y}function c(l,u,f){const h=Math.abs(u-l)/f,d=Wn(([,,g])=>g).right(a,h);if(d===a.length)return t.every(yr(l/kn,u/kn,f));if(d===0)return tn.every(Math.max(yr(l,u,f),1));const[y,v]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return y.every(v)}return[s,c]}const[Vc,Xc]=Wc(Pt,rr,cn,Ee,er,tr);function Cn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function me(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function qc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,l=ye(i),u=ve(i),f=ye(o),h=ve(o),d=ye(a),y=ve(a),v=ye(s),g=ve(s),m=ye(c),_=ve(c),p={a:Z,A:pt,b:G,B:Q,c:null,d:Jr,e:Jr,f:mf,g:Cf,G:Af,H:gf,I:df,j:pf,L:ro,m:yf,M:vf,p:q,q:V,Q:ni,s:ri,S:_f,u:wf,U:xf,V:bf,w:Tf,W:Mf,x:null,X:null,y:kf,Y:Nf,Z:$f,"%":ei},w={a:he,A:Zt,b:Gt,B:Qt,c:null,d:ti,e:ti,f:Ef,g:Wf,G:Xf,H:Df,I:Sf,j:Uf,L:oo,m:If,M:Ff,p:ot,q:Ot,Q:ni,s:ri,S:Yf,u:Rf,U:Pf,V:Hf,w:Of,W:zf,x:null,X:null,y:Lf,Y:Vf,Z:qf,"%":ei},x={a:D,A:I,b:H,B:Y,c:U,d:Qr,e:Qr,f:uf,g:Gr,G:Zr,H:Kr,I:Kr,j:of,L:lf,m:rf,M:af,p:L,q:nf,Q:ff,s:hf,S:sf,u:Qc,U:Kc,V:Jc,w:Gc,W:tf,x:yt,X:tt,y:Gr,Y:Zr,Z:ef,"%":cf};p.x=M(n,p),p.X=M(r,p),p.c=M(e,p),w.x=M(n,w),w.X=M(r,w),w.c=M(e,w);function M($,E){return function(R){var k=[],K=-1,W=0,lt=$.length,ut,S,J;for(R instanceof Date||(R=new Date(+R));++K<lt;)$.charCodeAt(K)===37&&(k.push($.slice(W,K)),(S=jr[ut=$.charAt(++K)])!=null?ut=$.charAt(++K):S=ut==="e"?" ":"0",(J=E[ut])&&(ut=J(R,S)),k.push(ut),W=K+1);return k.push($.slice(W,K)),k.join("")}}function T($,E){return function(R){var k=me(1900,void 0,1),K=C(k,$,R+="",0),W,lt;if(K!=R.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(E&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(W=Nn(me(k.y,0,1)),lt=W.getUTCDay(),W=lt>4||lt===0?nn.ceil(W):nn(W),W=nr.offset(W,(k.V-1)*7),k.y=W.getUTCFullYear(),k.m=W.getUTCMonth(),k.d=W.getUTCDate()+(k.w+6)%7):(W=Cn(me(k.y,0,1)),lt=W.getDay(),W=lt>4||lt===0?en.ceil(W):en(W),W=Ee.offset(W,(k.V-1)*7),k.y=W.getFullYear(),k.m=W.getMonth(),k.d=W.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),lt="Z"in k?Nn(me(k.y,0,1)).getUTCDay():Cn(me(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(lt+5)%7:k.w+k.U*7-(lt+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,Nn(k)):Cn(k)}}function C($,E,R,k){for(var K=0,W=E.length,lt=R.length,ut,S;K<W;){if(k>=lt)return-1;if(ut=E.charCodeAt(K++),ut===37){if(ut=E.charAt(K++),S=x[ut in jr?E.charAt(K++):ut],!S||(k=S($,R,k))<0)return-1}else if(ut!=R.charCodeAt(k++))return-1}return k}function L($,E,R){var k=l.exec(E.slice(R));return k?($.p=u.get(k[0].toLowerCase()),R+k[0].length):-1}function D($,E,R){var k=d.exec(E.slice(R));return k?($.w=y.get(k[0].toLowerCase()),R+k[0].length):-1}function I($,E,R){var k=f.exec(E.slice(R));return k?($.w=h.get(k[0].toLowerCase()),R+k[0].length):-1}function H($,E,R){var k=m.exec(E.slice(R));return k?($.m=_.get(k[0].toLowerCase()),R+k[0].length):-1}function Y($,E,R){var k=v.exec(E.slice(R));return k?($.m=g.get(k[0].toLowerCase()),R+k[0].length):-1}function U($,E,R){return C($,e,E,R)}function yt($,E,R){return C($,n,E,R)}function tt($,E,R){return C($,r,E,R)}function Z($){return a[$.getDay()]}function pt($){return o[$.getDay()]}function G($){return c[$.getMonth()]}function Q($){return s[$.getMonth()]}function q($){return i[+($.getHours()>=12)]}function V($){return 1+~~($.getMonth()/3)}function he($){return a[$.getUTCDay()]}function Zt($){return o[$.getUTCDay()]}function Gt($){return c[$.getUTCMonth()]}function Qt($){return s[$.getUTCMonth()]}function ot($){return i[+($.getUTCHours()>=12)]}function Ot($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var E=M($+="",p);return E.toString=function(){return $},E},parse:function($){var E=T($+="",!1);return E.toString=function(){return $},E},utcFormat:function($){var E=M($+="",w);return E.toString=function(){return $},E},utcParse:function($){var E=T($+="",!0);return E.toString=function(){return $},E}}}var jr={"-":"",_:" ",0:"0"},it=/^\s*\d+/,Bc=/^%/,jc=/[\\^$*+?|[\]().{}]/g;function O(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Zc(t){return t.replace(jc,"\\$&")}function ye(t){return new RegExp("^(?:"+t.map(Zc).join("|")+")","i")}function ve(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Gc(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Qc(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Jc(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function tf(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Zr(t,e,n){var r=it.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Gr(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ef(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function nf(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function rf(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qr(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function of(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Kr(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function af(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sf(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function lf(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function uf(t,e,n){var r=it.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cf(t,e,n){var r=Bc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ff(t,e,n){var r=it.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hf(t,e,n){var r=it.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Jr(t,e){return O(t.getDate(),e,2)}function gf(t,e){return O(t.getHours(),e,2)}function df(t,e){return O(t.getHours()%12||12,e,2)}function pf(t,e){return O(1+Ee.count(Pt(t),t),e,3)}function ro(t,e){return O(t.getMilliseconds(),e,3)}function mf(t,e){return ro(t,e)+"000"}function yf(t,e){return O(t.getMonth()+1,e,2)}function vf(t,e){return O(t.getMinutes(),e,2)}function _f(t,e){return O(t.getSeconds(),e,2)}function wf(t){var e=t.getDay();return e===0?7:e}function xf(t,e){return O(cn.count(Pt(t)-1,t),e,2)}function io(t){var e=t.getDay();return e>=4||e===0?ce(t):ce.ceil(t)}function bf(t,e){return t=io(t),O(ce.count(Pt(t),t)+(Pt(t).getDay()===4),e,2)}function Tf(t){return t.getDay()}function Mf(t,e){return O(en.count(Pt(t)-1,t),e,2)}function kf(t,e){return O(t.getFullYear()%100,e,2)}function Cf(t,e){return t=io(t),O(t.getFullYear()%100,e,2)}function Nf(t,e){return O(t.getFullYear()%1e4,e,4)}function Af(t,e){var n=t.getDay();return t=n>=4||n===0?ce(t):ce.ceil(t),O(t.getFullYear()%1e4,e,4)}function $f(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+O(e/60|0,"0",2)+O(e%60,"0",2)}function ti(t,e){return O(t.getUTCDate(),e,2)}function Df(t,e){return O(t.getUTCHours(),e,2)}function Sf(t,e){return O(t.getUTCHours()%12||12,e,2)}function Uf(t,e){return O(1+nr.count(qt(t),t),e,3)}function oo(t,e){return O(t.getUTCMilliseconds(),e,3)}function Ef(t,e){return oo(t,e)+"000"}function If(t,e){return O(t.getUTCMonth()+1,e,2)}function Ff(t,e){return O(t.getUTCMinutes(),e,2)}function Yf(t,e){return O(t.getUTCSeconds(),e,2)}function Rf(t){var e=t.getUTCDay();return e===0?7:e}function Pf(t,e){return O(no.count(qt(t)-1,t),e,2)}function ao(t){var e=t.getUTCDay();return e>=4||e===0?fe(t):fe.ceil(t)}function Hf(t,e){return t=ao(t),O(fe.count(qt(t),t)+(qt(t).getUTCDay()===4),e,2)}function Of(t){return t.getUTCDay()}function zf(t,e){return O(nn.count(qt(t)-1,t),e,2)}function Lf(t,e){return O(t.getUTCFullYear()%100,e,2)}function Wf(t,e){return t=ao(t),O(t.getUTCFullYear()%100,e,2)}function Vf(t,e){return O(t.getUTCFullYear()%1e4,e,4)}function Xf(t,e){var n=t.getUTCDay();return t=n>=4||n===0?fe(t):fe.ceil(t),O(t.getUTCFullYear()%1e4,e,4)}function qf(){return"+0000"}function ei(){return"%"}function ni(t){return+t}function ri(t){return Math.floor(+t/1e3)}var ee,ir;Bf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bf(t){return ee=qc(t),ir=ee.format,ee.parse,ee.utcFormat,ee.utcParse,ee}function jf(t){return new Date(t)}function Zf(t){return t instanceof Date?+t:+new Date(+t)}function so(t,e,n,r,i,o,a,s,c,l){var u=$c(),f=u.invert,h=u.domain,d=l(".%L"),y=l(":%S"),v=l("%I:%M"),g=l("%I %p"),m=l("%a %d"),_=l("%b %d"),p=l("%B"),w=l("%Y");function x(M){return(c(M)<M?d:s(M)<M?y:a(M)<M?v:o(M)<M?g:r(M)<M?i(M)<M?m:_:n(M)<M?p:w)(M)}return u.invert=function(M){return new Date(f(M))},u.domain=function(M){return arguments.length?h(Array.from(M,Zf)):h().map(jf)},u.ticks=function(M){var T=h();return t(T[0],T[T.length-1],M??10)},u.tickFormat=function(M,T){return T==null?x:l(T)},u.nice=function(M){var T=h();return(!M||typeof M.range!="function")&&(M=e(T[0],T[T.length-1],M??10)),M?h(Dc(T,M)):u},u.copy=function(){return Nc(u,so(t,e,n,r,i,o,a,s,c,l))},u}function Gf(){return xc.apply(so(Vc,Xc,Pt,rr,cn,Ee,er,tr,ie,ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xe(t,e,n){this.k=t,this.x=e,this.y=n}xe.prototype={constructor:xe,scale:function(t){return t===1?this:new xe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xe.prototype;function Qf(t){let e,n,r;return{c(){e=A("div"),n=vi("svg"),N(n,"class","svelte-188n190"),N(e,"class","beeswarm svelte-188n190"),Me(()=>t[7].call(e))},m(i,o){z(i,e,o),b(e,n),t[6](n),r=wi(e,t[7].bind(e))},p:j,i:j,o:j,d(i){i&&P(e),t[6](null),r()}}}function Kf(t,e,n){let r,{data:i}=e,{selectedIndicator:o}=e;const a=bi();let s,c,l,u=null;function f(){if(!s||!c||!l||!(r!=null&&r.length))return;const y={top:20,right:20,bottom:30,left:40},v=c-y.left-y.right,g=l-y.top-y.bottom;gt(s).selectAll("*").remove();const m=gt(s).append("g").attr("transform",`translate(${y.left},${y.top})`),_=+Xo(r,U=>U.year),p=+Vo(r,U=>U.year),w=Gf().domain([new Date(1983,0),new Date(2025,0)]).range([0,v]),x=r.map(U=>({id:Math.random(),fx:w(new Date(U.year,0)),y:g/2,year:U.year,country:U.country,region:U.region,indicator:U.indicator,value:U.value,color:U.color})),M=Ji(x).force("y",eo(g/2).strength(.1)).force("collide",Ki().radius(6).strength(1)).force("x",to(U=>U.fx).strength(1)).stop();for(let U=0;U<300;++U)M.tick();const T=m.append("g").attr("class","points");T.selectAll("circle").data(x).join("circle").attr("cx",U=>U.fx).attr("cy",g).attr("r",0).attr("fill",U=>U.color).attr("stroke","none").transition().duration(1500).ease(Au).attr("cy",U=>U.y).attr("r",5);const L=qo(1984,p+1,5).map(U=>new Date(U,0));m.append("g").attr("transform",`translate(0,${g})`).call(ta(w).tickValues(L).tickFormat(ir("%Y")));const D=w(new Date(1985,0))-w(new Date(1984,0));function I(U){var Q;if(!U.selection)return;const[yt,tt]=U.selection,Z=r.filter(q=>{const V=w(new Date(q.year,0));return V>=yt&&V<=tt}),pt=((Q=Z[0])==null?void 0:Q.year)||null,G=Z||[];console.log("Dispatching yearSelect:",{year:pt,events:G}),T.selectAll("circle").data(x).attr("stroke",q=>Z.find(V=>V.year===q.year)?"#000":"none").attr("stroke-width",q=>Z.find(V=>V.year===q.year)?2:0),a("yearSelect",{year:pt,events:G})}const H=w(new Date(_,0)),Y=m.append("g").attr("class","brush");u=Ou().extent([[0,0],[v,g]]).on("brush",I),Y.call(u),H&&u.move(Y,[H-D/2,H+D/2])}rn(()=>{(r==null?void 0:r.length)>0&&f()});function h(y){Xe[y?"unshift":"push"](()=>{s=y,n(0,s)})}function d(){c=this.clientWidth,l=this.clientHeight,n(1,c),n(2,l)}return t.$$set=y=>{"data"in y&&n(3,i=y.data),"selectedIndicator"in y&&n(4,o=y.selectedIndicator)},t.$$.update=()=>{t.$$.dirty&24&&n(5,r=i.filter(y=>(console.log("Checking indicator match:",{dataIndicator:y.indicator,selectedIndicator:o,matches:y.indicator===o}),y.indicator===o)).map(y=>({...y,year:+y.year<1984?1984:+y.year})).filter(y=>!isNaN(y.year))),t.$$.dirty&32&&(r==null?void 0:r.length)>0&&f()},[s,c,l,i,o,r,h,d]}class Jf extends Nt{constructor(e){super(),Ct(this,e,Kf,Qf,kt,{data:3,selectedIndicator:4})}}function ii(t,e,n){const r=t.slice();return r[3]=e[n][0],r[4]=e[n][1],r}function oi(t,e,n){const r=t.slice();return r[7]=e[n],r}function th(t){let e;return{c(){e=A("div"),e.innerHTML="<p>Hover over the points above to see details</p>",N(e,"class","placeholder")},m(n,r){z(n,e,r)},p:j,d(n){n&&P(e)}}}function eh(t){let e,n,r,i,o,a,s=vt([...t[2]]),c=[];for(let l=0;l<s.length;l+=1)c[l]=si(ii(t,s,l));return{c(){e=A("div"),n=A("h3"),r=X(t[1]),i=X(" Milestones"),o=F(),a=A("div");for(let l=0;l<c.length;l+=1)c[l].c();N(n,"class","svelte-1mxnad2"),N(a,"class","events-grid"),N(e,"class","timeline-details")},m(l,u){z(l,e,u),b(e,n),b(n,r),b(n,i),b(e,o),b(e,a);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(a,null)},p(l,u){if(u&2&&nt(r,l[1]),u&4){s=vt([...l[2]]);let f;for(f=0;f<s.length;f+=1){const h=ii(l,s,f);c[f]?c[f].p(h,u):(c[f]=si(h),c[f].c(),c[f].m(a,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=s.length}},d(l){l&&P(e),se(c,l)}}}function ai(t){let e,n,r=t[7].country+"",i,o,a,s=t[7].indicator+"",c,l,u,f=t[7].value==="Yes"?"Full Implementation":"Partial Implementation",h,d;return{c(){e=A("li"),n=A("span"),i=X(r),o=F(),a=A("span"),c=X(s),l=F(),u=A("span"),h=X(f),d=F(),N(n,"class","country svelte-1mxnad2"),N(a,"class","indicator svelte-1mxnad2"),N(u,"class","status svelte-1mxnad2"),lr(u,"partial",t[7].value==="Partially"),N(e,"class","svelte-1mxnad2")},m(y,v){z(y,e,v),b(e,n),b(n,i),b(e,o),b(e,a),b(a,c),b(e,l),b(e,u),b(u,h),b(e,d)},p(y,v){v&4&&r!==(r=y[7].country+"")&&nt(i,r),v&4&&s!==(s=y[7].indicator+"")&&nt(c,s),v&4&&f!==(f=y[7].value==="Yes"?"Full Implementation":"Partial Implementation")&&nt(h,f),v&4&&lr(u,"partial",y[7].value==="Partially")},d(y){y&&P(e)}}}function si(t){let e,n,r=t[3]+"",i,o,a,s,c=vt(t[4]),l=[];for(let u=0;u<c.length;u+=1)l[u]=ai(oi(t,c,u));return{c(){e=A("div"),n=A("h4"),i=X(r),o=F(),a=A("ul");for(let u=0;u<l.length;u+=1)l[u].c();s=F(),N(n,"class","svelte-1mxnad2"),N(a,"class","country-grid svelte-1mxnad2"),N(e,"class","region-group")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(e,o),b(e,a);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(a,null);b(e,s)},p(u,f){if(f&4&&r!==(r=u[3]+"")&&nt(i,r),f&4){c=vt(u[4]);let h;for(h=0;h<c.length;h+=1){const d=oi(u,c,h);l[h]?l[h].p(d,f):(l[h]=ai(d),l[h].c(),l[h].m(a,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=c.length}},d(u){u&&P(e),se(l,u)}}}function nh(t){let e;function n(o,a){return o[1]&&o[0].length>0?eh:th}let r=n(t),i=r(t);return{c(){i.c(),e=_i()},m(o,a){i.m(o,a),z(o,e,a)},p(o,[a]){r===(r=n(o))&&i?i.p(o,a):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},i:j,o:j,d(o){o&&P(e),i.d(o)}}}function rh(t,e,n){let r,{events:i=[]}=e,{year:o=null}=e;return t.$$set=a=>{"events"in a&&n(0,i=a.events),"year"in a&&n(1,o=a.year)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=Dn(i,a=>a.region))},[i,o,r]}class ih extends Nt{constructor(e){super(),Ct(this,e,rh,nh,kt,{events:0,year:1})}}function li(t,e,n){const r=t.slice();return r[4]=e[n],r}function ui(t){let e,n=t[4]+"",r,i;return{c(){e=A("option"),r=X(n),e.__value=i=t[4],ar(e,e.__value)},m(o,a){z(o,e,a),b(e,r)},p(o,a){a&1&&n!==(n=o[4]+"")&&nt(r,n),a&1&&i!==(i=o[4])&&(e.__value=i,ar(e,e.__value))},d(o){o&&P(e)}}}function oh(t){let e,n,r,i,o,a,s=vt(t[0]),c=[];for(let l=0;l<s.length;l+=1)c[l]=ui(li(t,s,l));return{c(){e=A("div"),n=A("label"),n.textContent="Select Indicator:",r=F(),i=A("select");for(let l=0;l<c.length;l+=1)c[l].c();N(n,"for","indicator"),N(n,"class","svelte-o395lv"),N(i,"id","indicator"),N(i,"class","svelte-o395lv"),N(e,"class","selector svelte-o395lv")},m(l,u){z(l,e,u),b(e,n),b(e,r),b(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null);sr(i,t[1]),o||(a=An(i,"change",t[2]),o=!0)},p(l,[u]){if(u&1){s=vt(l[0]);let f;for(f=0;f<s.length;f+=1){const h=li(l,s,f);c[f]?c[f].p(h,u):(c[f]=ui(h),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=s.length}u&3&&sr(i,l[1])},i:j,o:j,d(l){l&&P(e),se(c,l),o=!1,a()}}}function ah(t,e,n){const r=bi();let{indicators:i=["Ratification of the UN Convention against Torture","Ratification of Optional Protocol (OPCAT)","Submission of initial report to CAT","Prohibition of torture in the constitution","Criminalisation of torture under domestic law","Designation of the National Preventive Mechanism (in law)","Operationality of the National Preventive Mechanism","Existence of National Human Rights Institution that fully complies with Paris Principles"].map(s=>s.trim())}=e,o=i[0];rn(()=>{r("select",{indicator:o})});function a(s){n(1,o=s.target.value),r("select",{indicator:o})}return t.$$set=s=>{"indicators"in s&&n(0,i=s.indicators)},[i,o,a]}class lo extends Nt{constructor(e){super(),Ct(this,e,ah,oh,kt,{indicators:0})}}function ci(t){let e,n,r,i,o;n=new Jf({props:{data:t[3],selectedIndicator:t[0]}}),n.$on("yearSelect",t[5]);let a=t[1]&&fi(t);return{c(){e=A("div"),Mt(n.$$.fragment),r=F(),a&&a.c(),i=_i(),N(e,"class","beeswarm-container svelte-1j4gyne")},m(s,c){z(s,e,c),wt(n,e,null),z(s,r,c),a&&a.m(s,c),z(s,i,c),o=!0},p(s,c){const l={};c&8&&(l.data=s[3]),c&1&&(l.selectedIndicator=s[0]),n.$set(l),s[1]?a?(a.p(s,c),c&2&&B(a,1)):(a=fi(s),a.c(),B(a,1),a.m(i.parentNode,i)):a&&(ke(),et(a,1,1,()=>{a=null}),Ce())},i(s){o||(B(n.$$.fragment,s),B(a),o=!0)},o(s){et(n.$$.fragment,s),et(a),o=!1},d(s){s&&(P(e),P(r),P(i)),xt(n),a&&a.d(s)}}}function fi(t){let e,n,r;return n=new ih({props:{events:t[2],year:t[1]}}),{c(){e=A("div"),Mt(n.$$.fragment),N(e,"class","details-container svelte-1j4gyne")},m(i,o){z(i,e,o),wt(n,e,null),r=!0},p(i,o){const a={};o&4&&(a.events=i[2]),o&2&&(a.year=i[1]),n.$set(a)},i(i){r||(B(n.$$.fragment,i),r=!0)},o(i){et(n.$$.fragment,i),r=!1},d(i){i&&P(e),xt(n)}}}function sh(t){let e,n,r,i,o,a,s,c,l,u;a=new lo({}),a.$on("select",t[4]);let f=t[0]&&ci(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Progress Timeline",r=F(),i=A("p"),i.innerHTML=`Explore how countries have adopted various torture prevention measures over time. 
      Each dot represents a country and highlights a milestone in implementing anti-torture mechanisms. 
      For most indicators, progress is marked as <span class="text-label full svelte-1j4gyne">Yes (fully implemented)</span>. However, for &#39;Criminalisation of torture under domestic law,&#39; progress can be categorized as <span class="text-label full svelte-1j4gyne">Full</span> or <span class="text-label partial svelte-1j4gyne">Partial</span>.`,o=F(),Mt(a.$$.fragment),s=F(),c=A("p"),c.textContent="Drag the brush below to explore details about countries that implemented the selected indicator.",l=F(),f&&f.c(),N(n,"class","svelte-1j4gyne"),N(i,"class","description svelte-1j4gyne"),N(c,"class","interaction-note svelte-1j4gyne"),N(e,"class","timeline-section svelte-1j4gyne")},m(h,d){z(h,e,d),b(e,n),b(e,r),b(e,i),b(e,o),wt(a,e,null),b(e,s),b(e,c),b(e,l),f&&f.m(e,null),u=!0},p(h,[d]){h[0]?f?(f.p(h,d),d&1&&B(f,1)):(f=ci(h),f.c(),B(f,1),f.m(e,null)):f&&(ke(),et(f,1,1,()=>{f=null}),Ce())},i(h){u||(B(a.$$.fragment,h),B(f),u=!0)},o(h){et(a.$$.fragment,h),et(f),u=!1},d(h){h&&P(e),xt(a),f&&f.d()}}}function lh(t,e,n){let r,{data:i}=e,o="Ratification of the UN Convention against Torture",a=null,s=[];function c(u){n(0,o=u.detail.indicator),n(1,a=null),n(2,s=[])}function l(u){n(1,a=u.detail.year),n(2,s=u.detail.events||[])}return t.$$set=u=>{"data"in u&&n(6,i=u.data)},t.$$.update=()=>{t.$$.dirty&64&&n(3,r=i.map(u=>({year:+u.Date,country:u.Country,region:u.Region,indicator:u.Indicator.trim(),value:u.Input,color:u.Input==="Yes"?"var(--color-primary)":"var(--color-primary-light)"})).filter(u=>u.value==="Yes"||u.value==="Partially"))},[o,a,s,r,c,l,i]}class uh extends Nt{constructor(e){super(),Ct(this,e,lh,sh,kt,{data:6})}}function ch(t){let e,n,r,i,o;return{c(){e=A("div"),n=vi("svg"),i=F(),o=A("div"),N(n,"class","svelte-p6ifv7"),N(e,"class","circles-viz svelte-p6ifv7"),Me(()=>t[5].call(e)),N(o,"id","tooltip"),N(o,"class","tooltip hidden svelte-p6ifv7")},m(a,s){z(a,e,s),b(e,n),t[4](n),r=wi(e,t[5].bind(e)),z(a,i,s),z(a,o,s)},p:j,i:j,o:j,d(a){a&&(P(e),P(i),P(o)),t[4](null),r()}}}function fh(t,e,n){let{processedData:r}=e,i,o,a;function s(){if(!i||!o||!a||!(r!=null&&r.length))return;const u={top:30,right:50,bottom:50,left:50},f=o-u.left-u.right,h=a-u.top-u.bottom;gt(i).selectAll("*").remove();const d=gt(i).append("g").attr("transform",`translate(${u.left},${u.top})`),y=Math.min(20,Math.floor(f/(Math.sqrt(r.length)*3))),v={x:[y,f-y],y:[y,h-y]},g=[...new Set(r.map(T=>T.region))];console.log("Unique Regions:",g);const m={};g.forEach((T,C)=>{m[T]={x:f*(.2+.7*C/Math.max(1,g.length-1)),y:h*.5}}),console.log("Region Centers:",m);const _=Ji(r).force("x",to(f/2).strength(.1)).force("y",eo(h/2).strength(.1)).force("collide",Ki().radius(y+5).strength(.5)).force("cluster",x()).force("bounds",M(v)).on("tick",()=>{p.attr("transform",T=>{const C=(Math.random()-.5)*.5;return`translate(${T.x+C},${T.y+C})`})});for(let T=0;T<300;++T)_.tick();const p=d.selectAll("g").data(r).join("g").attr("transform",T=>`translate(${f/2},${h/2})`);p.transition().duration(1e3).delay((T,C)=>C*50).attr("transform",T=>`translate(${T.x},${T.y})`),setTimeout(()=>{_.stop()},1e3+r.length*50),p.append("circle").attr("r",0).attr("fill","white").attr("stroke",T=>T.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)").attr("stroke-width",3).transition().duration(500).delay((T,C)=>C*50).attr("r",y),p.append("image").attr("x",-y*.7).attr("y",-y*.7).attr("width",y*1.4).attr("height",y*1.4).attr("xlink:href",T=>`/APT-torture/images/${T.iso2}.svg`).attr("preserveAspectRatio","xMidYMid meet").style("opacity",0).transition().duration(500).delay((T,C)=>C*50).style("opacity",1);const w=gt("#tooltip");p.on("mouseover",(T,C)=>{w.style("--tooltip-color",C.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)"),w.html(`
            <div class="tooltip-content">
                <div class="section">
                    <div class="title">${C.country} | ${C.iso2.toUpperCase()}</div>
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <img src="/APT-torture/images/${C.iso2}.svg" alt="${C.country}" class="country-flag" />
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <div class="label">Region</div>
                    <div class="region-value">${C.region}</div>
                    <div class="indicator">${C.indicator}</div>
                    <div class="tooltip-status">${C.value==="Yes"?"Full Implemention":"Partial Implemention"}</div>
                    <div class="date-value">${Math.floor(C.date)}</div>
                </div>
            </div>
        `).style("left",`${T.pageX+10}px`).style("top",`${T.pageY-50}px`).classed("hidden",!1),gt(T.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1.3)`)}).on("mousemove",T=>{w.style("left",`${T.pageX+10}px`).style("top",`${T.pageY-50}px`)}).on("mouseout",(T,C)=>{w.classed("hidden",!0),gt(T.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1)`)});function x(T=.5){return function(L){r.forEach(D=>{const I=m[D.region];if(!I){console.warn(`Region "${D.region}" not found in centers.`);return}D.vx+=(I.x-D.x)*T*L,D.vy+=(I.y-D.y)*T*L})}}function M(T){return function(L){r.forEach(D=>{D.x<T.x[0]&&(D.x=T.x[0]),D.x>T.x[1]&&(D.x=T.x[1]),D.y<T.y[0]&&(D.y=T.y[0]),D.y>T.y[1]&&(D.y=T.y[1])})}}}rn(()=>{r&&s()});function c(u){Xe[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(){o=this.clientWidth,a=this.clientHeight,n(1,o),n(2,a),n(3,r)}return t.$$set=u=>{"processedData"in u&&n(3,r=u.processedData)},t.$$.update=()=>{if(t.$$.dirty&8){const h=Math.ceil(Math.sqrt((r==null?void 0:r.length)||1))*40;n(2,a=Math.max(700,h*1))}t.$$.dirty&8&&r&&s()},[i,o,a,r,c,l]}class hh extends Nt{constructor(e){super(),Ct(this,e,fh,ch,kt,{processedData:3})}}function hi(t,e,n){const r=t.slice();return r[3]=e[n],r}function gi(t){let e,n,r=t[3].region+"",i,o,a,s=t[3].percentage+"",c,l,u,f,h,d,y=t[3].implemented+"",v,g,m,_,p=t[3].partial+"",w,x;return{c(){e=A("div"),n=A("h3"),i=X(r),o=F(),a=A("div"),c=X(s),l=X("%"),u=F(),f=A("div"),h=A("span"),d=X("Full: "),v=X(y),g=F(),m=A("span"),_=X("Partial: "),w=X(p),x=F(),N(n,"class","svelte-1tdfzl5"),N(a,"class","percentage svelte-1tdfzl5"),N(h,"class","implemented svelte-1tdfzl5"),N(m,"class","partial svelte-1tdfzl5"),N(f,"class","details svelte-1tdfzl5"),N(e,"class","region-card svelte-1tdfzl5")},m(M,T){z(M,e,T),b(e,n),b(n,i),b(e,o),b(e,a),b(a,c),b(a,l),b(e,u),b(e,f),b(f,h),b(h,d),b(h,v),b(f,g),b(f,m),b(m,_),b(m,w),b(e,x)},p(M,T){T&1&&r!==(r=M[3].region+"")&&nt(i,r),T&1&&s!==(s=M[3].percentage+"")&&nt(c,s),T&1&&y!==(y=M[3].implemented+"")&&nt(v,y),T&1&&p!==(p=M[3].partial+"")&&nt(w,p)},d(M){M&&P(e)}}}function gh(t){let e,n,r,i,o=vt(t[0]),a=[];for(let s=0;s<o.length;s+=1)a[s]=gi(hi(t,o,s));return{c(){e=A("div"),n=A("h2"),n.textContent="Regional Progress",r=F(),i=A("div");for(let s=0;s<a.length;s+=1)a[s].c();N(n,"class","svelte-1tdfzl5"),N(i,"class","regions-list svelte-1tdfzl5"),N(e,"class","regional-breakdown svelte-1tdfzl5")},m(s,c){z(s,e,c),b(e,n),b(e,r),b(e,i);for(let l=0;l<a.length;l+=1)a[l]&&a[l].m(i,null)},p(s,[c]){if(c&1){o=vt(s[0]);let l;for(l=0;l<o.length;l+=1){const u=hi(s,o,l);a[l]?a[l].p(u,c):(a[l]=gi(u),a[l].c(),a[l].m(i,null))}for(;l<a.length;l+=1)a[l].d(1);a.length=o.length}},i:j,o:j,d(s){s&&P(e),se(a,s)}}}function dh(t,e,n){let r,{regionalData:i}=e,{processedRegionalData:o}=e;return t.$$set=a=>{"regionalData"in a&&n(1,i=a.regionalData),"processedRegionalData"in a&&n(2,o=a.processedRegionalData)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=[...i].map(([a,s])=>{const c=o.get(a)||[];return{region:a,total:s.length,implemented:c.filter(l=>l.value==="Yes").length,partial:c.filter(l=>l.value==="Partially").length,percentage:(c.length/s.length*100).toFixed(1)}}).sort((a,s)=>parseFloat(s.percentage)-parseFloat(a.percentage)))},[r,i,o]}class ph extends Nt{constructor(e){super(),Ct(this,e,dh,gh,kt,{regionalData:1,processedRegionalData:2})}}function di(t){let e,n,r,i,o=t[4].percentage+"",a,s,c,l,u,f,h,d,y,v,g,m;return d=new hh({props:{processedData:t[1]}}),g=new ph({props:{regionalData:t[3],processedRegionalData:t[2]}}),{c(){e=A("div"),n=A("h4"),n.textContent="Global Implementation",r=F(),i=A("div"),a=X(o),s=X("%"),c=F(),l=A("p"),l.textContent="of countries have implemented or partially implemented this measure",u=F(),f=A("div"),h=A("div"),Mt(d.$$.fragment),y=F(),v=A("div"),Mt(g.$$.fragment),N(n,"class","svelte-jdjhuu"),N(i,"class","stats-number svelte-jdjhuu"),N(l,"class","stats-detail svelte-jdjhuu"),N(e,"class","global-stats svelte-jdjhuu"),N(h,"class","circles-container svelte-jdjhuu"),N(v,"class","breakdown-container svelte-jdjhuu"),N(f,"class","visualization-container svelte-jdjhuu")},m(_,p){z(_,e,p),b(e,n),b(e,r),b(e,i),b(i,a),b(i,s),b(e,c),b(e,l),z(_,u,p),z(_,f,p),b(f,h),wt(d,h,null),b(f,y),b(f,v),wt(g,v,null),m=!0},p(_,p){(!m||p&16)&&o!==(o=_[4].percentage+"")&&nt(a,o);const w={};p&2&&(w.processedData=_[1]),d.$set(w);const x={};p&8&&(x.regionalData=_[3]),p&4&&(x.processedRegionalData=_[2]),g.$set(x)},i(_){m||(B(d.$$.fragment,_),B(g.$$.fragment,_),m=!0)},o(_){et(d.$$.fragment,_),et(g.$$.fragment,_),m=!1},d(_){_&&(P(e),P(u),P(f)),xt(d),xt(g)}}}function mh(t){let e,n,r,i,o,a,s,c,l;s=new lo({}),s.$on("select",t[5]);let u=t[0]&&di(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Implementation Status Overview",r=F(),i=A("p"),i.textContent=`Explore the global and regional progress of countries implementing key anti-torture mechanisms. \r
        The visualizations below provide insights into the distribution and extent of implementation for the selected indicator, highlighting successes and areas for improvement.`,o=F(),a=A("div"),Mt(s.$$.fragment),c=F(),u&&u.c(),N(n,"class","svelte-jdjhuu"),N(i,"class","description svelte-jdjhuu"),N(a,"class","selector-container svelte-jdjhuu"),N(e,"class","indicator-view svelte-jdjhuu")},m(f,h){z(f,e,h),b(e,n),b(e,r),b(e,i),b(e,o),b(e,a),wt(s,a,null),b(e,c),u&&u.m(e,null),l=!0},p(f,[h]){f[0]?u?(u.p(f,h),h&1&&B(u,1)):(u=di(f),u.c(),B(u,1),u.m(e,null)):u&&(ke(),et(u,1,1,()=>{u=null}),Ce())},i(f){l||(B(s.$$.fragment,f),B(u),l=!0)},o(f){et(s.$$.fragment,f),et(u),l=!1},d(f){f&&P(e),xt(s),u&&u.d()}}}function yh(t,e,n){let r,i,o,a,{data:s}=e,c;function l(u){n(0,c=u.detail.indicator)}return t.$$set=u=>{"data"in u&&n(6,s=u.data)},t.$$.update=()=>{t.$$.dirty&65&&n(1,r=c&&s?s.filter(u=>{const f=u.Indicator.trim(),h=c.trim();return console.log("Filtering:",{currentIndicator:f,selectedIndicator:h,isMatch:f===h,value:u.Input}),f===h&&(u.Input==="Yes"||u.Input==="Partially")}).map(u=>({country:u.Country,region:u.Region,indicator:u.Indicator,date:u.Date,value:u.Input,iso2:u.iso2})):[]),t.$$.dirty&67&&n(4,i={total:r.length,implemented:r.filter(u=>u.value==="Yes").length,partial:r.filter(u=>u.value==="Partially").length,percentage:c?(r.length/s.filter(u=>u.Indicator.trim()===c.trim()).length*100).toFixed(1):"0.0"}),t.$$.dirty&65&&n(3,o=Dn(s.filter(u=>u.Indicator.trim()===(c==null?void 0:c.trim())),u=>u.Region)),t.$$.dirty&2&&n(2,a=Dn(r,u=>u.region))},[c,r,a,o,i,l,s]}class vh extends Nt{constructor(e){super(),Ct(this,e,yh,mh,kt,{data:6})}}function _h(t){let e;return{c(){e=A("div"),e.textContent="Loading data...",N(e,"class","loading svelte-o574d9")},m(n,r){z(n,e,r)},p:j,i:j,o:j,d(n){n&&P(e)}}}function wh(t){let e,n;return e=new uh({props:{data:t[0]}}),{c(){Mt(e.$$.fragment)},m(r,i){wt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){et(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function pi(t){let e,n;return e=new vh({props:{data:t[0]}}),{c(){Mt(e.$$.fragment)},m(r,i){wt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(B(e.$$.fragment,r),n=!0)},o(r){et(e.$$.fragment,r),n=!1},d(r){xt(e,r)}}}function xh(t){let e,n,r,i,o,a,s,c,l,u,f,h,d,y,v;e=new Mo({});const g=[wh,_h],m=[];function _(w,x){return w[1]&&w[0].length>0?0:1}a=_(t),s=m[a]=g[a](t);let p=t[0]&&pi(t);return h=new Do({}),y=new No({}),{c(){Mt(e.$$.fragment),n=F(),r=A("main"),i=A("div"),o=A("section"),s.c(),c=F(),l=A("section"),p&&p.c(),u=F(),f=A("section"),Mt(h.$$.fragment),d=F(),Mt(y.$$.fragment),N(o,"class","timeline svelte-o574d9"),N(l,"class","indicators svelte-o574d9"),N(f,"class","svelte-o574d9"),N(i,"class","container svelte-o574d9")},m(w,x){wt(e,w,x),z(w,n,x),z(w,r,x),b(r,i),b(i,o),m[a].m(o,null),b(i,c),b(i,l),p&&p.m(l,null),b(i,u),b(i,f),wt(h,f,null),z(w,d,x),wt(y,w,x),v=!0},p(w,[x]){let M=a;a=_(w),a===M?m[a].p(w,x):(ke(),et(m[M],1,1,()=>{m[M]=null}),Ce(),s=m[a],s?s.p(w,x):(s=m[a]=g[a](w),s.c()),B(s,1),s.m(o,null)),w[0]?p?(p.p(w,x),x&1&&B(p,1)):(p=pi(w),p.c(),B(p,1),p.m(l,null)):p&&(ke(),et(p,1,1,()=>{p=null}),Ce())},i(w){v||(B(e.$$.fragment,w),B(s),B(p),B(h.$$.fragment,w),B(y.$$.fragment,w),v=!0)},o(w){et(e.$$.fragment,w),et(s),et(p),et(h.$$.fragment,w),et(y.$$.fragment,w),v=!1},d(w){w&&(P(n),P(r),P(d)),xt(e,w),m[a].d(),p&&p.d(),xt(h),xt(y,w)}}}function bh(t,e,n){let r=[],i=!1;const o="/APT-torture/data/apt-data_updated.csv";return rn(async()=>{try{n(0,r=await Qu(o)),n(1,i=!0),console.log("Data loaded:",r)}catch(a){console.error("Failed to load data:",a),n(1,i=!1),n(0,r=[])}}),[r,i]}class Th extends Nt{constructor(e){super(),Ct(this,e,bh,xh,kt,{})}}new Th({target:document.getElementById("app")});
