var uo=Object.defineProperty;var co=(t,e,n)=>e in t?uo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fn=(t,e,n)=>co(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Z(){}function mi(t){return t()}function or(){return Object.create(null)}function De(t){t.forEach(mi)}function yi(t){return typeof t=="function"}function Ct(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function fo(t){return Object.keys(t).length===0}function b(t,e){t.appendChild(e)}function z(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function le(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function vi(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function V(t){return document.createTextNode(t)}function F(){return V(" ")}function _i(){return V("")}function An(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function N(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ho(t){return Array.from(t.childNodes)}function rt(t,e){e=""+e,t.data!==e&&(t.data=e)}function sr(t,e){t.value=e??""}function ar(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}let Ie;function go(){if(Ie===void 0){Ie=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ie=!0}}return Ie}function wi(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=A("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=go();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=An(window,"message",s=>{s.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=An(r.contentWindow,"resize",e),e()}),b(t,r),()=>{(i||o&&r.contentWindow)&&o(),P(r)}}function lr(t,e,n){t.classList.toggle(e,!!n)}function po(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let Te;function be(t){Te=t}function xi(){if(!Te)throw new Error("Function called outside component initialization");return Te}function rn(t){xi().$$.on_mount.push(t)}function bi(){const t=xi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=po(e,n,{cancelable:r});return i.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}const re=[],Ve=[];let se=[];const ur=[],mo=Promise.resolve();let $n=!1;function yo(){$n||($n=!0,mo.then(Ti))}function Me(t){se.push(t)}const hn=new Set;let Jt=0;function Ti(){if(Jt!==0)return;const t=Te;do{try{for(;Jt<re.length;){const e=re[Jt];Jt++,be(e),vo(e.$$)}}catch(e){throw re.length=0,Jt=0,e}for(be(null),re.length=0,Jt=0;Ve.length;)Ve.pop()();for(let e=0;e<se.length;e+=1){const n=se[e];hn.has(n)||(hn.add(n),n())}se.length=0}while(re.length);for(;ur.length;)ur.pop()();$n=!1,hn.clear(),be(t)}function vo(t){if(t.fragment!==null){t.update(),De(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Me)}}function _o(t){const e=[],n=[];se.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),se=e}const He=new Set;let Vt;function ke(){Vt={r:0,c:[],p:Vt}}function Ce(){Vt.r||De(Vt.c),Vt=Vt.p}function j(t,e){t&&t.i&&(He.delete(t),t.i(e))}function nt(t,e,n,r){if(t&&t.o){if(He.has(t))return;He.add(t),Vt.c.push(()=>{He.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function _t(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function kt(t){t&&t.c()}function xt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Me(()=>{const o=t.$$.on_mount.map(mi).filter(yi);t.$$.on_destroy?t.$$.on_destroy.push(...o):De(o),t.$$.on_mount=[]}),i.forEach(Me)}function bt(t,e){const n=t.$$;n.fragment!==null&&(_o(n.after_update),De(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function wo(t,e){t.$$.dirty[0]===-1&&(re.push(t),yo(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Nt(t,e,n,r,i,o,s=null,a=[-1]){const c=Te;be(t);const l=t.$$={fragment:null,ctx:[],props:o,update:Z,not_equal:i,bound:or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:or(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};s&&s(l.root);let u=!1;if(l.ctx=n?n(t,e.props||{},(f,h,...g)=>{const w=g.length?g[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=w)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](w),u&&wo(t,f)),h}):[],l.update(),u=!0,De(l.before_update),l.fragment=r?r(l.ctx):!1,e.target){if(e.hydrate){const f=ho(e.target);l.fragment&&l.fragment.l(f),f.forEach(P)}else l.fragment&&l.fragment.c();e.intro&&j(t.$$.fragment),xt(t,e.target,e.anchor),Ti()}be(c)}class At{constructor(){fn(this,"$$");fn(this,"$$set")}$destroy(){bt(this,1),this.$destroy=Z}$on(e,n){if(!yi(n))return Z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!fo(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xo);function bo(t){let e,n,r,i,o,s,a,c,l;return{c(){e=A("header"),n=A("div"),r=A("h1"),i=V(t[0]),o=F(),s=A("h2"),a=V(t[1]),c=F(),l=A("p"),l.textContent=`This visualization explores the global progress in torture prevention measures,\r
        highlighting the positive steps taken by countries worldwide in ratifying conventions,\r
        implementing preventive mechanisms, and establishing human rights institutions.`,N(r,"class","svelte-1rpvxrr"),N(s,"class","svelte-1rpvxrr"),N(l,"class","intro svelte-1rpvxrr"),N(n,"class","header-content svelte-1rpvxrr"),N(e,"class","svelte-1rpvxrr")},m(u,f){z(u,e,f),b(e,n),b(n,r),b(r,i),b(n,o),b(n,s),b(s,a),b(n,c),b(n,l)},p(u,[f]){f&1&&rt(i,u[0]),f&2&&rt(a,u[1])},i:Z,o:Z,d(u){u&&P(e)}}}function To(t,e,n){let{title:r="Global Torture Prevention Progress"}=e,{subtitle:i="A Global Overview of Anti-Torture Measures"}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"subtitle"in o&&n(1,i=o.subtitle)},[r,i]}class Mo extends At{constructor(e){super(),Nt(this,e,To,bo,Ct,{title:0,subtitle:1})}}function ko(t){let e;return{c(){e=A("footer"),e.innerHTML='<div class="footer-content svelte-lnurpo"><a href="https://www.apt.ch" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="/APT-torture/images/apt_logo.jpg" alt="Association for the Prevention of Torture Logo" class="logo svelte-lnurpo"/></a> <div class="author svelte-lnurpo"><p class="svelte-lnurpo">Designed by: <a href="https://www.linkedin.com/in/adekola-aliu" target="_blank" rel="noopener noreferrer" class="svelte-lnurpo">Adekola Aliu</a></p></div> <a href="https://www.vizforsocialgood.com" target="_blank" rel="noopener noreferrer" class="logo-link svelte-lnurpo"><img src="images/vfsg-logo.png" alt="Viz for Social Good Logo" class="logo svelte-lnurpo"/></a></div>',N(e,"class","svelte-lnurpo")},m(n,r){z(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&P(e)}}}function Co(t){return new Date().getFullYear(),[]}class No extends At{constructor(e){super(),Nt(this,e,Co,ko,Ct,{})}}function cr(t,e,n){const r=t.slice();return r[4]=e[n].term,r[5]=e[n].description,r}function fr(t,e,n){const r=t.slice();return r[8]=e[n].title,r[5]=e[n].description,r}function hr(t){let e,n,r=t[8]+"",i,o,s,a=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=V(r),o=V(":"),s=F(),c=V(a),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(n,o),b(e,s),b(e,c),b(e,l)},p(u,f){f&4&&r!==(r=u[8]+"")&&rt(i,r),f&4&&a!==(a=u[5]+"")&&rt(c,a)},d(u){u&&P(e)}}}function gr(t){let e,n,r=t[4]+"",i,o,s,a=t[5]+"",c,l;return{c(){e=A("li"),n=A("strong"),i=V(r),o=V(":"),s=F(),c=V(a),l=F(),N(n,"class","svelte-sdyjs1"),N(e,"class","svelte-sdyjs1")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(n,o),b(e,s),b(e,c),b(e,l)},p(u,f){f&8&&r!==(r=u[4]+"")&&rt(i,r),f&8&&a!==(a=u[5]+"")&&rt(c,a)},d(u){u&&P(e)}}}function Ao(t){let e,n,r,i,o,s,a,c,l,u,f,h,g,w,m=_t(t[2]),d=[];for(let p=0;p<m.length;p+=1)d[p]=hr(fr(t,m,p));let y=_t(t[3]),v=[];for(let p=0;p<y.length;p+=1)v[p]=gr(cr(t,y,p));return{c(){e=A("section"),n=A("h2"),r=V(t[0]),i=F(),o=A("p"),s=V(t[1]),a=F(),c=A("h3"),c.textContent="Indicator Definitions",l=F(),u=A("ul");for(let p=0;p<d.length;p+=1)d[p].c();f=F(),h=A("h3"),h.textContent="Relevant Terms",g=F(),w=A("ul");for(let p=0;p<v.length;p+=1)v[p].c();N(n,"class","methodology-title svelte-sdyjs1"),N(o,"class","methodology-content svelte-sdyjs1"),N(c,"class","subheading svelte-sdyjs1"),N(u,"class","definitions svelte-sdyjs1"),N(h,"class","subheading svelte-sdyjs1"),N(w,"class","terms svelte-sdyjs1"),N(e,"class","methodology svelte-sdyjs1")},m(p,x){z(p,e,x),b(e,n),b(n,r),b(e,i),b(e,o),b(o,s),b(e,a),b(e,c),b(e,l),b(e,u);for(let _=0;_<d.length;_+=1)d[_]&&d[_].m(u,null);b(e,f),b(e,h),b(e,g),b(e,w);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(w,null)},p(p,[x]){if(x&1&&rt(r,p[0]),x&2&&rt(s,p[1]),x&4){m=_t(p[2]);let _;for(_=0;_<m.length;_+=1){const T=fr(p,m,_);d[_]?d[_].p(T,x):(d[_]=hr(T),d[_].c(),d[_].m(u,null))}for(;_<d.length;_+=1)d[_].d(1);d.length=m.length}if(x&8){y=_t(p[3]);let _;for(_=0;_<y.length;_+=1){const T=cr(p,y,_);v[_]?v[_].p(T,x):(v[_]=gr(T),v[_].c(),v[_].m(w,null))}for(;_<v.length;_+=1)v[_].d(1);v.length=y.length}},i:Z,o:Z,d(p){p&&P(e),le(d,p),le(v,p)}}}function $o(t,e,n){let{methodologyTitle:r="Methodology"}=e,{methodologyContent:i=`
        The data used in this visualization was provided by the Association for the Prevention of Torture (APT). 
        It includes eight indicators identified as legal benchmarks for measuring progress in torture prevention 
        across countries. Each indicator focuses on legal frameworks rather than practical implementation, 
        as these are easier to document consistently. These indicators represent whether a country has met specific 
        legal obligations or milestones, providing a foundation for understanding progress toward eradicating torture. 
        For each country, the data records whether the indicator has been implemented ("Yes"), partially implemented 
        ("Partially"), or not implemented ("No").
    `}=e,{indicatorDefinitions:o=[{title:"Ratification of the UN Convention against Torture",description:"Indicates whether the country has formally ratified the UN Convention against Torture and Other Cruel, Inhuman, or Degrading Treatment or Punishment."},{title:"Ratification of Optional Protocol (OPCAT)",description:"Reflects whether the country has adopted the OPCAT, a treaty that establishes a system for regular independent visits to places of detention."},{title:"Submission of initial report to CAT",description:"Indicates whether the country has submitted its first report to the Committee Against Torture (CAT), as required under the UN Convention against Torture."},{title:"Prohibition of torture in the constitution",description:"Shows whether the country's constitution explicitly prohibits torture."},{title:"Criminalisation of torture under domestic law",description:"Indicates whether torture is explicitly criminalized in national legislation."},{title:"Designation of the National Preventive Mechanism (in law)",description:"Reflects whether the country has designated a National Preventive Mechanism (NPM) in its legal framework to monitor places of detention."},{title:"Operationality of the National Preventive Mechanism",description:"Indicates whether the NPM is operational and performing its intended functions."},{title:"Existence of National Human Rights Institution that fully complies with Paris Principles",description:"Indicates whether the country has a National Human Rights Institution (NHRI) that meets the standards set by the Paris Principles."}]}=e,{relevantTerms:s=[{term:"Full Implementation ('Yes')",description:"Indicates that the country has completely adopted the measure as per the indicator's definition."},{term:"Partial Implementation ('Partially')",description:"Reflects that the country has taken steps toward adopting the measure but has not fully met the criteria."},{term:"Torture",description:"The intentional infliction of severe physical or mental pain or suffering for purposes such as obtaining information, punishment, intimidation, or discrimination, often conducted by or with the consent of public officials."}]}=e;return t.$$set=a=>{"methodologyTitle"in a&&n(0,r=a.methodologyTitle),"methodologyContent"in a&&n(1,i=a.methodologyContent),"indicatorDefinitions"in a&&n(2,o=a.indicatorDefinitions),"relevantTerms"in a&&n(3,s=a.relevantTerms)},[r,i,o,s]}class Do extends At{constructor(e){super(),Nt(this,e,$o,Ao,Ct,{methodologyTitle:0,methodologyContent:1,indicatorDefinitions:2,relevantTerms:3})}}function ze(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function So(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wn(t){let e,n,r;t.length!==2?(e=ze,n=(a,c)=>ze(t(a),c),r=(a,c)=>t(a)-c):(e=t===ze||t===So?t:Uo,n=t,r=t);function i(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<0?l=f+1:u=f}while(l<u)}return l}function o(a,c,l=0,u=a.length){if(l<u){if(e(c,c)!==0)return u;do{const f=l+u>>>1;n(a[f],c)<=0?l=f+1:u=f}while(l<u)}return l}function s(a,c,l=0,u=a.length){const f=i(a,c,l,u-1);return f>l&&r(a[f-1],c)>-r(a[f],c)?f-1:f}return{left:i,center:s,right:o}}function Uo(){return 0}function Eo(t){return t===null?NaN:+t}const Io=Wn(ze),Fo=Io.right;Wn(Eo).center;class Yo extends Map{constructor(e,n=Ho){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dr(this,e))}has(e){return super.has(dr(this,e))}set(e,n){return super.set(Ro(this,e),n)}delete(e){return super.delete(Po(this,e))}}function dr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Ro({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Po({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ho(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pr(t){return t}function Dn(t,...e){return zo(t,pr,pr,e)}function zo(t,e,n,r){return function i(o,s){if(s>=r.length)return n(o);const a=new Yo,c=r[s++];let l=-1;for(const u of o){const f=c(u,++l,o),h=a.get(f);h?h.push(u):a.set(f,[u])}for(const[u,f]of a)a.set(u,i(f,s));return e(a)}(t,0)}const Oo=Math.sqrt(50),Lo=Math.sqrt(10),Wo=Math.sqrt(2);function Mi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Oo?10:o>=Lo?5:o>=Wo?2:1;let a,c,l;return i<0?(l=Math.pow(10,-i)/s,a=Math.round(t*l),c=Math.round(e*l),a/l<t&&++a,c/l>e&&--c,l=-l):(l=Math.pow(10,i)*s,a=Math.round(t/l),c=Math.round(e/l),a*l<t&&++a,c*l>e&&--c),c<a&&.5<=n&&n<2?Mi(t,e,n*2):[a,c,l]}function mr(t,e,n){return e=+e,t=+t,n=+n,Mi(t,e,n)[2]}function yr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?mr(e,t,n):mr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Xo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Vo(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function qo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Bo(t){return t}var jo=3,vr=1e-6;function Zo(t){return"translate("+t+",0)"}function Go(t){return e=>+t(e)}function Qo(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Ko(){return!this.__axis}function Jo(t,e){var n=[],r=null,i=null,o=6,s=6,a=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=1,u="y",f=Zo;function h(g){var w=r??(e.ticks?e.ticks.apply(e,n):e.domain()),m=i??(e.tickFormat?e.tickFormat.apply(e,n):Bo),d=Math.max(o,0)+a,y=e.range(),v=+y[0]+c,p=+y[y.length-1]+c,x=(e.bandwidth?Qo:Go)(e.copy(),c),_=g.selection?g.selection():g,T=_.selectAll(".domain").data([null]),M=_.selectAll(".tick").data(w,e).order(),C=M.exit(),L=M.enter().append("g").attr("class","tick"),D=M.select("line"),I=M.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(L),D=D.merge(L.append("line").attr("stroke","currentColor").attr(u+"2",l*o)),I=I.merge(L.append("text").attr("fill","currentColor").attr(u,l*d).attr("dy","0.71em")),g!==_&&(T=T.transition(g),M=M.transition(g),D=D.transition(g),I=I.transition(g),C=C.transition(g).attr("opacity",vr).attr("transform",function(O){return isFinite(O=x(O))?f(O+c):this.getAttribute("transform")}),L.attr("opacity",vr).attr("transform",function(O){var Y=this.parentNode.__axis;return f((Y&&isFinite(Y=Y(O))?Y:x(O))+c)})),C.remove(),T.attr("d",s?"M"+v+","+l*s+"V"+c+"H"+p+"V"+l*s:"M"+v+","+c+"H"+p),M.attr("opacity",1).attr("transform",function(O){return f(x(O)+c)}),D.attr(u+"2",l*o),I.attr(u,l*d).text(m),_.filter(Ko).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),_.each(function(){this.__axis=x})}return h.scale=function(g){return arguments.length?(e=g,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(g){return arguments.length?(n=g==null?[]:Array.from(g),h):n.slice()},h.tickValues=function(g){return arguments.length?(r=g==null?null:Array.from(g),h):r&&r.slice()},h.tickFormat=function(g){return arguments.length?(i=g,h):i},h.tickSize=function(g){return arguments.length?(o=s=+g,h):o},h.tickSizeInner=function(g){return arguments.length?(o=+g,h):o},h.tickSizeOuter=function(g){return arguments.length?(s=+g,h):s},h.tickPadding=function(g){return arguments.length?(a=+g,h):a},h.offset=function(g){return arguments.length?(c=+g,h):c},h}function ts(t){return Jo(jo,t)}var es={value:()=>{}};function on(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Oe(n)}function Oe(t){this._=t}function ns(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Oe.prototype=on.prototype={constructor:Oe,on:function(t,e){var n=this._,r=ns(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=rs(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=_r(n[i],t.name,e);else if(e==null)for(i in n)n[i]=_r(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Oe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function rs(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function _r(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=es,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Sn="http://www.w3.org/1999/xhtml";const wr={svg:"http://www.w3.org/2000/svg",xhtml:Sn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),wr.hasOwnProperty(e)?{space:wr[e],local:t}:t}function is(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Sn&&e.documentElement.namespaceURI===Sn?e.createElement(t):e.createElementNS(n,t)}}function os(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ki(t){var e=sn(t);return(e.local?os:is)(e)}function ss(){}function Xn(t){return t==null?ss:function(){return this.querySelector(t)}}function as(t){typeof t!="function"&&(t=Xn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),c,l,u=0;u<s;++u)(c=o[u])&&(l=t.call(c,c.__data__,u,o))&&("__data__"in c&&(l.__data__=c.__data__),a[u]=l);return new yt(r,this._parents)}function ls(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function us(){return[]}function Ci(t){return t==null?us:function(){return this.querySelectorAll(t)}}function cs(t){return function(){return ls(t.apply(this,arguments))}}function fs(t){typeof t=="function"?t=cs(t):t=Ci(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&(r.push(t.call(c,c.__data__,l,s)),i.push(c));return new yt(r,i)}function Ni(t){return function(){return this.matches(t)}}function Ai(t){return function(e){return e.matches(t)}}var hs=Array.prototype.find;function gs(t){return function(){return hs.call(this.children,t)}}function ds(){return this.firstElementChild}function ps(t){return this.select(t==null?ds:gs(typeof t=="function"?t:Ai(t)))}var ms=Array.prototype.filter;function ys(){return Array.from(this.children)}function vs(t){return function(){return ms.call(this.children,t)}}function _s(t){return this.selectAll(t==null?ys:vs(typeof t=="function"?t:Ai(t)))}function ws(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new yt(r,this._parents)}function $i(t){return new Array(t.length)}function xs(){return new yt(this._enter||this._groups.map($i),this._parents)}function qe(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qe.prototype={constructor:qe,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function bs(t){return function(){return t}}function Ts(t,e,n,r,i,o){for(var s=0,a,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new qe(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function Ms(t,e,n,r,i,o,s){var a,c,l=new Map,u=e.length,f=o.length,h=new Array(u),g;for(a=0;a<u;++a)(c=e[a])&&(h[a]=g=s.call(c,c.__data__,a,e)+"",l.has(g)?i[a]=c:l.set(g,c));for(a=0;a<f;++a)g=s.call(t,o[a],a,o)+"",(c=l.get(g))?(r[a]=c,c.__data__=o[a],l.delete(g)):n[a]=new qe(t,o[a]);for(a=0;a<u;++a)(c=e[a])&&l.get(h[a])===c&&(i[a]=c)}function ks(t){return t.__data__}function Cs(t,e){if(!arguments.length)return Array.from(this,ks);var n=e?Ms:Ts,r=this._parents,i=this._groups;typeof t!="function"&&(t=bs(t));for(var o=i.length,s=new Array(o),a=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],f=i[l],h=f.length,g=Ns(t.call(u,u&&u.__data__,l,r)),w=g.length,m=a[l]=new Array(w),d=s[l]=new Array(w),y=c[l]=new Array(h);n(u,f,m,d,y,g,e);for(var v=0,p=0,x,_;v<w;++v)if(x=m[v]){for(v>=p&&(p=v+1);!(_=d[p])&&++p<w;);x._next=_||null}}return s=new yt(s,r),s._enter=a,s._exit=c,s}function Ns(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function As(){return new yt(this._exit||this._groups.map($i),this._parents)}function $s(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ds(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),c=0;c<s;++c)for(var l=n[c],u=r[c],f=l.length,h=a[c]=new Array(f),g,w=0;w<f;++w)(g=l[w]||u[w])&&(h[w]=g);for(;c<i;++c)a[c]=n[c];return new yt(a,this._parents)}function Ss(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Us(t){t||(t=Es);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,c=i[o]=new Array(a),l,u=0;u<a;++u)(l=s[u])&&(c[u]=l);c.sort(e)}return new yt(i,this._parents).order()}function Es(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Is(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Fs(){return Array.from(this)}function Ys(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Rs(){let t=0;for(const e of this)++t;return t}function Ps(){return!this.node()}function Hs(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function zs(t){return function(){this.removeAttribute(t)}}function Os(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ls(t,e){return function(){this.setAttribute(t,e)}}function Ws(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Xs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Vs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function qs(t,e){var n=sn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Os:zs:typeof e=="function"?n.local?Vs:Xs:n.local?Ws:Ls)(n,e))}function Di(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Bs(t){return function(){this.style.removeProperty(t)}}function js(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Zs(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Gs(t,e,n){return arguments.length>1?this.each((e==null?Bs:typeof e=="function"?Zs:js)(t,e,n??"")):ue(this.node(),t)}function ue(t,e){return t.style.getPropertyValue(e)||Di(t).getComputedStyle(t,null).getPropertyValue(e)}function Qs(t){return function(){delete this[t]}}function Ks(t,e){return function(){this[t]=e}}function Js(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ta(t,e){return arguments.length>1?this.each((e==null?Qs:typeof e=="function"?Js:Ks)(t,e)):this.node()[t]}function Si(t){return t.trim().split(/^|\s+/)}function Vn(t){return t.classList||new Ui(t)}function Ui(t){this._node=t,this._names=Si(t.getAttribute("class")||"")}Ui.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ei(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ii(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function ea(t){return function(){Ei(this,t)}}function na(t){return function(){Ii(this,t)}}function ra(t,e){return function(){(e.apply(this,arguments)?Ei:Ii)(this,t)}}function ia(t,e){var n=Si(t+"");if(arguments.length<2){for(var r=Vn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?ra:e?ea:na)(n,e))}function oa(){this.textContent=""}function sa(t){return function(){this.textContent=t}}function aa(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function la(t){return arguments.length?this.each(t==null?oa:(typeof t=="function"?aa:sa)(t)):this.node().textContent}function ua(){this.innerHTML=""}function ca(t){return function(){this.innerHTML=t}}function fa(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ha(t){return arguments.length?this.each(t==null?ua:(typeof t=="function"?fa:ca)(t)):this.node().innerHTML}function ga(){this.nextSibling&&this.parentNode.appendChild(this)}function da(){return this.each(ga)}function pa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ma(){return this.each(pa)}function ya(t){var e=typeof t=="function"?t:ki(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function va(){return null}function _a(t,e){var n=typeof t=="function"?t:ki(t),r=e==null?va:typeof e=="function"?e:Xn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function wa(){var t=this.parentNode;t&&t.removeChild(this)}function xa(){return this.each(wa)}function ba(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ta(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ma(t){return this.select(t?Ta:ba)}function ka(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Ca(t){return function(e){t.call(this,e,this.__data__)}}function Na(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Aa(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function $a(t,e,n){return function(){var r=this.__on,i,o=Ca(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Da(t,e,n){var r=Na(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,l=a.length,u;c<l;++c)for(i=0,u=a[c];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?$a:Aa,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function Fi(t,e,n){var r=Di(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Sa(t,e){return function(){return Fi(this,t,e)}}function Ua(t,e){return function(){return Fi(this,t,e.apply(this,arguments))}}function Ea(t,e){return this.each((typeof e=="function"?Ua:Sa)(t,e))}function*Ia(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var Yi=[null];function yt(t,e){this._groups=t,this._parents=e}function Se(){return new yt([[document.documentElement]],Yi)}function Fa(){return this}yt.prototype=Se.prototype={constructor:yt,select:as,selectAll:fs,selectChild:ps,selectChildren:_s,filter:ws,data:Cs,enter:xs,exit:As,join:$s,merge:Ds,selection:Fa,order:Ss,sort:Us,call:Is,nodes:Fs,node:Ys,size:Rs,empty:Ps,each:Hs,attr:qs,style:Gs,property:ta,classed:ia,text:la,html:ha,raise:da,lower:ma,append:ya,insert:_a,remove:xa,clone:Ma,datum:ka,on:Da,dispatch:Ea,[Symbol.iterator]:Ia};function lt(t){return typeof t=="string"?new yt([[document.querySelector(t)]],[document.documentElement]):new yt([[t]],Yi)}function Ya(t){let e;for(;e=t.sourceEvent;)t=e;return t}function xr(t,e){if(t=Ya(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Un={capture:!0,passive:!1};function En(t){t.preventDefault(),t.stopImmediatePropagation()}function Ra(t){var e=t.document.documentElement,n=lt(t).on("dragstart.drag",En,Un);"onselectstart"in e?n.on("selectstart.drag",En,Un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Pa(t,e){var n=t.document.documentElement,r=lt(t).on("dragstart.drag",null);e&&(r.on("click.drag",En,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function qn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ri(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ue(){}var Ne=.7,Be=1/Ne,ae="\\s*([+-]?\\d+)\\s*",Ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ha=/^#([0-9a-f]{3,8})$/,za=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Oa=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),La=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ae}\\)$`),Wa=new RegExp(`^rgba\\(${St},${St},${St},${Ae}\\)$`),Xa=new RegExp(`^hsl\\(${Ae},${St},${St}\\)$`),Va=new RegExp(`^hsla\\(${Ae},${St},${St},${Ae}\\)$`),br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};qn(Ue,jt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Tr,formatHex:Tr,formatHex8:qa,formatHsl:Ba,formatRgb:Mr,toString:Mr});function Tr(){return this.rgb().formatHex()}function qa(){return this.rgb().formatHex8()}function Ba(){return Pi(this).formatHsl()}function Mr(){return this.rgb().formatRgb()}function jt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ha.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?kr(e):n===3?new pt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=za.exec(t))?new pt(e[1],e[2],e[3],1):(e=Oa.exec(t))?new pt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=La.exec(t))?Fe(e[1],e[2],e[3],e[4]):(e=Wa.exec(t))?Fe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Xa.exec(t))?Ar(e[1],e[2]/100,e[3]/100,1):(e=Va.exec(t))?Ar(e[1],e[2]/100,e[3]/100,e[4]):br.hasOwnProperty(t)?kr(br[t]):t==="transparent"?new pt(NaN,NaN,NaN,0):null}function kr(t){return new pt(t>>16&255,t>>8&255,t&255,1)}function Fe(t,e,n,r){return r<=0&&(t=e=n=NaN),new pt(t,e,n,r)}function ja(t){return t instanceof Ue||(t=jt(t)),t?(t=t.rgb(),new pt(t.r,t.g,t.b,t.opacity)):new pt}function In(t,e,n,r){return arguments.length===1?ja(t):new pt(t,e,n,r??1)}function pt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}qn(pt,In,Ri(Ue,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ne:Math.pow(Ne,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pt(Bt(this.r),Bt(this.g),Bt(this.b),je(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cr,formatHex:Cr,formatHex8:Za,formatRgb:Nr,toString:Nr}));function Cr(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}`}function Za(){return`#${qt(this.r)}${qt(this.g)}${qt(this.b)}${qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Nr(){const t=je(this.opacity);return`${t===1?"rgb(":"rgba("}${Bt(this.r)}, ${Bt(this.g)}, ${Bt(this.b)}${t===1?")":`, ${t})`}`}function je(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Bt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function qt(t){return t=Bt(t),(t<16?"0":"")+t.toString(16)}function Ar(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Mt(t,e,n,r)}function Pi(t){if(t instanceof Mt)return new Mt(t.h,t.s,t.l,t.opacity);if(t instanceof Ue||(t=jt(t)),!t)return new Mt;if(t instanceof Mt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,c=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=c<.5?o+i:2-o-i,s*=60):a=c>0&&c<1?0:s,new Mt(s,a,c,t.opacity)}function Ga(t,e,n,r){return arguments.length===1?Pi(t):new Mt(t,e,n,r??1)}function Mt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}qn(Mt,Ga,Ri(Ue,{brighter(t){return t=t==null?Be:Math.pow(Be,t),new Mt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ne:Math.pow(Ne,t),new Mt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new pt(gn(t>=240?t-240:t+120,i,r),gn(t,i,r),gn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Mt($r(this.h),Ye(this.s),Ye(this.l),je(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=je(this.opacity);return`${t===1?"hsl(":"hsla("}${$r(this.h)}, ${Ye(this.s)*100}%, ${Ye(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $r(t){return t=(t||0)%360,t<0?t+360:t}function Ye(t){return Math.max(0,Math.min(1,t||0))}function gn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Bn=t=>()=>t;function Qa(t,e){return function(n){return t+n*e}}function Ka(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ja(t){return(t=+t)==1?Hi:function(e,n){return n-e?Ka(e,n,t):Bn(isNaN(e)?n:e)}}function Hi(t,e){var n=e-t;return n?Qa(t,n):Bn(isNaN(t)?e:t)}const Ze=function t(e){var n=Ja(e);function r(i,o){var s=n((i=In(i)).r,(o=In(o)).r),a=n(i.g,o.g),c=n(i.b,o.b),l=Hi(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=c(u),i.opacity=l(u),i+""}}return r.gamma=t,r}(1);function tl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function el(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nl(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=an(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function rl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Tt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function il(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=an(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(Fn.source,"g");function ol(t){return function(){return t}}function sl(t){return function(e){return t(e)+""}}function zi(t,e){var n=Fn.lastIndex=dn.lastIndex=0,r,i,o,s=-1,a=[],c=[];for(t=t+"",e=e+"";(r=Fn.exec(t))&&(i=dn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,c.push({i:s,x:Tt(r,i)})),n=dn.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?c[0]?sl(c[0].x):ol(e):(e=c.length,function(l){for(var u=0,f;u<e;++u)a[(f=c[u]).i]=f.x(l);return a.join("")})}function an(t,e){var n=typeof e,r;return e==null||n==="boolean"?Bn(e):(n==="number"?Tt:n==="string"?(r=jt(e))?(e=r,Ze):zi:e instanceof jt?Ze:e instanceof Date?rl:el(e)?tl:Array.isArray(e)?nl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?il:Tt)(t,e)}function al(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Dr=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Oi(t,e,n,r,i,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),t*r<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Dr,skewX:Math.atan(c)*Dr,scaleX:s,scaleY:a}}var Re;function ll(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yn:Oi(e.a,e.b,e.c,e.d,e.e,e.f)}function ul(t){return t==null||(Re||(Re=document.createElementNS("http://www.w3.org/2000/svg","g")),Re.setAttribute("transform",t),!(t=Re.transform.baseVal.consolidate()))?Yn:(t=t.matrix,Oi(t.a,t.b,t.c,t.d,t.e,t.f))}function Li(t,e,n,r){function i(l){return l.length?l.pop()+" ":""}function o(l,u,f,h,g,w){if(l!==f||u!==h){var m=g.push("translate(",null,e,null,n);w.push({i:m-4,x:Tt(l,f)},{i:m-2,x:Tt(u,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function s(l,u,f,h){l!==u?(l-u>180?u+=360:u-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Tt(l,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(l,u,f,h){l!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Tt(l,u)}):u&&f.push(i(f)+"skewX("+u+r)}function c(l,u,f,h,g,w){if(l!==f||u!==h){var m=g.push(i(g)+"scale(",null,",",null,")");w.push({i:m-4,x:Tt(l,f)},{i:m-2,x:Tt(u,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(l,u){var f=[],h=[];return l=t(l),u=t(u),o(l.translateX,l.translateY,u.translateX,u.translateY,f,h),s(l.rotate,u.rotate,f,h),a(l.skewX,u.skewX,f,h),c(l.scaleX,l.scaleY,u.scaleX,u.scaleY,f,h),l=u=null,function(g){for(var w=-1,m=h.length,d;++w<m;)f[(d=h[w]).i]=d.x(g);return f.join("")}}}var cl=Li(ll,"px, ","px)","deg)"),fl=Li(ul,", ",")",")"),ce=0,_e=0,de=0,Wi=1e3,Ge,we,Qe=0,Zt=0,ln=0,$e=typeof performance=="object"&&performance.now?performance:Date,Xi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function jn(){return Zt||(Xi(hl),Zt=$e.now()+ln)}function hl(){Zt=0}function Ke(){this._call=this._time=this._next=null}Ke.prototype=Zn.prototype={constructor:Ke,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?jn():+n)+(e==null?0:+e),!this._next&&we!==this&&(we?we._next=this:Ge=this,we=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function Zn(t,e,n){var r=new Ke;return r.restart(t,e,n),r}function gl(){jn(),++ce;for(var t=Ge,e;t;)(e=Zt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ce}function Sr(){Zt=(Qe=$e.now())+ln,ce=_e=0;try{gl()}finally{ce=0,pl(),Zt=0}}function dl(){var t=$e.now(),e=t-Qe;e>Wi&&(ln-=e,Qe=t)}function pl(){for(var t,e=Ge,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ge=n);we=t,Rn(r)}function Rn(t){if(!ce){_e&&(_e=clearTimeout(_e));var e=t-Zt;e>24?(t<1/0&&(_e=setTimeout(Sr,t-$e.now()-ln)),de&&(de=clearInterval(de))):(de||(Qe=$e.now(),de=setInterval(dl,Wi)),ce=1,Xi(Sr))}}function Ur(t,e,n){var r=new Ke;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ml=on("start","end","cancel","interrupt"),yl=[],Vi=0,Er=1,Pn=2,Le=3,Ir=4,Hn=5,We=6;function un(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;vl(t,n,{name:e,index:r,group:i,on:ml,tween:yl,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Vi})}function Gn(t,e){var n=$t(t,e);if(n.state>Vi)throw new Error("too late; already scheduled");return n}function Ut(t,e){var n=$t(t,e);if(n.state>Le)throw new Error("too late; already running");return n}function $t(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vl(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Zn(o,0,n.time);function o(l){n.state=Er,n.timer.restart(s,n.delay,n.time),n.delay<=l&&s(l-n.delay)}function s(l){var u,f,h,g;if(n.state!==Er)return c();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Le)return Ur(s);g.state===Ir?(g.state=We,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=We,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(Ur(function(){n.state===Le&&(n.state=Ir,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Pn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Pn){for(n.state=Le,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function a(l){for(var u=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(c),n.state=Hn,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===Hn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=We,n.timer.stop(),delete r[e];for(var l in r)return;delete t.__transition}}function zn(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Pn&&r.state<Hn,r.state=We,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function _l(t){return this.each(function(){zn(this,t)})}function wl(t,e){var n,r;return function(){var i=Ut(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function xl(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Ut(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===e){i[c]=a;break}c===l&&i.push(a)}o.tween=i}}function bl(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=$t(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?wl:xl)(n,t,e))}function Qn(t,e,n){var r=t._id;return t.each(function(){var i=Ut(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return $t(i,r).value[e]}}function qi(t,e){var n;return(typeof e=="number"?Tt:e instanceof jt?Ze:(n=jt(e))?(e=n,Ze):zi)(t,e)}function Tl(t){return function(){this.removeAttribute(t)}}function Ml(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Cl(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Nl(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function Al(t,e,n){var r,i,o;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a)))}}function $l(t,e){var n=sn(t),r=n==="transform"?fl:qi;return this.attrTween(t,typeof e=="function"?(n.local?Al:Nl)(n,r,Qn(this,"attr."+t,e)):e==null?(n.local?Ml:Tl)(n):(n.local?Cl:kl)(n,r,e))}function Dl(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Sl(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ul(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Sl(t,o)),n}return i._value=e,i}function El(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Dl(t,o)),n}return i._value=e,i}function Il(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=sn(t);return this.tween(n,(r.local?Ul:El)(r,e))}function Fl(t,e){return function(){Gn(this,t).delay=+e.apply(this,arguments)}}function Yl(t,e){return e=+e,function(){Gn(this,t).delay=e}}function Rl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fl:Yl)(e,t)):$t(this.node(),e).delay}function Pl(t,e){return function(){Ut(this,t).duration=+e.apply(this,arguments)}}function Hl(t,e){return e=+e,function(){Ut(this,t).duration=e}}function zl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Pl:Hl)(e,t)):$t(this.node(),e).duration}function Ol(t,e){if(typeof e!="function")throw new Error;return function(){Ut(this,t).ease=e}}function Ll(t){var e=this._id;return arguments.length?this.each(Ol(e,t)):$t(this.node(),e).ease}function Wl(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ut(this,t).ease=n}}function Xl(t){if(typeof t!="function")throw new Error;return this.each(Wl(this._id,t))}function Vl(t){typeof t!="function"&&(t=Ni(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],c,l=0;l<s;++l)(c=o[l])&&t.call(c,c.__data__,l,o)&&a.push(c);return new Ht(r,this._parents,this._name,this._id)}function ql(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var c=e[a],l=n[a],u=c.length,f=s[a]=new Array(u),h,g=0;g<u;++g)(h=c[g]||l[g])&&(f[g]=h);for(;a<r;++a)s[a]=e[a];return new Ht(s,this._parents,this._name,this._id)}function Bl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function jl(t,e,n){var r,i,o=Bl(e)?Gn:Ut;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Zl(t,e){var n=this._id;return arguments.length<2?$t(this.node(),n).on.on(t):this.each(jl(n,t,e))}function Gl(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ql(){return this.on("end.remove",Gl(this._id))}function Kl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Xn(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],c=a.length,l=o[s]=new Array(c),u,f,h=0;h<c;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),l[h]=f,un(l[h],e,n,h,l,$t(u,n)));return new Ht(o,this._parents,e,n)}function Jl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ci(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var c=r[a],l=c.length,u,f=0;f<l;++f)if(u=c[f]){for(var h=t.call(u,u.__data__,f,c),g,w=$t(u,n),m=0,d=h.length;m<d;++m)(g=h[m])&&un(g,e,n,m,h,w);o.push(h),s.push(u)}return new Ht(o,s,e,n)}var tu=Se.prototype.constructor;function eu(){return new tu(this._groups,this._parents)}function nu(t,e){var n,r,i;return function(){var o=ue(this,t),s=(this.style.removeProperty(t),ue(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Bi(t){return function(){this.style.removeProperty(t)}}function ru(t,e,n){var r,i=n+"",o;return function(){var s=ue(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function iu(t,e,n){var r,i,o;return function(){var s=ue(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),ue(this,t))),s===c?null:s===r&&c===i?o:(i=c,o=e(r=s,a))}}function ou(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var c=Ut(this,t),l=c.on,u=c.value[o]==null?a||(a=Bi(e)):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(s,i=u),c.on=r}}function su(t,e,n){var r=(t+="")=="transform"?cl:qi;return e==null?this.styleTween(t,nu(t,r)).on("end.style."+t,Bi(t)):typeof e=="function"?this.styleTween(t,iu(t,r,Qn(this,"style."+t,e))).each(ou(this._id,t)):this.styleTween(t,ru(t,r,e),n).on("end.style."+t,null)}function au(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function lu(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&au(t,s,n)),r}return o._value=e,o}function uu(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,lu(t,e,n??""))}function cu(t){return function(){this.textContent=t}}function fu(t){return function(){var e=t(this);this.textContent=e??""}}function hu(t){return this.tween("text",typeof t=="function"?fu(Qn(this,"text",t)):cu(t==null?"":t+""))}function gu(t){return function(e){this.textContent=t.call(this,e)}}function du(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&gu(i)),e}return r._value=t,r}function pu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,du(t))}function mu(){for(var t=this._name,e=this._id,n=ji(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)if(c=s[l]){var u=$t(c,e);un(c,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ht(r,this._parents,t,n)}function yu(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},c={value:function(){--i===0&&o()}};n.each(function(){var l=Ut(this,r),u=l.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),l.on=e}),i===0&&o()})}var vu=0;function Ht(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ji(){return++vu}var Ft=Se.prototype;Ht.prototype={constructor:Ht,select:Kl,selectAll:Jl,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:Vl,merge:ql,selection:eu,transition:mu,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:Zl,attr:$l,attrTween:Il,style:su,styleTween:uu,text:hu,textTween:pu,remove:Ql,tween:bl,delay:Rl,duration:zl,ease:Ll,easeVarying:Xl,end:yu,[Symbol.iterator]:Ft[Symbol.iterator]};function _u(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var On=4/11,wu=6/11,xu=8/11,bu=3/4,Tu=9/11,Mu=10/11,ku=15/16,Cu=21/22,Nu=63/64,Pe=1/On/On;function Au(t){return(t=+t)<On?Pe*t*t:t<xu?Pe*(t-=wu)*t+bu:t<Mu?Pe*(t-=Tu)*t+ku:Pe*(t-=Cu)*t+Nu}var $u={time:null,delay:0,duration:250,ease:_u};function Du(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Su(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=ji(),(n=$u).time=jn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,c,l=0;l<a;++l)(c=s[l])&&un(c,t,e,l,s,n||Du(c,e));return new Ht(r,this._parents,t,e)}Se.prototype.interrupt=_l;Se.prototype.transition=Su;const pn=t=>()=>t;function Uu(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Eu(t){t.stopImmediatePropagation()}function mn(t){t.preventDefault(),t.stopImmediatePropagation()}var Fr={name:"drag"},yn={name:"space"},te={name:"handle"},ee={name:"center"};const{abs:Yr,max:st,min:at}=Math;function Rr(t){return[+t[0],+t[1]]}function Pr(t){return[Rr(t[0]),Rr(t[1])]}var Xe={name:"x",handles:["w","e"].map(Je),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},vn={name:"y",handles:["n","s"].map(Je),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Yt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},zr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Iu={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Fu={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Je(t){return{type:t}}function Yu(t){return!t.ctrlKey&&!t.button}function Ru(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Pu(){return navigator.maxTouchPoints||"ontouchstart"in this}function _n(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Hu(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function zu(){return Ou(Xe)}function Ou(t){var e=Ru,n=Yu,r=Pu,i=!0,o=on("start","brush","end"),s=6,a;function c(d){var y=d.property("__brush",m).selectAll(".overlay").data([Je("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Yt.overlay).merge(y).each(function(){var p=_n(this).extent;lt(this).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1])}),d.selectAll(".selection").data([Je("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Yt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=d.selectAll(".handle").data(t.handles,function(p){return p.type});v.exit().remove(),v.enter().append("rect").attr("class",function(p){return"handle handle--"+p.type}).attr("cursor",function(p){return Yt[p.type]}),d.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",g).on("touchend.brush touchcancel.brush",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(d,y,v){d.tween?d.on("start.brush",function(p){u(this,arguments).beforestart().start(p)}).on("interrupt.brush end.brush",function(p){u(this,arguments).end(p)}).tween("brush",function(){var p=this,x=p.__brush,_=u(p,arguments),T=x.selection,M=t.input(typeof y=="function"?y.apply(this,arguments):y,x.extent),C=an(T,M);function L(D){x.selection=D===1&&M===null?null:C(D),l.call(p),_.brush()}return T!==null&&M!==null?L:L(1)}):d.each(function(){var p=this,x=arguments,_=p.__brush,T=t.input(typeof y=="function"?y.apply(p,x):y,_.extent),M=u(p,x).beforestart();zn(p),_.selection=T===null?null:T,l.call(p),M.start(v).brush(v).end(v)})},c.clear=function(d,y){c.move(d,null,y)};function l(){var d=lt(this),y=_n(this).selection;y?(d.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),d.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-s/2:y[0][0]-s/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-s/2:y[0][1]-s/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+s:s}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+s:s})):d.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(d,y,v){var p=d.__brush.emitter;return p&&(!v||!p.clean)?p:new f(d,y,v)}function f(d,y,v){this.that=d,this.args=y,this.state=d.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(d,y){return this.starting?(this.starting=!1,this.emit("start",d,y)):this.emit("brush",d),this},brush:function(d,y){return this.emit("brush",d,y),this},end:function(d,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",d,y)),this},emit:function(d,y,v){var p=lt(this.that).datum();o.call(d,this.that,new Uu(d,{sourceEvent:y,target:c,selection:t.output(this.state.selection),mode:v,dispatch:o}),p)}};function h(d){if(a&&!d.touches||!n.apply(this,arguments))return;var y=this,v=d.target.__data__.type,p=(i&&d.metaKey?v="overlay":v)==="selection"?Fr:i&&d.altKey?ee:te,x=t===vn?null:Iu[v],_=t===Xe?null:Fu[v],T=_n(y),M=T.extent,C=T.selection,L=M[0][0],D,I,O=M[0][1],Y,tt,mt=M[1][0],et,G,gt=M[1][1],S,q,B=0,W=0,Lt,Et=x&&_&&i&&d.shiftKey,It,vt,Q=Array.from(d.touches||[d],U=>{const J=U.identifier;return U=xr(U,y),U.point0=U.slice(),U.identifier=J,U});zn(y);var Xt=u(y,arguments,!0).beforestart();if(v==="overlay"){C&&(Lt=!0);const U=[Q[0],Q[1]||Q[0]];T.selection=C=[[D=t===vn?L:at(U[0][0],U[1][0]),Y=t===Xe?O:at(U[0][1],U[1][1])],[et=t===vn?mt:st(U[0][0],U[1][0]),S=t===Xe?gt:st(U[0][1],U[1][1])]],Q.length>1&&K(d)}else D=C[0][0],Y=C[0][1],et=C[1][0],S=C[1][1];I=D,tt=Y,G=et,q=S;var $=lt(y).attr("pointer-events","none"),E=$.selectAll(".overlay").attr("cursor",Yt[v]);if(d.touches)Xt.moved=k,Xt.ended=X;else{var R=lt(d.view).on("mousemove.brush",k,!0).on("mouseup.brush",X,!0);i&&R.on("keydown.brush",ut,!0).on("keyup.brush",ct,!0),Ra(d.view)}l.call(y),Xt.start(d,p.name);function k(U){for(const J of U.changedTouches||[U])for(const ge of Q)ge.identifier===J.identifier&&(ge.cur=xr(J,y));if(Et&&!It&&!vt&&Q.length===1){const J=Q[0];Yr(J.cur[0]-J[0])>Yr(J.cur[1]-J[1])?vt=!0:It=!0}for(const J of Q)J.cur&&(J[0]=J.cur[0],J[1]=J.cur[1]);Lt=!0,mn(U),K(U)}function K(U){const J=Q[0],ge=J.point0;var Wt;switch(B=J[0]-ge[0],W=J[1]-ge[1],p){case yn:case Fr:{x&&(B=st(L-D,at(mt-et,B)),I=D+B,G=et+B),_&&(W=st(O-Y,at(gt-S,W)),tt=Y+W,q=S+W);break}case te:{Q[1]?(x&&(I=st(L,at(mt,Q[0][0])),G=st(L,at(mt,Q[1][0])),x=1),_&&(tt=st(O,at(gt,Q[0][1])),q=st(O,at(gt,Q[1][1])),_=1)):(x<0?(B=st(L-D,at(mt-D,B)),I=D+B,G=et):x>0&&(B=st(L-et,at(mt-et,B)),I=D,G=et+B),_<0?(W=st(O-Y,at(gt-Y,W)),tt=Y+W,q=S):_>0&&(W=st(O-S,at(gt-S,W)),tt=Y,q=S+W));break}case ee:{x&&(I=st(L,at(mt,D-B*x)),G=st(L,at(mt,et+B*x))),_&&(tt=st(O,at(gt,Y-W*_)),q=st(O,at(gt,S+W*_)));break}}G<I&&(x*=-1,Wt=D,D=et,et=Wt,Wt=I,I=G,G=Wt,v in Hr&&E.attr("cursor",Yt[v=Hr[v]])),q<tt&&(_*=-1,Wt=Y,Y=S,S=Wt,Wt=tt,tt=q,q=Wt,v in zr&&E.attr("cursor",Yt[v=zr[v]])),T.selection&&(C=T.selection),It&&(I=C[0][0],G=C[1][0]),vt&&(tt=C[0][1],q=C[1][1]),(C[0][0]!==I||C[0][1]!==tt||C[1][0]!==G||C[1][1]!==q)&&(T.selection=[[I,tt],[G,q]],l.call(y),Xt.brush(U,p.name))}function X(U){if(Eu(U),U.touches){if(U.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Pa(U.view,Lt),R.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);$.attr("pointer-events","all"),E.attr("cursor",Yt.overlay),T.selection&&(C=T.selection),Hu(C)&&(T.selection=null,l.call(y)),Xt.end(U,p.name)}function ut(U){switch(U.keyCode){case 16:{Et=x&&_;break}case 18:{p===te&&(x&&(et=G-B*x,D=I+B*x),_&&(S=q-W*_,Y=tt+W*_),p=ee,K(U));break}case 32:{(p===te||p===ee)&&(x<0?et=G-B:x>0&&(D=I-B),_<0?S=q-W:_>0&&(Y=tt-W),p=yn,E.attr("cursor",Yt.selection),K(U));break}default:return}mn(U)}function ct(U){switch(U.keyCode){case 16:{Et&&(It=vt=Et=!1,K(U));break}case 18:{p===ee&&(x<0?et=G:x>0&&(D=I),_<0?S=q:_>0&&(Y=tt),p=te,K(U));break}case 32:{p===yn&&(U.altKey?(x&&(et=G-B*x,D=I+B*x),_&&(S=q-W*_,Y=tt+W*_),p=ee):(x<0?et=G:x>0&&(D=I),_<0?S=q:_>0&&(Y=tt),p=te),E.attr("cursor",Yt[v]),K(U));break}default:return}mn(U)}}function g(d){u(this,arguments).moved(d)}function w(d){u(this,arguments).ended(d)}function m(){var d=this.__brush||{selection:null};return d.extent=Pr(e.apply(this,arguments)),d.dim=t,d}return c.extent=function(d){return arguments.length?(e=typeof d=="function"?d:pn(Pr(d)),c):e},c.filter=function(d){return arguments.length?(n=typeof d=="function"?d:pn(!!d),c):n},c.touchable=function(d){return arguments.length?(r=typeof d=="function"?d:pn(!!d),c):r},c.handleSize=function(d){return arguments.length?(s=+d,c):s},c.keyModifiers=function(d){return arguments.length?(i=!!d,c):i},c.on=function(){var d=o.on.apply(o,arguments);return d===o?c:d},c}var Or={},wn={},xn=34,pe=10,bn=13;function Zi(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Lu(t,e){var n=Zi(t);return function(r,i){return e(n(r),i,t)}}function Lr(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function dt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Wu(t){return t<0?"-"+dt(-t,6):t>9999?"+"+dt(t,6):dt(t,4)}function Xu(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Wu(t.getUTCFullYear())+"-"+dt(t.getUTCMonth()+1,2)+"-"+dt(t.getUTCDate(),2)+(i?"T"+dt(e,2)+":"+dt(n,2)+":"+dt(r,2)+"."+dt(i,3)+"Z":r?"T"+dt(e,2)+":"+dt(n,2)+":"+dt(r,2)+"Z":n||e?"T"+dt(e,2)+":"+dt(n,2)+"Z":"")}function Vu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var g,w,m=i(f,function(d,y){if(g)return g(d,y-1);w=d,g=h?Lu(d,h):Zi(d)});return m.columns=w||[],m}function i(f,h){var g=[],w=f.length,m=0,d=0,y,v=w<=0,p=!1;f.charCodeAt(w-1)===pe&&--w,f.charCodeAt(w-1)===bn&&--w;function x(){if(v)return wn;if(p)return p=!1,Or;var T,M=m,C;if(f.charCodeAt(M)===xn){for(;m++<w&&f.charCodeAt(m)!==xn||f.charCodeAt(++m)===xn;);return(T=m)>=w?v=!0:(C=f.charCodeAt(m++))===pe?p=!0:C===bn&&(p=!0,f.charCodeAt(m)===pe&&++m),f.slice(M+1,T-1).replace(/""/g,'"')}for(;m<w;){if((C=f.charCodeAt(T=m++))===pe)p=!0;else if(C===bn)p=!0,f.charCodeAt(m)===pe&&++m;else if(C!==n)continue;return f.slice(M,T)}return v=!0,f.slice(M,w)}for(;(y=x())!==wn;){for(var _=[];y!==Or&&y!==wn;)_.push(y),y=x();h&&(_=h(_,d++))==null||g.push(_)}return g}function o(f,h){return f.map(function(g){return h.map(function(w){return u(g[w])}).join(t)})}function s(f,h){return h==null&&(h=Lr(f)),[h.map(u).join(t)].concat(o(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Lr(f)),o(f,h).join(`
`)}function c(f){return f.map(l).join(`
`)}function l(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Xu(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:c,formatRow:l,formatValue:u}}var qu=Vu(","),Bu=qu.parse;function ju(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Zu(t,e){return fetch(t,e).then(ju)}function Gu(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zu(e,n).then(function(i){return t(i,r)})}}var Qu=Gu(Bu);function Ku(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Gi(this.cover(e,n),e,n,t)}function Gi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,s={data:r},a=t._x0,c=t._y0,l=t._x1,u=t._y1,f,h,g,w,m,d,y,v;if(!o)return t._root=s,t;for(;o.length;)if((m=e>=(f=(a+l)/2))?a=f:l=f,(d=n>=(h=(c+u)/2))?c=h:u=h,i=o,!(o=o[y=d<<1|m]))return i[y]=s,t;if(g=+t._x.call(null,o.data),w=+t._y.call(null,o.data),e===g&&n===w)return s.next=o,i?i[y]=s:t._root=s,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(m=e>=(f=(a+l)/2))?a=f:l=f,(d=n>=(h=(c+u)/2))?c=h:u=h;while((y=d<<1|m)===(v=(w>=h)<<1|g>=f));return i[v]=o,i[y]=s,t}function Ju(t){var e,n,r=t.length,i,o,s=new Array(r),a=new Array(r),c=1/0,l=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(s[n]=i,a[n]=o,i<c&&(c=i),i>u&&(u=i),o<l&&(l=o),o>f&&(f=o));if(c>u||l>f)return this;for(this.cover(c,l).cover(u,f),n=0;n<r;++n)Gi(this,s[n],a[n],t[n]);return this}function tc(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s=i-n||1,a=this._root,c,l;n>t||t>=i||r>e||e>=o;)switch(l=(e<r)<<1|t<n,c=new Array(4),c[l]=a,a=c,s*=2,l){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function ec(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function nc(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ft(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function rc(t,e,n){var r,i=this._x0,o=this._y0,s,a,c,l,u=this._x1,f=this._y1,h=[],g=this._root,w,m;for(g&&h.push(new ft(g,i,o,u,f)),n==null?n=1/0:(i=t-n,o=e-n,u=t+n,f=e+n,n*=n);w=h.pop();)if(!(!(g=w.node)||(s=w.x0)>u||(a=w.y0)>f||(c=w.x1)<i||(l=w.y1)<o))if(g.length){var d=(s+c)/2,y=(a+l)/2;h.push(new ft(g[3],d,y,c,l),new ft(g[2],s,y,d,l),new ft(g[1],d,a,c,y),new ft(g[0],s,a,d,y)),(m=(e>=y)<<1|t>=d)&&(w=h[h.length-1],h[h.length-1]=h[h.length-1-m],h[h.length-1-m]=w)}else{var v=t-+this._x.call(null,g.data),p=e-+this._y.call(null,g.data),x=v*v+p*p;if(x<n){var _=Math.sqrt(n=x);i=t-_,o=e-_,u=t+_,f=e+_,r=g.data}}return r}function ic(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,s=this._x0,a=this._y0,c=this._x1,l=this._y1,u,f,h,g,w,m,d,y;if(!n)return this;if(n.length)for(;;){if((w=u>=(h=(s+c)/2))?s=h:c=h,(m=f>=(g=(a+l)/2))?a=g:l=g,e=n,!(n=n[d=m<<1|w]))return this;if(!n.length)break;(e[d+1&3]||e[d+2&3]||e[d+3&3])&&(r=e,y=d)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[d]=o:delete e[d],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=o,this)}function oc(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function sc(){return this._root}function ac(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function lc(t){var e=[],n,r=this._root,i,o,s,a,c;for(r&&e.push(new ft(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,s=n.y0,a=n.x1,c=n.y1)&&r.length){var l=(o+a)/2,u=(s+c)/2;(i=r[3])&&e.push(new ft(i,l,u,a,c)),(i=r[2])&&e.push(new ft(i,o,u,l,c)),(i=r[1])&&e.push(new ft(i,l,s,a,u)),(i=r[0])&&e.push(new ft(i,o,s,l,u))}return this}function uc(t){var e=[],n=[],r;for(this._root&&e.push(new ft(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,c=r.x1,l=r.y1,u=(s+c)/2,f=(a+l)/2;(o=i[0])&&e.push(new ft(o,s,a,u,f)),(o=i[1])&&e.push(new ft(o,u,a,c,f)),(o=i[2])&&e.push(new ft(o,s,f,u,l)),(o=i[3])&&e.push(new ft(o,u,f,c,l))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function cc(t){return t[0]}function fc(t){return arguments.length?(this._x=t,this):this._x}function hc(t){return t[1]}function gc(t){return arguments.length?(this._y=t,this):this._y}function Qi(t,e,n){var r=new Kn(e??cc,n??hc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Kn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Wr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ht=Qi.prototype=Kn.prototype;ht.copy=function(){var t=new Kn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Wr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Wr(r));return t};ht.add=Ku;ht.addAll=Ju;ht.cover=tc;ht.data=ec;ht.extent=nc;ht.find=rc;ht.remove=ic;ht.removeAll=oc;ht.root=sc;ht.size=ac;ht.visit=lc;ht.visitAfter=uc;ht.x=fc;ht.y=gc;function Dt(t){return function(){return t}}function Xr(t){return(t()-.5)*1e-6}function dc(t){return t.x+t.vx}function pc(t){return t.y+t.vy}function Ki(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=Dt(t==null?1:+t));function s(){for(var l,u=e.length,f,h,g,w,m,d,y=0;y<o;++y)for(f=Qi(e,dc,pc).visitAfter(a),l=0;l<u;++l)h=e[l],m=n[h.index],d=m*m,g=h.x+h.vx,w=h.y+h.vy,f.visit(v);function v(p,x,_,T,M){var C=p.data,L=p.r,D=m+L;if(C){if(C.index>h.index){var I=g-C.x-C.vx,O=w-C.y-C.vy,Y=I*I+O*O;Y<D*D&&(I===0&&(I=Xr(r),Y+=I*I),O===0&&(O=Xr(r),Y+=O*O),Y=(D-(Y=Math.sqrt(Y)))/Y*i,h.vx+=(I*=Y)*(D=(L*=L)/(d+L)),h.vy+=(O*=Y)*D,C.vx-=I*(D=1-D),C.vy-=O*D)}return}return x>g+D||T<g-D||_>w+D||M<w-D}}function a(l){if(l.data)return l.r=n[l.data.index];for(var u=l.r=0;u<4;++u)l[u]&&l[u].r>l.r&&(l.r=l[u].r)}function c(){if(e){var l,u=e.length,f;for(n=new Array(u),l=0;l<u;++l)f=e[l],n[f.index]=+t(f,l,e)}}return s.initialize=function(l,u){e=l,r=u,c()},s.iterations=function(l){return arguments.length?(o=+l,s):o},s.strength=function(l){return arguments.length?(i=+l,s):i},s.radius=function(l){return arguments.length?(t=typeof l=="function"?l:Dt(+l),c(),s):t},s}const mc=1664525,yc=1013904223,Vr=4294967296;function vc(){let t=1;return()=>(t=(mc*t+yc)%Vr)/Vr}var _c=10,wc=Math.PI*(3-Math.sqrt(5));function Ji(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,c=Zn(f),l=on("tick","end"),u=vc();t==null&&(t=[]);function f(){h(),l.call("tick",e),n<r&&(c.stop(),l.call("end",e))}function h(m){var d,y=t.length,v;m===void 0&&(m=1);for(var p=0;p<m;++p)for(n+=(o-n)*i,a.forEach(function(x){x(n)}),d=0;d<y;++d)v=t[d],v.fx==null?v.x+=v.vx*=s:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=s:(v.y=v.fy,v.vy=0);return e}function g(){for(var m=0,d=t.length,y;m<d;++m){if(y=t[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=_c*Math.sqrt(.5+m),p=m*wc;y.x=v*Math.cos(p),y.y=v*Math.sin(p)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function w(m){return m.initialize&&m.initialize(t,u),m}return g(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(m){return arguments.length?(t=m,g(),a.forEach(w),e):t},alpha:function(m){return arguments.length?(n=+m,e):n},alphaMin:function(m){return arguments.length?(r=+m,e):r},alphaDecay:function(m){return arguments.length?(i=+m,e):+i},alphaTarget:function(m){return arguments.length?(o=+m,e):o},velocityDecay:function(m){return arguments.length?(s=1-m,e):1-s},randomSource:function(m){return arguments.length?(u=m,a.forEach(w),e):u},force:function(m,d){return arguments.length>1?(d==null?a.delete(m):a.set(m,w(d)),e):a.get(m)},find:function(m,d,y){var v=0,p=t.length,x,_,T,M,C;for(y==null?y=1/0:y*=y,v=0;v<p;++v)M=t[v],x=m-M.x,_=d-M.y,T=x*x+_*_,T<y&&(C=M,y=T);return C},on:function(m,d){return arguments.length>1?(l.on(m,d),e):l.on(m)}}}function to(t){var e=Dt(.1),n,r,i;typeof t!="function"&&(t=Dt(t==null?0:+t));function o(a){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vx+=(i[c]-u.x)*r[c]*a}function s(){if(n){var a,c=n.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(+a),s(),o):e},o.x=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(+a),s(),o):t},o}function eo(t){var e=Dt(.1),n,r,i;typeof t!="function"&&(t=Dt(t==null?0:+t));function o(a){for(var c=0,l=n.length,u;c<l;++c)u=n[c],u.vy+=(i[c]-u.y)*r[c]*a}function s(){if(n){var a,c=n.length;for(r=new Array(c),i=new Array(c),a=0;a<c;++a)r[a]=isNaN(i[a]=+t(n[a],a,n))?0:+e(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(e=typeof a=="function"?a:Dt(+a),s(),o):e},o.y=function(a){return arguments.length?(t=typeof a=="function"?a:Dt(+a),s(),o):t},o}function xc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function bc(t){return function(){return t}}function Tc(t){return+t}var qr=[0,1];function ie(t){return t}function Ln(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:bc(isNaN(e)?NaN:.5)}function Mc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function kc(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Ln(i,r),o=n(s,o)):(r=Ln(r,i),o=n(o,s)),function(a){return o(r(a))}}function Cc(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Ln(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var c=Fo(t,a,1,r)-1;return o[c](i[c](a))}}function Nc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ac(){var t=qr,e=qr,n=an,r,i,o,s=ie,a,c,l;function u(){var h=Math.min(t.length,e.length);return s!==ie&&(s=Mc(t[0],t[h-1])),a=h>2?Cc:kc,c=l=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=a(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((l||(l=a(e,t.map(r),Tt)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,Tc),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=al,u()},f.clamp=function(h){return arguments.length?(s=h?!0:ie,u()):s!==ie},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,g){return r=h,i=g,u()}}function $c(){return Ac()(ie,ie)}function Dc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Tn=new Date,Mn=new Date;function it(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(e(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const c=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return c;let l;do c.push(l=new Date(+o)),e(o,a),t(o);while(l<o&&o<s);return c},i.filter=o=>it(s=>{if(s>=s)for(;t(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;e(s,-1),!o(s););else for(;--a>=0;)for(;e(s,1),!o(s););}),n&&(i.count=(o,s)=>(Tn.setTime(+o),Mn.setTime(+s),t(Tn),t(Mn),Math.floor(n(Tn,Mn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const tn=it(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);tn.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?it(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):tn);tn.range;const Rt=1e3,wt=Rt*60,Pt=wt*60,zt=Pt*24,Jn=zt*7,Br=zt*30,kn=zt*365,oe=it(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Rt)},(t,e)=>(e-t)/Rt,t=>t.getUTCSeconds());oe.range;const tr=it(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rt)},(t,e)=>{t.setTime(+t+e*wt)},(t,e)=>(e-t)/wt,t=>t.getMinutes());tr.range;const Sc=it(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*wt)},(t,e)=>(e-t)/wt,t=>t.getUTCMinutes());Sc.range;const er=it(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Rt-t.getMinutes()*wt)},(t,e)=>{t.setTime(+t+e*Pt)},(t,e)=>(e-t)/Pt,t=>t.getHours());er.range;const Uc=it(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Pt)},(t,e)=>(e-t)/Pt,t=>t.getUTCHours());Uc.range;const Ee=it(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*wt)/zt,t=>t.getDate()-1);Ee.range;const nr=it(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zt,t=>t.getUTCDate()-1);nr.range;const Ec=it(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/zt,t=>Math.floor(t/zt));Ec.range;function Qt(t){return it(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*wt)/Jn)}const cn=Qt(0),en=Qt(1),Ic=Qt(2),Fc=Qt(3),fe=Qt(4),Yc=Qt(5),Rc=Qt(6);cn.range;en.range;Ic.range;Fc.range;fe.range;Yc.range;Rc.range;function Kt(t){return it(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Jn)}const no=Kt(0),nn=Kt(1),Pc=Kt(2),Hc=Kt(3),he=Kt(4),zc=Kt(5),Oc=Kt(6);no.range;nn.range;Pc.range;Hc.range;he.range;zc.range;Oc.range;const rr=it(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rr.range;const Lc=it(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Lc.range;const Ot=it(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ot.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:it(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ot.range;const Gt=it(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Gt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:it(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Gt.range;function Wc(t,e,n,r,i,o){const s=[[oe,1,Rt],[oe,5,5*Rt],[oe,15,15*Rt],[oe,30,30*Rt],[o,1,wt],[o,5,5*wt],[o,15,15*wt],[o,30,30*wt],[i,1,Pt],[i,3,3*Pt],[i,6,6*Pt],[i,12,12*Pt],[r,1,zt],[r,2,2*zt],[n,1,Jn],[e,1,Br],[e,3,3*Br],[t,1,kn]];function a(l,u,f){const h=u<l;h&&([l,u]=[u,l]);const g=f&&typeof f.range=="function"?f:c(l,u,f),w=g?g.range(l,+u+1):[];return h?w.reverse():w}function c(l,u,f){const h=Math.abs(u-l)/f,g=Wn(([,,d])=>d).right(s,h);if(g===s.length)return t.every(yr(l/kn,u/kn,f));if(g===0)return tn.every(Math.max(yr(l,u,f),1));const[w,m]=s[h/s[g-1][2]<s[g][2]/h?g-1:g];return w.every(m)}return[a,c]}const[Xc,Vc]=Wc(Ot,rr,cn,Ee,er,tr);function Cn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function me(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function qc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,a=t.months,c=t.shortMonths,l=ye(i),u=ve(i),f=ye(o),h=ve(o),g=ye(s),w=ve(s),m=ye(a),d=ve(a),y=ye(c),v=ve(c),p={a:G,A:gt,b:S,B:q,c:null,d:Jr,e:Jr,f:mf,g:Cf,G:Af,H:gf,I:df,j:pf,L:ro,m:yf,M:vf,p:B,q:W,Q:ni,s:ri,S:_f,u:wf,U:xf,V:bf,w:Tf,W:Mf,x:null,X:null,y:kf,Y:Nf,Z:$f,"%":ei},x={a:Lt,A:Et,b:It,B:vt,c:null,d:ti,e:ti,f:Ef,g:Wf,G:Vf,H:Df,I:Sf,j:Uf,L:oo,m:If,M:Ff,p:Q,q:Xt,Q:ni,s:ri,S:Yf,u:Rf,U:Pf,V:Hf,w:zf,W:Of,x:null,X:null,y:Lf,Y:Xf,Z:qf,"%":ei},_={a:D,A:I,b:O,B:Y,c:tt,d:Qr,e:Qr,f:uf,g:Gr,G:Zr,H:Kr,I:Kr,j:of,L:lf,m:rf,M:sf,p:L,q:nf,Q:ff,s:hf,S:af,u:Qc,U:Kc,V:Jc,w:Gc,W:tf,x:mt,X:et,y:Gr,Y:Zr,Z:ef,"%":cf};p.x=T(n,p),p.X=T(r,p),p.c=T(e,p),x.x=T(n,x),x.X=T(r,x),x.c=T(e,x);function T($,E){return function(R){var k=[],K=-1,X=0,ut=$.length,ct,U,J;for(R instanceof Date||(R=new Date(+R));++K<ut;)$.charCodeAt(K)===37&&(k.push($.slice(X,K)),(U=jr[ct=$.charAt(++K)])!=null?ct=$.charAt(++K):U=ct==="e"?" ":"0",(J=E[ct])&&(ct=J(R,U)),k.push(ct),X=K+1);return k.push($.slice(X,K)),k.join("")}}function M($,E){return function(R){var k=me(1900,void 0,1),K=C(k,$,R+="",0),X,ut;if(K!=R.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(E&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(X=Nn(me(k.y,0,1)),ut=X.getUTCDay(),X=ut>4||ut===0?nn.ceil(X):nn(X),X=nr.offset(X,(k.V-1)*7),k.y=X.getUTCFullYear(),k.m=X.getUTCMonth(),k.d=X.getUTCDate()+(k.w+6)%7):(X=Cn(me(k.y,0,1)),ut=X.getDay(),X=ut>4||ut===0?en.ceil(X):en(X),X=Ee.offset(X,(k.V-1)*7),k.y=X.getFullYear(),k.m=X.getMonth(),k.d=X.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),ut="Z"in k?Nn(me(k.y,0,1)).getUTCDay():Cn(me(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(ut+5)%7:k.w+k.U*7-(ut+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,Nn(k)):Cn(k)}}function C($,E,R,k){for(var K=0,X=E.length,ut=R.length,ct,U;K<X;){if(k>=ut)return-1;if(ct=E.charCodeAt(K++),ct===37){if(ct=E.charAt(K++),U=_[ct in jr?E.charAt(K++):ct],!U||(k=U($,R,k))<0)return-1}else if(ct!=R.charCodeAt(k++))return-1}return k}function L($,E,R){var k=l.exec(E.slice(R));return k?($.p=u.get(k[0].toLowerCase()),R+k[0].length):-1}function D($,E,R){var k=g.exec(E.slice(R));return k?($.w=w.get(k[0].toLowerCase()),R+k[0].length):-1}function I($,E,R){var k=f.exec(E.slice(R));return k?($.w=h.get(k[0].toLowerCase()),R+k[0].length):-1}function O($,E,R){var k=y.exec(E.slice(R));return k?($.m=v.get(k[0].toLowerCase()),R+k[0].length):-1}function Y($,E,R){var k=m.exec(E.slice(R));return k?($.m=d.get(k[0].toLowerCase()),R+k[0].length):-1}function tt($,E,R){return C($,e,E,R)}function mt($,E,R){return C($,n,E,R)}function et($,E,R){return C($,r,E,R)}function G($){return s[$.getDay()]}function gt($){return o[$.getDay()]}function S($){return c[$.getMonth()]}function q($){return a[$.getMonth()]}function B($){return i[+($.getHours()>=12)]}function W($){return 1+~~($.getMonth()/3)}function Lt($){return s[$.getUTCDay()]}function Et($){return o[$.getUTCDay()]}function It($){return c[$.getUTCMonth()]}function vt($){return a[$.getUTCMonth()]}function Q($){return i[+($.getUTCHours()>=12)]}function Xt($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var E=T($+="",p);return E.toString=function(){return $},E},parse:function($){var E=M($+="",!1);return E.toString=function(){return $},E},utcFormat:function($){var E=T($+="",x);return E.toString=function(){return $},E},utcParse:function($){var E=M($+="",!0);return E.toString=function(){return $},E}}}var jr={"-":"",_:" ",0:"0"},ot=/^\s*\d+/,Bc=/^%/,jc=/[\\^$*+?|[\]().{}]/g;function H(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Zc(t){return t.replace(jc,"\\$&")}function ye(t){return new RegExp("^(?:"+t.map(Zc).join("|")+")","i")}function ve(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Gc(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Qc(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Jc(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function tf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Zr(t,e,n){var r=ot.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Gr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ef(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function nf(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function rf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function of(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Kr(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function sf(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function af(t,e,n){var r=ot.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function lf(t,e,n){var r=ot.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function uf(t,e,n){var r=ot.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function cf(t,e,n){var r=Bc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ff(t,e,n){var r=ot.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function hf(t,e,n){var r=ot.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Jr(t,e){return H(t.getDate(),e,2)}function gf(t,e){return H(t.getHours(),e,2)}function df(t,e){return H(t.getHours()%12||12,e,2)}function pf(t,e){return H(1+Ee.count(Ot(t),t),e,3)}function ro(t,e){return H(t.getMilliseconds(),e,3)}function mf(t,e){return ro(t,e)+"000"}function yf(t,e){return H(t.getMonth()+1,e,2)}function vf(t,e){return H(t.getMinutes(),e,2)}function _f(t,e){return H(t.getSeconds(),e,2)}function wf(t){var e=t.getDay();return e===0?7:e}function xf(t,e){return H(cn.count(Ot(t)-1,t),e,2)}function io(t){var e=t.getDay();return e>=4||e===0?fe(t):fe.ceil(t)}function bf(t,e){return t=io(t),H(fe.count(Ot(t),t)+(Ot(t).getDay()===4),e,2)}function Tf(t){return t.getDay()}function Mf(t,e){return H(en.count(Ot(t)-1,t),e,2)}function kf(t,e){return H(t.getFullYear()%100,e,2)}function Cf(t,e){return t=io(t),H(t.getFullYear()%100,e,2)}function Nf(t,e){return H(t.getFullYear()%1e4,e,4)}function Af(t,e){var n=t.getDay();return t=n>=4||n===0?fe(t):fe.ceil(t),H(t.getFullYear()%1e4,e,4)}function $f(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+H(e/60|0,"0",2)+H(e%60,"0",2)}function ti(t,e){return H(t.getUTCDate(),e,2)}function Df(t,e){return H(t.getUTCHours(),e,2)}function Sf(t,e){return H(t.getUTCHours()%12||12,e,2)}function Uf(t,e){return H(1+nr.count(Gt(t),t),e,3)}function oo(t,e){return H(t.getUTCMilliseconds(),e,3)}function Ef(t,e){return oo(t,e)+"000"}function If(t,e){return H(t.getUTCMonth()+1,e,2)}function Ff(t,e){return H(t.getUTCMinutes(),e,2)}function Yf(t,e){return H(t.getUTCSeconds(),e,2)}function Rf(t){var e=t.getUTCDay();return e===0?7:e}function Pf(t,e){return H(no.count(Gt(t)-1,t),e,2)}function so(t){var e=t.getUTCDay();return e>=4||e===0?he(t):he.ceil(t)}function Hf(t,e){return t=so(t),H(he.count(Gt(t),t)+(Gt(t).getUTCDay()===4),e,2)}function zf(t){return t.getUTCDay()}function Of(t,e){return H(nn.count(Gt(t)-1,t),e,2)}function Lf(t,e){return H(t.getUTCFullYear()%100,e,2)}function Wf(t,e){return t=so(t),H(t.getUTCFullYear()%100,e,2)}function Xf(t,e){return H(t.getUTCFullYear()%1e4,e,4)}function Vf(t,e){var n=t.getUTCDay();return t=n>=4||n===0?he(t):he.ceil(t),H(t.getUTCFullYear()%1e4,e,4)}function qf(){return"+0000"}function ei(){return"%"}function ni(t){return+t}function ri(t){return Math.floor(+t/1e3)}var ne,ir;Bf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bf(t){return ne=qc(t),ir=ne.format,ne.parse,ne.utcFormat,ne.utcParse,ne}function jf(t){return new Date(t)}function Zf(t){return t instanceof Date?+t:+new Date(+t)}function ao(t,e,n,r,i,o,s,a,c,l){var u=$c(),f=u.invert,h=u.domain,g=l(".%L"),w=l(":%S"),m=l("%I:%M"),d=l("%I %p"),y=l("%a %d"),v=l("%b %d"),p=l("%B"),x=l("%Y");function _(T){return(c(T)<T?g:a(T)<T?w:s(T)<T?m:o(T)<T?d:r(T)<T?i(T)<T?y:v:n(T)<T?p:x)(T)}return u.invert=function(T){return new Date(f(T))},u.domain=function(T){return arguments.length?h(Array.from(T,Zf)):h().map(jf)},u.ticks=function(T){var M=h();return t(M[0],M[M.length-1],T??10)},u.tickFormat=function(T,M){return M==null?_:l(M)},u.nice=function(T){var M=h();return(!T||typeof T.range!="function")&&(T=e(M[0],M[M.length-1],T??10)),T?h(Dc(M,T)):u},u.copy=function(){return Nc(u,ao(t,e,n,r,i,o,s,a,c,l))},u}function Gf(){return xc.apply(ao(Xc,Vc,Ot,rr,cn,Ee,er,tr,oe,ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xe(t,e,n){this.k=t,this.x=e,this.y=n}xe.prototype={constructor:xe,scale:function(t){return t===1?this:new xe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xe.prototype;function Qf(t){let e,n,r;return{c(){e=A("div"),n=vi("svg"),N(n,"class","svelte-1ymucs0"),N(e,"class","beeswarm svelte-1ymucs0"),Me(()=>t[7].call(e))},m(i,o){z(i,e,o),b(e,n),t[6](n),r=wi(e,t[7].bind(e))},p:Z,i:Z,o:Z,d(i){i&&P(e),t[6](null),r()}}}function Kf(t,e,n){let r,{data:i}=e,{selectedIndicator:o}=e;const s=bi();let a,c,l,u=null,f;function h(){if(!a||!c||!l||!(r!=null&&r.length))return;const m={top:20,right:20,bottom:30,left:40},d=c-m.left-m.right,y=l-m.top-m.bottom;lt(a).selectAll("*").remove();const v=lt(a).append("g").attr("transform",`translate(${m.left},${m.top})`);f||(f=lt("body").append("div").attr("class","timeline-tooltip").style("opacity",0).style("position","absolute").style("pointer-events","none"));const p=+Vo(r,S=>S.year),x=+Xo(r,S=>S.year),_=Gf().domain([new Date(1983,0),new Date(2025,0)]).range([0,d]),T=r.map(S=>({id:Math.random(),fx:_(new Date(S.year,0)),y:y/2,year:S.year,country:S.country,region:S.region,indicator:S.indicator,value:S.value,color:S.color})),M=Ji(T).force("y",eo(y/2).strength(.1)).force("collide",Ki().radius(6).strength(1)).force("x",to(S=>S.fx).strength(1)).stop();for(let S=0;S<300;++S)M.tick();const C=v.append("g").attr("class","points");C.selectAll("circle").data(T).join("circle").attr("cx",S=>S.fx).attr("cy",y).attr("r",0).attr("fill",S=>S.color).attr("stroke","none").transition().duration(1500).ease(Au).attr("cy",S=>S.y).attr("r",5).on("end",function(){lt(this).on("mouseover",L).on("mousemove",D).on("mouseout",I).on("click",O)});function L(S,q){f.transition().duration(200).style("opacity",1),f.html(`
            <strong>${q.country}</strong><br/>
            <p class=timeline-region>${q.region}</p>
        `).style("left",S.pageX+10+"px").style("top",S.pageY-28+"px")}function D(S){f.style("left",S.pageX+10+"px").style("top",S.pageY-28+"px")}function I(){f.transition().duration(500).style("opacity",0)}function O(S,q){const B=_(new Date(1985,0))-_(new Date(1984,0)),W=q.fx;u.move(gt,[W-B/2,W+B/2])}const tt=qo(1984,x+1,5).map(S=>new Date(S,0));v.append("g").attr("transform",`translate(0,${y})`).call(ts(_).tickValues(tt).tickFormat(ir("%Y")));const mt=_(new Date(1985,0))-_(new Date(1984,0));function et(S){var It;if(!S.selection)return;const[q,B]=S.selection,W=r.filter(vt=>{const Q=_(new Date(vt.year,0));return Q>=q&&Q<=B}),Lt=((It=W[0])==null?void 0:It.year)||null,Et=W||[];console.log("Dispatching yearSelect:",{year:Lt,events:Et}),C.selectAll("circle").data(T).attr("stroke",vt=>W.find(Q=>Q.year===vt.year)?"#000":"none").attr("stroke-width",vt=>W.find(Q=>Q.year===vt.year)?2:0),s("yearSelect",{year:Lt,events:Et})}const G=_(new Date(p,0)),gt=v.append("g").attr("class","brush");u=zu().extent([[0,0],[d,y]]).on("brush",et),gt.call(u),G&&u.move(gt,[G-mt/2,G+mt/2])}rn(()=>{(r==null?void 0:r.length)>0&&h()});function g(m){Ve[m?"unshift":"push"](()=>{a=m,n(0,a)})}function w(){c=this.clientWidth,l=this.clientHeight,n(1,c),n(2,l)}return t.$$set=m=>{"data"in m&&n(3,i=m.data),"selectedIndicator"in m&&n(4,o=m.selectedIndicator)},t.$$.update=()=>{t.$$.dirty&24&&n(5,r=i.filter(m=>(console.log("Checking indicator match:",{dataIndicator:m.indicator,selectedIndicator:o,matches:m.indicator===o}),m.indicator===o)).map(m=>({...m,year:+m.year<1984?1984:+m.year})).filter(m=>!isNaN(m.year))),t.$$.dirty&32&&(r==null?void 0:r.length)>0&&h()},[a,c,l,i,o,r,g,w]}class Jf extends At{constructor(e){super(),Nt(this,e,Kf,Qf,Ct,{data:3,selectedIndicator:4})}}function ii(t,e,n){const r=t.slice();return r[3]=e[n][0],r[4]=e[n][1],r}function oi(t,e,n){const r=t.slice();return r[7]=e[n],r}function th(t){let e;return{c(){e=A("div"),e.innerHTML="<p>Hover over the points above to see details</p>",N(e,"class","placeholder")},m(n,r){z(n,e,r)},p:Z,d(n){n&&P(e)}}}function eh(t){let e,n,r,i,o,s,a=_t([...t[2]]),c=[];for(let l=0;l<a.length;l+=1)c[l]=ai(ii(t,a,l));return{c(){e=A("div"),n=A("h3"),r=V(t[1]),i=V(" Milestones"),o=F(),s=A("div");for(let l=0;l<c.length;l+=1)c[l].c();N(n,"class","svelte-1mxnad2"),N(s,"class","events-grid"),N(e,"class","timeline-details")},m(l,u){z(l,e,u),b(e,n),b(n,r),b(n,i),b(e,o),b(e,s);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(s,null)},p(l,u){if(u&2&&rt(r,l[1]),u&4){a=_t([...l[2]]);let f;for(f=0;f<a.length;f+=1){const h=ii(l,a,f);c[f]?c[f].p(h,u):(c[f]=ai(h),c[f].c(),c[f].m(s,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=a.length}},d(l){l&&P(e),le(c,l)}}}function si(t){let e,n,r=t[7].country+"",i,o,s,a=t[7].indicator+"",c,l,u,f=t[7].value==="Yes"?"Full Implementation":"Partial Implementation",h,g;return{c(){e=A("li"),n=A("span"),i=V(r),o=F(),s=A("span"),c=V(a),l=F(),u=A("span"),h=V(f),g=F(),N(n,"class","country svelte-1mxnad2"),N(s,"class","indicator svelte-1mxnad2"),N(u,"class","status svelte-1mxnad2"),lr(u,"partial",t[7].value==="Partially"),N(e,"class","svelte-1mxnad2")},m(w,m){z(w,e,m),b(e,n),b(n,i),b(e,o),b(e,s),b(s,c),b(e,l),b(e,u),b(u,h),b(e,g)},p(w,m){m&4&&r!==(r=w[7].country+"")&&rt(i,r),m&4&&a!==(a=w[7].indicator+"")&&rt(c,a),m&4&&f!==(f=w[7].value==="Yes"?"Full Implementation":"Partial Implementation")&&rt(h,f),m&4&&lr(u,"partial",w[7].value==="Partially")},d(w){w&&P(e)}}}function ai(t){let e,n,r=t[3]+"",i,o,s,a,c=_t(t[4]),l=[];for(let u=0;u<c.length;u+=1)l[u]=si(oi(t,c,u));return{c(){e=A("div"),n=A("h4"),i=V(r),o=F(),s=A("ul");for(let u=0;u<l.length;u+=1)l[u].c();a=F(),N(n,"class","svelte-1mxnad2"),N(s,"class","country-grid svelte-1mxnad2"),N(e,"class","region-group")},m(u,f){z(u,e,f),b(e,n),b(n,i),b(e,o),b(e,s);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(s,null);b(e,a)},p(u,f){if(f&4&&r!==(r=u[3]+"")&&rt(i,r),f&4){c=_t(u[4]);let h;for(h=0;h<c.length;h+=1){const g=oi(u,c,h);l[h]?l[h].p(g,f):(l[h]=si(g),l[h].c(),l[h].m(s,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=c.length}},d(u){u&&P(e),le(l,u)}}}function nh(t){let e;function n(o,s){return o[1]&&o[0].length>0?eh:th}let r=n(t),i=r(t);return{c(){i.c(),e=_i()},m(o,s){i.m(o,s),z(o,e,s)},p(o,[s]){r===(r=n(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},i:Z,o:Z,d(o){o&&P(e),i.d(o)}}}function rh(t,e,n){let r,{events:i=[]}=e,{year:o=null}=e;return t.$$set=s=>{"events"in s&&n(0,i=s.events),"year"in s&&n(1,o=s.year)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=Dn(i,s=>s.region))},[i,o,r]}class ih extends At{constructor(e){super(),Nt(this,e,rh,nh,Ct,{events:0,year:1})}}function li(t,e,n){const r=t.slice();return r[4]=e[n],r}function ui(t){let e,n=t[4]+"",r,i;return{c(){e=A("option"),r=V(n),e.__value=i=t[4],sr(e,e.__value)},m(o,s){z(o,e,s),b(e,r)},p(o,s){s&1&&n!==(n=o[4]+"")&&rt(r,n),s&1&&i!==(i=o[4])&&(e.__value=i,sr(e,e.__value))},d(o){o&&P(e)}}}function oh(t){let e,n,r,i,o,s,a=_t(t[0]),c=[];for(let l=0;l<a.length;l+=1)c[l]=ui(li(t,a,l));return{c(){e=A("div"),n=A("label"),n.textContent="Select Indicator:",r=F(),i=A("select");for(let l=0;l<c.length;l+=1)c[l].c();N(n,"for","indicator"),N(n,"class","svelte-o395lv"),N(i,"id","indicator"),N(i,"class","svelte-o395lv"),N(e,"class","selector svelte-o395lv")},m(l,u){z(l,e,u),b(e,n),b(e,r),b(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null);ar(i,t[1]),o||(s=An(i,"change",t[2]),o=!0)},p(l,[u]){if(u&1){a=_t(l[0]);let f;for(f=0;f<a.length;f+=1){const h=li(l,a,f);c[f]?c[f].p(h,u):(c[f]=ui(h),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=a.length}u&3&&ar(i,l[1])},i:Z,o:Z,d(l){l&&P(e),le(c,l),o=!1,s()}}}function sh(t,e,n){const r=bi();let{indicators:i=["Ratification of the UN Convention against Torture","Ratification of Optional Protocol (OPCAT)","Submission of initial report to CAT","Prohibition of torture in the constitution","Criminalisation of torture under domestic law","Designation of the National Preventive Mechanism (in law)","Operationality of the National Preventive Mechanism","Existence of National Human Rights Institution that fully complies with Paris Principles"].map(a=>a.trim())}=e,o=i[0];rn(()=>{r("select",{indicator:o})});function s(a){n(1,o=a.target.value),r("select",{indicator:o})}return t.$$set=a=>{"indicators"in a&&n(0,i=a.indicators)},[i,o,s]}class lo extends At{constructor(e){super(),Nt(this,e,sh,oh,Ct,{indicators:0})}}function ci(t){let e,n,r,i,o;n=new Jf({props:{data:t[3],selectedIndicator:t[0]}}),n.$on("yearSelect",t[5]);let s=t[1]&&fi(t);return{c(){e=A("div"),kt(n.$$.fragment),r=F(),s&&s.c(),i=_i(),N(e,"class","beeswarm-container svelte-1j4gyne")},m(a,c){z(a,e,c),xt(n,e,null),z(a,r,c),s&&s.m(a,c),z(a,i,c),o=!0},p(a,c){const l={};c&8&&(l.data=a[3]),c&1&&(l.selectedIndicator=a[0]),n.$set(l),a[1]?s?(s.p(a,c),c&2&&j(s,1)):(s=fi(a),s.c(),j(s,1),s.m(i.parentNode,i)):s&&(ke(),nt(s,1,1,()=>{s=null}),Ce())},i(a){o||(j(n.$$.fragment,a),j(s),o=!0)},o(a){nt(n.$$.fragment,a),nt(s),o=!1},d(a){a&&(P(e),P(r),P(i)),bt(n),s&&s.d(a)}}}function fi(t){let e,n,r;return n=new ih({props:{events:t[2],year:t[1]}}),{c(){e=A("div"),kt(n.$$.fragment),N(e,"class","details-container svelte-1j4gyne")},m(i,o){z(i,e,o),xt(n,e,null),r=!0},p(i,o){const s={};o&4&&(s.events=i[2]),o&2&&(s.year=i[1]),n.$set(s)},i(i){r||(j(n.$$.fragment,i),r=!0)},o(i){nt(n.$$.fragment,i),r=!1},d(i){i&&P(e),bt(n)}}}function ah(t){let e,n,r,i,o,s,a,c,l,u;s=new lo({}),s.$on("select",t[4]);let f=t[0]&&ci(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Progress Timeline",r=F(),i=A("p"),i.innerHTML=`Explore how countries have adopted various torture prevention measures over time. 
      Each dot represents a country and highlights a milestone in implementing anti-torture mechanisms. 
      For most indicators, progress is marked as <span class="text-label full svelte-1j4gyne">Yes (fully implemented)</span>. However, for &#39;Criminalisation of torture under domestic law,&#39; progress can be categorized as <span class="text-label full svelte-1j4gyne">Full</span> or <span class="text-label partial svelte-1j4gyne">Partial</span>.`,o=F(),kt(s.$$.fragment),a=F(),c=A("p"),c.textContent="Drag the brush below or click on any of the circle to explore details about countries that implemented the selected indicator.",l=F(),f&&f.c(),N(n,"class","svelte-1j4gyne"),N(i,"class","description svelte-1j4gyne"),N(c,"class","interaction-note svelte-1j4gyne"),N(e,"class","timeline-section svelte-1j4gyne")},m(h,g){z(h,e,g),b(e,n),b(e,r),b(e,i),b(e,o),xt(s,e,null),b(e,a),b(e,c),b(e,l),f&&f.m(e,null),u=!0},p(h,[g]){h[0]?f?(f.p(h,g),g&1&&j(f,1)):(f=ci(h),f.c(),j(f,1),f.m(e,null)):f&&(ke(),nt(f,1,1,()=>{f=null}),Ce())},i(h){u||(j(s.$$.fragment,h),j(f),u=!0)},o(h){nt(s.$$.fragment,h),nt(f),u=!1},d(h){h&&P(e),bt(s),f&&f.d()}}}function lh(t,e,n){let r,{data:i}=e,o="Ratification of the UN Convention against Torture",s=null,a=[];function c(u){n(0,o=u.detail.indicator),n(1,s=null),n(2,a=[])}function l(u){n(1,s=u.detail.year),n(2,a=u.detail.events||[])}return t.$$set=u=>{"data"in u&&n(6,i=u.data)},t.$$.update=()=>{t.$$.dirty&64&&n(3,r=i.map(u=>({year:+u.Date,country:u.Country,region:u.Region,indicator:u.Indicator.trim(),value:u.Input,color:u.Input==="Yes"?"var(--color-primary)":"var(--color-primary-light)"})).filter(u=>u.value==="Yes"||u.value==="Partially"))},[o,s,a,r,c,l,i]}class uh extends At{constructor(e){super(),Nt(this,e,lh,ah,Ct,{data:6})}}function ch(t){let e,n,r,i,o;return{c(){e=A("div"),n=vi("svg"),i=F(),o=A("div"),N(n,"class","svelte-xz2ppn"),N(e,"class","circles-viz svelte-xz2ppn"),Me(()=>t[5].call(e)),N(o,"id","tooltip"),N(o,"class","tooltip hidden svelte-xz2ppn")},m(s,a){z(s,e,a),b(e,n),t[4](n),r=wi(e,t[5].bind(e)),z(s,i,a),z(s,o,a)},p:Z,i:Z,o:Z,d(s){s&&(P(e),P(i),P(o)),t[4](null),r()}}}function fh(t,e,n){let{processedData:r}=e,i,o,s;function a(){if(!i||!o||!s||!(r!=null&&r.length))return;const u={top:30,right:50,bottom:50,left:50},f=o-u.left-u.right,h=s-u.top-u.bottom;lt(i).selectAll("*").remove();const g=lt(i).append("g").attr("transform",`translate(${u.left},${u.top})`),w=Math.min(20,Math.floor(f/(Math.sqrt(r.length)*3))),m={x:[w,f-w],y:[w,h-w]},d=[...new Set(r.map(M=>M.region))];console.log("Unique Regions:",d);const y={};d.forEach((M,C)=>{y[M]={x:f*(.2+.7*C/Math.max(1,d.length-1)),y:h*.5}}),console.log("Region Centers:",y);const v=Ji(r).force("x",to(f/2).strength(.1)).force("y",eo(h/2).strength(.1)).force("collide",Ki().radius(w+5).strength(.5)).force("cluster",_()).force("bounds",T(m)).on("tick",()=>{p.attr("transform",M=>{const C=(Math.random()-.5)*.5;return`translate(${M.x+C},${M.y+C})`})});for(let M=0;M<300;++M)v.tick();const p=g.selectAll("g").data(r).join("g").attr("transform",M=>`translate(${f/2},${h/2})`);p.transition().duration(1e3).delay((M,C)=>C*50).attr("transform",M=>`translate(${M.x},${M.y})`),setTimeout(()=>{v.stop()},1e3+r.length*50),p.append("circle").attr("r",0).attr("fill","white").attr("stroke",M=>M.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)").attr("stroke-width",3).transition().duration(500).delay((M,C)=>C*50).attr("r",w),p.append("image").attr("x",-w*.7).attr("y",-w*.7).attr("width",w*1.4).attr("height",w*1.4).attr("xlink:href",M=>`/APT-torture/images/${M.iso2}.svg`).attr("preserveAspectRatio","xMidYMid meet").style("opacity",0).transition().duration(500).delay((M,C)=>C*50).style("opacity",1);const x=lt("#tooltip");p.on("mouseover",(M,C)=>{x.style("--tooltip-color",C.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)"),x.html(`
            <div class="tooltip-content">
                <div class="section">
                    <div class="title">${C.country} | ${C.iso2.toUpperCase()}</div>
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <img src="/APT-torture/images/${C.iso2}.svg" alt="${C.country}" class="country-flag" />
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <div class="label">Region</div>
                    <div class="region-value">${C.region}</div>
                    <div class="indicator">${C.indicator}</div>
                    <div class="tooltip-status">${C.value==="Yes"?"Full Implemention":"Partial Implemention"}</div>
                    <div class="date-value">${Math.floor(C.date)}</div>
                </div>
            </div>
        `).style("left",`${M.pageX+10}px`).style("top",`${M.pageY-50}px`).classed("hidden",!1),lt(M.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1.3)`)}).on("mousemove",M=>{x.style("left",`${M.pageX+10}px`).style("top",`${M.pageY-50}px`)}).on("mouseout",(M,C)=>{x.classed("hidden",!0),lt(M.currentTarget).transition().duration(200).attr("transform",`translate(${C.x},${C.y}) scale(1)`)});function _(M=.5){return function(L){r.forEach(D=>{const I=y[D.region];if(!I){console.warn(`Region "${D.region}" not found in centers.`);return}D.vx+=(I.x-D.x)*M*L,D.vy+=(I.y-D.y)*M*L})}}function T(M){return function(L){r.forEach(D=>{D.x<M.x[0]&&(D.x=M.x[0]),D.x>M.x[1]&&(D.x=M.x[1]),D.y<M.y[0]&&(D.y=M.y[0]),D.y>M.y[1]&&(D.y=M.y[1])})}}}rn(()=>{r&&a()});function c(u){Ve[u?"unshift":"push"](()=>{i=u,n(0,i)})}function l(){o=this.clientWidth,s=this.clientHeight,n(1,o),n(2,s),n(3,r)}return t.$$set=u=>{"processedData"in u&&n(3,r=u.processedData)},t.$$.update=()=>{if(t.$$.dirty&8){const h=Math.ceil(Math.sqrt((r==null?void 0:r.length)||1))*40;n(2,s=Math.max(700,h*1))}t.$$.dirty&8&&r&&a()},[i,o,s,r,c,l]}class hh extends At{constructor(e){super(),Nt(this,e,fh,ch,Ct,{processedData:3})}}function hi(t,e,n){const r=t.slice();return r[3]=e[n],r}function gi(t){let e,n,r=t[3].region+"",i,o,s,a=t[3].percentage+"",c,l,u,f,h,g,w=t[3].implemented+"",m,d,y,v,p=t[3].partial+"",x,_;return{c(){e=A("div"),n=A("h3"),i=V(r),o=F(),s=A("div"),c=V(a),l=V("%"),u=F(),f=A("div"),h=A("span"),g=V("Full: "),m=V(w),d=F(),y=A("span"),v=V("Partial: "),x=V(p),_=F(),N(n,"class","svelte-1tdfzl5"),N(s,"class","percentage svelte-1tdfzl5"),N(h,"class","implemented svelte-1tdfzl5"),N(y,"class","partial svelte-1tdfzl5"),N(f,"class","details svelte-1tdfzl5"),N(e,"class","region-card svelte-1tdfzl5")},m(T,M){z(T,e,M),b(e,n),b(n,i),b(e,o),b(e,s),b(s,c),b(s,l),b(e,u),b(e,f),b(f,h),b(h,g),b(h,m),b(f,d),b(f,y),b(y,v),b(y,x),b(e,_)},p(T,M){M&1&&r!==(r=T[3].region+"")&&rt(i,r),M&1&&a!==(a=T[3].percentage+"")&&rt(c,a),M&1&&w!==(w=T[3].implemented+"")&&rt(m,w),M&1&&p!==(p=T[3].partial+"")&&rt(x,p)},d(T){T&&P(e)}}}function gh(t){let e,n,r,i,o=_t(t[0]),s=[];for(let a=0;a<o.length;a+=1)s[a]=gi(hi(t,o,a));return{c(){e=A("div"),n=A("h2"),n.textContent="Regional Progress",r=F(),i=A("div");for(let a=0;a<s.length;a+=1)s[a].c();N(n,"class","svelte-1tdfzl5"),N(i,"class","regions-list svelte-1tdfzl5"),N(e,"class","regional-breakdown svelte-1tdfzl5")},m(a,c){z(a,e,c),b(e,n),b(e,r),b(e,i);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(i,null)},p(a,[c]){if(c&1){o=_t(a[0]);let l;for(l=0;l<o.length;l+=1){const u=hi(a,o,l);s[l]?s[l].p(u,c):(s[l]=gi(u),s[l].c(),s[l].m(i,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=o.length}},i:Z,o:Z,d(a){a&&P(e),le(s,a)}}}function dh(t,e,n){let r,{regionalData:i}=e,{processedRegionalData:o}=e;return t.$$set=s=>{"regionalData"in s&&n(1,i=s.regionalData),"processedRegionalData"in s&&n(2,o=s.processedRegionalData)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=[...i].map(([s,a])=>{const c=o.get(s)||[];return{region:s,total:a.length,implemented:c.filter(l=>l.value==="Yes").length,partial:c.filter(l=>l.value==="Partially").length,percentage:(c.length/a.length*100).toFixed(1)}}).sort((s,a)=>parseFloat(a.percentage)-parseFloat(s.percentage)))},[r,i,o]}class ph extends At{constructor(e){super(),Nt(this,e,dh,gh,Ct,{regionalData:1,processedRegionalData:2})}}function di(t){let e,n,r,i,o=t[4].percentage+"",s,a,c,l,u,f,h,g,w,m,d,y;return g=new hh({props:{processedData:t[1]}}),d=new ph({props:{regionalData:t[3],processedRegionalData:t[2]}}),{c(){e=A("div"),n=A("h4"),n.textContent="Global Implementation",r=F(),i=A("div"),s=V(o),a=V("%"),c=F(),l=A("p"),l.textContent="of countries have implemented or partially implemented this measure",u=F(),f=A("div"),h=A("div"),kt(g.$$.fragment),w=F(),m=A("div"),kt(d.$$.fragment),N(n,"class","svelte-jdjhuu"),N(i,"class","stats-number svelte-jdjhuu"),N(l,"class","stats-detail svelte-jdjhuu"),N(e,"class","global-stats svelte-jdjhuu"),N(h,"class","circles-container svelte-jdjhuu"),N(m,"class","breakdown-container svelte-jdjhuu"),N(f,"class","visualization-container svelte-jdjhuu")},m(v,p){z(v,e,p),b(e,n),b(e,r),b(e,i),b(i,s),b(i,a),b(e,c),b(e,l),z(v,u,p),z(v,f,p),b(f,h),xt(g,h,null),b(f,w),b(f,m),xt(d,m,null),y=!0},p(v,p){(!y||p&16)&&o!==(o=v[4].percentage+"")&&rt(s,o);const x={};p&2&&(x.processedData=v[1]),g.$set(x);const _={};p&8&&(_.regionalData=v[3]),p&4&&(_.processedRegionalData=v[2]),d.$set(_)},i(v){y||(j(g.$$.fragment,v),j(d.$$.fragment,v),y=!0)},o(v){nt(g.$$.fragment,v),nt(d.$$.fragment,v),y=!1},d(v){v&&(P(e),P(u),P(f)),bt(g),bt(d)}}}function mh(t){let e,n,r,i,o,s,a,c,l;a=new lo({}),a.$on("select",t[5]);let u=t[0]&&di(t);return{c(){e=A("section"),n=A("h2"),n.textContent="Implementation Status Overview",r=F(),i=A("p"),i.textContent=`Explore the global and regional progress of countries implementing key anti-torture mechanisms. \r
        The visualizations below provide insights into the distribution and extent of implementation for the selected indicator, highlighting successes and areas for improvement.`,o=F(),s=A("div"),kt(a.$$.fragment),c=F(),u&&u.c(),N(n,"class","svelte-jdjhuu"),N(i,"class","description svelte-jdjhuu"),N(s,"class","selector-container svelte-jdjhuu"),N(e,"class","indicator-view svelte-jdjhuu")},m(f,h){z(f,e,h),b(e,n),b(e,r),b(e,i),b(e,o),b(e,s),xt(a,s,null),b(e,c),u&&u.m(e,null),l=!0},p(f,[h]){f[0]?u?(u.p(f,h),h&1&&j(u,1)):(u=di(f),u.c(),j(u,1),u.m(e,null)):u&&(ke(),nt(u,1,1,()=>{u=null}),Ce())},i(f){l||(j(a.$$.fragment,f),j(u),l=!0)},o(f){nt(a.$$.fragment,f),nt(u),l=!1},d(f){f&&P(e),bt(a),u&&u.d()}}}function yh(t,e,n){let r,i,o,s,{data:a}=e,c;function l(u){n(0,c=u.detail.indicator)}return t.$$set=u=>{"data"in u&&n(6,a=u.data)},t.$$.update=()=>{t.$$.dirty&65&&n(1,r=c&&a?a.filter(u=>{const f=u.Indicator.trim(),h=c.trim();return console.log("Filtering:",{currentIndicator:f,selectedIndicator:h,isMatch:f===h,value:u.Input}),f===h&&(u.Input==="Yes"||u.Input==="Partially")}).map(u=>({country:u.Country,region:u.Region,indicator:u.Indicator,date:u.Date,value:u.Input,iso2:u.iso2})):[]),t.$$.dirty&67&&n(4,i={total:r.length,implemented:r.filter(u=>u.value==="Yes").length,partial:r.filter(u=>u.value==="Partially").length,percentage:c?(r.length/a.filter(u=>u.Indicator.trim()===c.trim()).length*100).toFixed(1):"0.0"}),t.$$.dirty&65&&n(3,o=Dn(a.filter(u=>u.Indicator.trim()===(c==null?void 0:c.trim())),u=>u.Region)),t.$$.dirty&2&&n(2,s=Dn(r,u=>u.region))},[c,r,s,o,i,l,a]}class vh extends At{constructor(e){super(),Nt(this,e,yh,mh,Ct,{data:6})}}function _h(t){let e;return{c(){e=A("div"),e.textContent="Loading data...",N(e,"class","loading svelte-o574d9")},m(n,r){z(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&P(e)}}}function wh(t){let e,n;return e=new uh({props:{data:t[0]}}),{c(){kt(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(j(e.$$.fragment,r),n=!0)},o(r){nt(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function pi(t){let e,n;return e=new vh({props:{data:t[0]}}),{c(){kt(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(j(e.$$.fragment,r),n=!0)},o(r){nt(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function xh(t){let e,n,r,i,o,s,a,c,l,u,f,h,g,w,m;e=new Mo({});const d=[wh,_h],y=[];function v(x,_){return x[1]&&x[0].length>0?0:1}s=v(t),a=y[s]=d[s](t);let p=t[0]&&pi(t);return h=new Do({}),w=new No({}),{c(){kt(e.$$.fragment),n=F(),r=A("main"),i=A("div"),o=A("section"),a.c(),c=F(),l=A("section"),p&&p.c(),u=F(),f=A("section"),kt(h.$$.fragment),g=F(),kt(w.$$.fragment),N(o,"class","timeline svelte-o574d9"),N(l,"class","indicators svelte-o574d9"),N(f,"class","svelte-o574d9"),N(i,"class","container svelte-o574d9")},m(x,_){xt(e,x,_),z(x,n,_),z(x,r,_),b(r,i),b(i,o),y[s].m(o,null),b(i,c),b(i,l),p&&p.m(l,null),b(i,u),b(i,f),xt(h,f,null),z(x,g,_),xt(w,x,_),m=!0},p(x,[_]){let T=s;s=v(x),s===T?y[s].p(x,_):(ke(),nt(y[T],1,1,()=>{y[T]=null}),Ce(),a=y[s],a?a.p(x,_):(a=y[s]=d[s](x),a.c()),j(a,1),a.m(o,null)),x[0]?p?(p.p(x,_),_&1&&j(p,1)):(p=pi(x),p.c(),j(p,1),p.m(l,null)):p&&(ke(),nt(p,1,1,()=>{p=null}),Ce())},i(x){m||(j(e.$$.fragment,x),j(a),j(p),j(h.$$.fragment,x),j(w.$$.fragment,x),m=!0)},o(x){nt(e.$$.fragment,x),nt(a),nt(p),nt(h.$$.fragment,x),nt(w.$$.fragment,x),m=!1},d(x){x&&(P(n),P(r),P(g)),bt(e,x),y[s].d(),p&&p.d(),bt(h),bt(w,x)}}}function bh(t,e,n){let r=[],i=!1;const o="/APT-torture/data/apt-data_updated.csv";return rn(async()=>{try{n(0,r=await Qu(o)),n(1,i=!0),console.log("Data loaded:",r)}catch(s){console.error("Failed to load data:",s),n(1,i=!1),n(0,r=[])}}),[r,i]}class Th extends At{constructor(e){super(),Nt(this,e,bh,xh,Ct,{})}}new Th({target:document.getElementById("app")});
