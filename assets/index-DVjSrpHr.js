var oo=Object.defineProperty;var ao=(t,e,n)=>e in t?oo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fn=(t,e,n)=>ao(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Z(){}function hi(t){return t()}function or(){return Object.create(null)}function $e(t){t.forEach(hi)}function gi(t){return typeof t=="function"}function Nt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function so(t){return Object.keys(t).length===0}function k(t,e){t.appendChild(e)}function q(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode&&t.parentNode.removeChild(t)}function nn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function di(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function tt(t){return document.createTextNode(t)}function L(){return tt(" ")}function pi(){return tt("")}function An(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function $(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function uo(t){return Array.from(t.childNodes)}function pt(t,e){e=""+e,t.data!==e&&(t.data=e)}function ar(t,e){t.value=e??""}function sr(t,e,n){for(let r=0;r<t.options.length;r+=1){const i=t.options[r];if(i.__value===e){i.selected=!0;return}}t.selectedIndex=-1}let Ee;function lo(){if(Ee===void 0){Ee=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Ee=!0}}return Ee}function mi(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const r=S("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=lo();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=An(window,"message",a=>{a.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=An(r.contentWindow,"resize",e),e()}),k(t,r),()=>{(i||o&&r.contentWindow)&&o(),z(r)}}function ur(t,e,n){t.classList.toggle(e,!!n)}function co(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}let be;function xe(t){be=t}function yi(){if(!be)throw new Error("Function called outside component initialization");return be}function rn(t){yi().$$.on_mount.push(t)}function vi(){const t=yi();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=co(e,n,{cancelable:r});return i.slice().forEach(a=>{a.call(t,o)}),!o.defaultPrevented}return!0}}const ne=[],qe=[];let oe=[];const lr=[],fo=Promise.resolve();let $n=!1;function ho(){$n||($n=!0,fo.then(_i))}function Me(t){oe.push(t)}const hn=new Set;let Kt=0;function _i(){if(Kt!==0)return;const t=be;do{try{for(;Kt<ne.length;){const e=ne[Kt];Kt++,xe(e),go(e.$$)}}catch(e){throw ne.length=0,Kt=0,e}for(xe(null),ne.length=0,Kt=0;qe.length;)qe.pop()();for(let e=0;e<oe.length;e+=1){const n=oe[e];hn.has(n)||(hn.add(n),n())}oe.length=0}while(ne.length);for(;lr.length;)lr.pop()();$n=!1,hn.clear(),xe(t)}function go(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Me)}}function po(t){const e=[],n=[];oe.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),oe=e}const He=new Set;let Ot;function ke(){Ot={r:0,c:[],p:Ot}}function Te(){Ot.r||$e(Ot.c),Ot=Ot.p}function X(t,e){t&&t.i&&(He.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(He.has(t))return;He.add(t),Ot.c.push(()=>{He.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}function zt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ct(t){t&&t.c()}function xt(t,e,n){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),Me(()=>{const o=t.$$.on_mount.map(hi).filter(gi);t.$$.on_destroy?t.$$.on_destroy.push(...o):$e(o),t.$$.on_mount=[]}),i.forEach(Me)}function bt(t,e){const n=t.$$;n.fragment!==null&&(po(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function mo(t,e){t.$$.dirty[0]===-1&&(ne.push(t),ho(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function At(t,e,n,r,i,o,a=null,s=[-1]){const c=be;xe(t);const u=t.$$={fragment:null,ctx:[],props:o,update:Z,not_equal:i,bound:or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:or(),dirty:s,skip_bound:!1,root:e.target||c.$$.root};a&&a(u.root);let l=!1;if(u.ctx=n?n(t,e.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return u.ctx&&i(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),l&&mo(t,f)),h}):[],u.update(),l=!0,$e(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=uo(e.target);u.fragment&&u.fragment.l(f),f.forEach(z)}else u.fragment&&u.fragment.c();e.intro&&X(t.$$.fragment),xt(t,e.target,e.anchor),_i()}xe(c)}class $t{constructor(){fn(this,"$$");fn(this,"$$set")}$destroy(){bt(this,1),this.$destroy=Z}$on(e,n){if(!gi(n))return Z;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!so(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const yo="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yo);function vo(t){let e,n,r,i,o,a,s,c,u;return{c(){e=S("header"),n=S("div"),r=S("h1"),i=tt(t[0]),o=L(),a=S("h2"),s=tt(t[1]),c=L(),u=S("p"),u.textContent=`This visualization explores the global progress in torture prevention measures,\r
        highlighting the positive steps taken by countries worldwide in ratifying conventions,\r
        implementing preventive mechanisms, and establishing human rights institutions.`,$(r,"class","svelte-1rpvxrr"),$(a,"class","svelte-1rpvxrr"),$(u,"class","intro svelte-1rpvxrr"),$(n,"class","header-content svelte-1rpvxrr"),$(e,"class","svelte-1rpvxrr")},m(l,f){q(l,e,f),k(e,n),k(n,r),k(r,i),k(n,o),k(n,a),k(a,s),k(n,c),k(n,u)},p(l,[f]){f&1&&pt(i,l[0]),f&2&&pt(s,l[1])},i:Z,o:Z,d(l){l&&z(e)}}}function _o(t,e,n){let{title:r="Global Torture Prevention Progress"}=e,{subtitle:i="A Global Overview of Anti-Torture Measures"}=e;return t.$$set=o=>{"title"in o&&n(0,r=o.title),"subtitle"in o&&n(1,i=o.subtitle)},[r,i]}class wo extends $t{constructor(e){super(),At(this,e,_o,vo,Nt,{title:0,subtitle:1})}}function xo(t){let e;return{c(){e=S("footer"),e.innerHTML='<div class="footer-content svelte-h4x38g"><a href="https://www.apt.ch" target="_blank" rel="noopener noreferrer" class="logo-link svelte-h4x38g"><img src="/images/apt_logo.jpg" alt="Association for the Prevention of Torture Logo" class="logo svelte-h4x38g"/></a> <div class="author svelte-h4x38g"><p>Designed by: <a href="https://www.linkedin.com/in/adekola-aliu" target="_blank" rel="noopener noreferrer" class="svelte-h4x38g">Adekola Aliu</a></p></div> <a href="https://www.vizforsocialgood.com" target="_blank" rel="noopener noreferrer" class="logo-link svelte-h4x38g"><img src="images/vfsg-logo.png" alt="Viz for Social Good Logo" class="logo svelte-h4x38g"/></a></div>',$(e,"class","svelte-h4x38g")},m(n,r){q(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&z(e)}}}function bo(t){return new Date().getFullYear(),[]}class Mo extends $t{constructor(e){super(),At(this,e,bo,xo,Nt,{})}}function ze(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ko(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wn(t){let e,n,r;t.length!==2?(e=ze,n=(s,c)=>ze(t(s),c),r=(s,c)=>t(s)-c):(e=t===ze||t===ko?t:To,n=t,r=t);function i(s,c,u=0,l=s.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;n(s[f],c)<0?u=f+1:l=f}while(u<l)}return u}function o(s,c,u=0,l=s.length){if(u<l){if(e(c,c)!==0)return l;do{const f=u+l>>>1;n(s[f],c)<=0?u=f+1:l=f}while(u<l)}return u}function a(s,c,u=0,l=s.length){const f=i(s,c,u,l-1);return f>u&&r(s[f-1],c)>-r(s[f],c)?f-1:f}return{left:i,center:a,right:o}}function To(){return 0}function Co(t){return t===null?NaN:+t}const No=Wn(ze),Ao=No.right;Wn(Co).center;class $o extends Map{constructor(e,n=Uo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(cr(this,e))}has(e){return super.has(cr(this,e))}set(e,n){return super.set(So(this,e),n)}delete(e){return super.delete(Do(this,e))}}function cr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function So({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Do({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Uo(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fr(t){return t}function Sn(t,...e){return Eo(t,fr,fr,e)}function Eo(t,e,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new $o,c=r[a++];let u=-1;for(const l of o){const f=c(l,++u,o),h=s.get(f);h?h.push(l):s.set(f,[l])}for(const[l,f]of s)s.set(l,i(f,a));return e(s)}(t,0)}const Fo=Math.sqrt(50),Io=Math.sqrt(10),Yo=Math.sqrt(2);function wi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Fo?10:o>=Io?5:o>=Yo?2:1;let s,c,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?wi(t,e,n*2):[s,c,u]}function hr(t,e,n){return e=+e,t=+t,n=+n,wi(t,e,n)[2]}function gr(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?hr(e,t,n):hr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Ro(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ho(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function zo(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Po(t){return t}var Oo=3,dr=1e-6;function Lo(t){return"translate("+t+",0)"}function Wo(t){return e=>+t(e)}function qo(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Vo(){return!this.__axis}function Xo(t,e){var n=[],r=null,i=null,o=6,a=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=1,l="y",f=Lo;function h(d){var m=r??(e.ticks?e.ticks.apply(e,n):e.domain()),v=i??(e.tickFormat?e.tickFormat.apply(e,n):Po),g=Math.max(o,0)+s,p=e.range(),y=+p[0]+c,_=+p[p.length-1]+c,M=(e.bandwidth?qo:Wo)(e.copy(),c),C=d.selection?d.selection():d,b=C.selectAll(".domain").data([null]),w=C.selectAll(".tick").data(m,e).order(),T=w.exit(),P=w.enter().append("g").attr("class","tick"),A=w.select("line"),F=w.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(P),A=A.merge(P.append("line").attr("stroke","currentColor").attr(l+"2",u*o)),F=F.merge(P.append("text").attr("fill","currentColor").attr(l,u*g).attr("dy","0.71em")),d!==C&&(b=b.transition(d),w=w.transition(d),A=A.transition(d),F=F.transition(d),T=T.transition(d).attr("opacity",dr).attr("transform",function(R){return isFinite(R=M(R))?f(R+c):this.getAttribute("transform")}),P.attr("opacity",dr).attr("transform",function(R){var I=this.parentNode.__axis;return f((I&&isFinite(I=I(R))?I:M(R))+c)})),T.remove(),b.attr("d",a?"M"+y+","+u*a+"V"+c+"H"+_+"V"+u*a:"M"+y+","+c+"H"+_),w.attr("opacity",1).attr("transform",function(R){return f(M(R)+c)}),A.attr(l+"2",u*o),F.attr(l,u*g).text(v),C.filter(Vo).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),C.each(function(){this.__axis=M})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(o=a=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function Bo(t){return Xo(Oo,t)}var Zo={value:()=>{}};function on(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Pe(n)}function Pe(t){this._=t}function jo(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Pe.prototype=on.prototype={constructor:Pe,on:function(t,e){var n=this._,r=jo(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Go(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=pr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=pr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Pe(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Go(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function pr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Zo,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Dn="http://www.w3.org/1999/xhtml";const mr={svg:"http://www.w3.org/2000/svg",xhtml:Dn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function an(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),mr.hasOwnProperty(e)?{space:mr[e],local:t}:t}function Qo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Dn&&e.documentElement.namespaceURI===Dn?e.createElement(t):e.createElementNS(n,t)}}function Ko(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xi(t){var e=an(t);return(e.local?Ko:Qo)(e)}function Jo(){}function qn(t){return t==null?Jo:function(){return this.querySelector(t)}}function ta(t){typeof t!="function"&&(t=qn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),c,u,l=0;l<a;++l)(c=o[l])&&(u=t.call(c,c.__data__,l,o))&&("__data__"in c&&(u.__data__=c.__data__),s[l]=u);return new mt(r,this._parents)}function ea(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function na(){return[]}function bi(t){return t==null?na:function(){return this.querySelectorAll(t)}}function ra(t){return function(){return ea(t.apply(this,arguments))}}function ia(t){typeof t=="function"?t=ra(t):t=bi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&(r.push(t.call(c,c.__data__,u,a)),i.push(c));return new mt(r,i)}function Mi(t){return function(){return this.matches(t)}}function ki(t){return function(e){return e.matches(t)}}var oa=Array.prototype.find;function aa(t){return function(){return oa.call(this.children,t)}}function sa(){return this.firstElementChild}function ua(t){return this.select(t==null?sa:aa(typeof t=="function"?t:ki(t)))}var la=Array.prototype.filter;function ca(){return Array.from(this.children)}function fa(t){return function(){return la.call(this.children,t)}}function ha(t){return this.selectAll(t==null?ca:fa(typeof t=="function"?t:ki(t)))}function ga(t){typeof t!="function"&&(t=Mi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new mt(r,this._parents)}function Ti(t){return new Array(t.length)}function da(){return new mt(this._enter||this._groups.map(Ti),this._parents)}function Ve(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Ve.prototype={constructor:Ve,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function pa(t){return function(){return t}}function ma(t,e,n,r,i,o){for(var a=0,s,c=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ve(t,o[a]);for(;a<c;++a)(s=e[a])&&(i[a]=s)}function ya(t,e,n,r,i,o,a){var s,c,u=new Map,l=e.length,f=o.length,h=new Array(l),d;for(s=0;s<l;++s)(c=e[s])&&(h[s]=d=a.call(c,c.__data__,s,e)+"",u.has(d)?i[s]=c:u.set(d,c));for(s=0;s<f;++s)d=a.call(t,o[s],s,o)+"",(c=u.get(d))?(r[s]=c,c.__data__=o[s],u.delete(d)):n[s]=new Ve(t,o[s]);for(s=0;s<l;++s)(c=e[s])&&u.get(h[s])===c&&(i[s]=c)}function va(t){return t.__data__}function _a(t,e){if(!arguments.length)return Array.from(this,va);var n=e?ya:ma,r=this._parents,i=this._groups;typeof t!="function"&&(t=pa(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),u=0;u<o;++u){var l=r[u],f=i[u],h=f.length,d=wa(t.call(l,l&&l.__data__,u,r)),m=d.length,v=s[u]=new Array(m),g=a[u]=new Array(m),p=c[u]=new Array(h);n(l,f,v,g,p,d,e);for(var y=0,_=0,M,C;y<m;++y)if(M=v[y]){for(y>=_&&(_=y+1);!(C=g[_])&&++_<m;);M._next=C||null}}return a=new mt(a,r),a._enter=s,a._exit=c,a}function wa(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function xa(){return new mt(this._exit||this._groups.map(Ti),this._parents)}function ba(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ma(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),c=0;c<a;++c)for(var u=n[c],l=r[c],f=u.length,h=s[c]=new Array(f),d,m=0;m<f;++m)(d=u[m]||l[m])&&(h[m]=d);for(;c<i;++c)s[c]=n[c];return new mt(s,this._parents)}function ka(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Ta(t){t||(t=Ca);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,c=i[o]=new Array(s),u,l=0;l<s;++l)(u=a[l])&&(c[l]=u);c.sort(e)}return new mt(i,this._parents).order()}function Ca(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Na(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Aa(){return Array.from(this)}function $a(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Sa(){let t=0;for(const e of this)++t;return t}function Da(){return!this.node()}function Ua(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function Ea(t){return function(){this.removeAttribute(t)}}function Fa(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ia(t,e){return function(){this.setAttribute(t,e)}}function Ya(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ra(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ha(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function za(t,e){var n=an(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Fa:Ea:typeof e=="function"?n.local?Ha:Ra:n.local?Ya:Ia)(n,e))}function Ci(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Pa(t){return function(){this.style.removeProperty(t)}}function Oa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function La(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Wa(t,e,n){return arguments.length>1?this.each((e==null?Pa:typeof e=="function"?La:Oa)(t,e,n??"")):se(this.node(),t)}function se(t,e){return t.style.getPropertyValue(e)||Ci(t).getComputedStyle(t,null).getPropertyValue(e)}function qa(t){return function(){delete this[t]}}function Va(t,e){return function(){this[t]=e}}function Xa(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ba(t,e){return arguments.length>1?this.each((e==null?qa:typeof e=="function"?Xa:Va)(t,e)):this.node()[t]}function Ni(t){return t.trim().split(/^|\s+/)}function Vn(t){return t.classList||new Ai(t)}function Ai(t){this._node=t,this._names=Ni(t.getAttribute("class")||"")}Ai.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function $i(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Si(t,e){for(var n=Vn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Za(t){return function(){$i(this,t)}}function ja(t){return function(){Si(this,t)}}function Ga(t,e){return function(){(e.apply(this,arguments)?$i:Si)(this,t)}}function Qa(t,e){var n=Ni(t+"");if(arguments.length<2){for(var r=Vn(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ga:e?Za:ja)(n,e))}function Ka(){this.textContent=""}function Ja(t){return function(){this.textContent=t}}function ts(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function es(t){return arguments.length?this.each(t==null?Ka:(typeof t=="function"?ts:Ja)(t)):this.node().textContent}function ns(){this.innerHTML=""}function rs(t){return function(){this.innerHTML=t}}function is(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function os(t){return arguments.length?this.each(t==null?ns:(typeof t=="function"?is:rs)(t)):this.node().innerHTML}function as(){this.nextSibling&&this.parentNode.appendChild(this)}function ss(){return this.each(as)}function us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ls(){return this.each(us)}function cs(t){var e=typeof t=="function"?t:xi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function fs(){return null}function hs(t,e){var n=typeof t=="function"?t:xi(t),r=e==null?fs:typeof e=="function"?e:qn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gs(){var t=this.parentNode;t&&t.removeChild(this)}function ds(){return this.each(gs)}function ps(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ms(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ys(t){return this.select(t?ms:ps)}function vs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _s(t){return function(e){t.call(this,e,this.__data__)}}function ws(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function xs(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function bs(t,e,n){return function(){var r=this.__on,i,o=_s(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function Ms(t,e,n){var r=ws(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,l;c<u;++c)for(i=0,l=s[c];i<o;++i)if((a=r[i]).type===l.type&&a.name===l.name)return l.value}return}for(s=e?bs:xs,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function Di(t,e,n){var r=Ci(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ks(t,e){return function(){return Di(this,t,e)}}function Ts(t,e){return function(){return Di(this,t,e.apply(this,arguments))}}function Cs(t,e){return this.each((typeof e=="function"?Ts:ks)(t,e))}function*Ns(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Ui=[null];function mt(t,e){this._groups=t,this._parents=e}function Se(){return new mt([[document.documentElement]],Ui)}function As(){return this}mt.prototype=Se.prototype={constructor:mt,select:ta,selectAll:ia,selectChild:ua,selectChildren:ha,filter:ga,data:_a,enter:da,exit:xa,join:ba,merge:Ma,selection:As,order:ka,sort:Ta,call:Na,nodes:Aa,node:$a,size:Sa,empty:Da,each:Ua,attr:za,style:Wa,property:Ba,classed:Qa,text:es,html:os,raise:ss,lower:ls,append:cs,insert:hs,remove:ds,clone:ys,datum:vs,on:Ms,dispatch:Cs,[Symbol.iterator]:Ns};function ht(t){return typeof t=="string"?new mt([[document.querySelector(t)]],[document.documentElement]):new mt([[t]],Ui)}function $s(t){let e;for(;e=t.sourceEvent;)t=e;return t}function yr(t,e){if(t=$s(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Un={capture:!0,passive:!1};function En(t){t.preventDefault(),t.stopImmediatePropagation()}function Ss(t){var e=t.document.documentElement,n=ht(t).on("dragstart.drag",En,Un);"onselectstart"in e?n.on("selectstart.drag",En,Un):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Ds(t,e){var n=t.document.documentElement,r=ht(t).on("dragstart.drag",null);e&&(r.on("click.drag",En,Un),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Xn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ei(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function De(){}var Ce=.7,Xe=1/Ce,ae="\\s*([+-]?\\d+)\\s*",Ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Us=/^#([0-9a-f]{3,8})$/,Es=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),Fs=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),Is=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ne}\\)$`),Ys=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${Ne}\\)$`),Rs=new RegExp(`^hsl\\(${Ne},${Tt},${Tt}\\)$`),Hs=new RegExp(`^hsla\\(${Ne},${Tt},${Tt},${Ne}\\)$`),vr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xn(De,qt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_r,formatHex:_r,formatHex8:zs,formatHsl:Ps,formatRgb:wr,toString:wr});function _r(){return this.rgb().formatHex()}function zs(){return this.rgb().formatHex8()}function Ps(){return Fi(this).formatHsl()}function wr(){return this.rgb().formatRgb()}function qt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Us.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xr(e):n===3?new gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Fe(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Fe(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Es.exec(t))?new gt(e[1],e[2],e[3],1):(e=Fs.exec(t))?new gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Is.exec(t))?Fe(e[1],e[2],e[3],e[4]):(e=Ys.exec(t))?Fe(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rs.exec(t))?kr(e[1],e[2]/100,e[3]/100,1):(e=Hs.exec(t))?kr(e[1],e[2]/100,e[3]/100,e[4]):vr.hasOwnProperty(t)?xr(vr[t]):t==="transparent"?new gt(NaN,NaN,NaN,0):null}function xr(t){return new gt(t>>16&255,t>>8&255,t&255,1)}function Fe(t,e,n,r){return r<=0&&(t=e=n=NaN),new gt(t,e,n,r)}function Os(t){return t instanceof De||(t=qt(t)),t?(t=t.rgb(),new gt(t.r,t.g,t.b,t.opacity)):new gt}function Fn(t,e,n,r){return arguments.length===1?Os(t):new gt(t,e,n,r??1)}function gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Xn(gt,Fn,Ei(De,{brighter(t){return t=t==null?Xe:Math.pow(Xe,t),new gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gt(Wt(this.r),Wt(this.g),Wt(this.b),Be(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:br,formatHex:br,formatHex8:Ls,formatRgb:Mr,toString:Mr}));function br(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}`}function Ls(){return`#${Lt(this.r)}${Lt(this.g)}${Lt(this.b)}${Lt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mr(){const t=Be(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function Be(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Lt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function kr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new wt(t,e,n,r)}function Fi(t){if(t instanceof wt)return new wt(t.h,t.s,t.l,t.opacity);if(t instanceof De||(t=qt(t)),!t)return new wt;if(t instanceof wt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=c>0&&c<1?0:a,new wt(a,s,c,t.opacity)}function Ws(t,e,n,r){return arguments.length===1?Fi(t):new wt(t,e,n,r??1)}function wt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Xn(wt,Ws,Ei(De,{brighter(t){return t=t==null?Xe:Math.pow(Xe,t),new wt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ce:Math.pow(Ce,t),new wt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new gt(gn(t>=240?t-240:t+120,i,r),gn(t,i,r),gn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new wt(Tr(this.h),Ie(this.s),Ie(this.l),Be(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Be(this.opacity);return`${t===1?"hsl(":"hsla("}${Tr(this.h)}, ${Ie(this.s)*100}%, ${Ie(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Tr(t){return t=(t||0)%360,t<0?t+360:t}function Ie(t){return Math.max(0,Math.min(1,t||0))}function gn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Bn=t=>()=>t;function qs(t,e){return function(n){return t+n*e}}function Vs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Xs(t){return(t=+t)==1?Ii:function(e,n){return n-e?Vs(e,n,t):Bn(isNaN(e)?n:e)}}function Ii(t,e){var n=e-t;return n?qs(t,n):Bn(isNaN(t)?e:t)}const Ze=function t(e){var n=Xs(e);function r(i,o){var a=n((i=Fn(i)).r,(o=Fn(o)).r),s=n(i.g,o.g),c=n(i.b,o.b),u=Ii(i.opacity,o.opacity);return function(l){return i.r=a(l),i.g=s(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=t,r}(1);function Bs(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Zs(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function js(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=sn(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Gs(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _t(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Qs(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=sn(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var In=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=new RegExp(In.source,"g");function Ks(t){return function(){return t}}function Js(t){return function(e){return t(e)+""}}function Yi(t,e){var n=In.lastIndex=dn.lastIndex=0,r,i,o,a=-1,s=[],c=[];for(t=t+"",e=e+"";(r=In.exec(t))&&(i=dn.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,c.push({i:a,x:_t(r,i)})),n=dn.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?c[0]?Js(c[0].x):Ks(e):(e=c.length,function(u){for(var l=0,f;l<e;++l)s[(f=c[l]).i]=f.x(u);return s.join("")})}function sn(t,e){var n=typeof e,r;return e==null||n==="boolean"?Bn(e):(n==="number"?_t:n==="string"?(r=qt(e))?(e=r,Ze):Yi:e instanceof qt?Ze:e instanceof Date?Gs:Zs(e)?Bs:Array.isArray(e)?js:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Qs:_t)(t,e)}function tu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Cr=180/Math.PI,Yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ri(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Cr,skewX:Math.atan(c)*Cr,scaleX:a,scaleY:s}}var Ye;function eu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yn:Ri(e.a,e.b,e.c,e.d,e.e,e.f)}function nu(t){return t==null||(Ye||(Ye=document.createElementNS("http://www.w3.org/2000/svg","g")),Ye.setAttribute("transform",t),!(t=Ye.transform.baseVal.consolidate()))?Yn:(t=t.matrix,Ri(t.a,t.b,t.c,t.d,t.e,t.f))}function Hi(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,l,f,h,d,m){if(u!==f||l!==h){var v=d.push("translate(",null,e,null,n);m.push({i:v-4,x:_t(u,f)},{i:v-2,x:_t(l,h)})}else(f||h)&&d.push("translate("+f+e+h+n)}function a(u,l,f,h){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:_t(u,l)})):l&&f.push(i(f)+"rotate("+l+r)}function s(u,l,f,h){u!==l?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:_t(u,l)}):l&&f.push(i(f)+"skewX("+l+r)}function c(u,l,f,h,d,m){if(u!==f||l!==h){var v=d.push(i(d)+"scale(",null,",",null,")");m.push({i:v-4,x:_t(u,f)},{i:v-2,x:_t(l,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(u,l){var f=[],h=[];return u=t(u),l=t(l),o(u.translateX,u.translateY,l.translateX,l.translateY,f,h),a(u.rotate,l.rotate,f,h),s(u.skewX,l.skewX,f,h),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,f,h),u=l=null,function(d){for(var m=-1,v=h.length,g;++m<v;)f[(g=h[m]).i]=g.x(d);return f.join("")}}}var ru=Hi(eu,"px, ","px)","deg)"),iu=Hi(nu,", ",")",")"),ue=0,ve=0,ge=0,zi=1e3,je,_e,Ge=0,Vt=0,un=0,Ae=typeof performance=="object"&&performance.now?performance:Date,Pi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Zn(){return Vt||(Pi(ou),Vt=Ae.now()+un)}function ou(){Vt=0}function Qe(){this._call=this._time=this._next=null}Qe.prototype=jn.prototype={constructor:Qe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Zn():+n)+(e==null?0:+e),!this._next&&_e!==this&&(_e?_e._next=this:je=this,_e=this),this._call=t,this._time=n,Rn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Rn())}};function jn(t,e,n){var r=new Qe;return r.restart(t,e,n),r}function au(){Zn(),++ue;for(var t=je,e;t;)(e=Vt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ue}function Nr(){Vt=(Ge=Ae.now())+un,ue=ve=0;try{au()}finally{ue=0,uu(),Vt=0}}function su(){var t=Ae.now(),e=t-Ge;e>zi&&(un-=e,Ge=t)}function uu(){for(var t,e=je,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:je=n);_e=t,Rn(r)}function Rn(t){if(!ue){ve&&(ve=clearTimeout(ve));var e=t-Vt;e>24?(t<1/0&&(ve=setTimeout(Nr,t-Ae.now()-un)),ge&&(ge=clearInterval(ge))):(ge||(Ge=Ae.now(),ge=setInterval(su,zi)),ue=1,Pi(Nr))}}function Ar(t,e,n){var r=new Qe;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var lu=on("start","end","cancel","interrupt"),cu=[],Oi=0,$r=1,Hn=2,Oe=3,Sr=4,zn=5,Le=6;function ln(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;fu(t,n,{name:e,index:r,group:i,on:lu,tween:cu,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Oi})}function Gn(t,e){var n=Mt(t,e);if(n.state>Oi)throw new Error("too late; already scheduled");return n}function St(t,e){var n=Mt(t,e);if(n.state>Oe)throw new Error("too late; already running");return n}function Mt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function fu(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=jn(o,0,n.time);function o(u){n.state=$r,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var l,f,h,d;if(n.state!==$r)return c();for(l in r)if(d=r[l],d.name===n.name){if(d.state===Oe)return Ar(a);d.state===Sr?(d.state=Le,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[l]):+l<e&&(d.state=Le,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[l])}if(Ar(function(){n.state===Oe&&(n.state=Sr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Hn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Hn){for(n.state=Oe,i=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(d=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function s(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=zn,1),f=-1,h=i.length;++f<h;)i[f].call(t,l);n.state===zn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Le,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function Pn(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>Hn&&r.state<zn,r.state=Le,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function hu(t){return this.each(function(){Pn(this,t)})}function gu(t,e){var n,r;return function(){var i=St(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function du(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=St(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===e){i[c]=s;break}c===u&&i.push(s)}o.tween=i}}function pu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Mt(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?gu:du)(n,t,e))}function Qn(t,e,n){var r=t._id;return t.each(function(){var i=St(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Mt(i,r).value[e]}}function Li(t,e){var n;return(typeof e=="number"?_t:e instanceof qt?Ze:(n=qt(e))?(e=n,Ze):Yi)(t,e)}function mu(t){return function(){this.removeAttribute(t)}}function yu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vu(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function _u(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function wu(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function xu(t,e,n){var r,i,o;return function(){var a,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),c=s+"",a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s)))}}function bu(t,e){var n=an(t),r=n==="transform"?iu:Li;return this.attrTween(t,typeof e=="function"?(n.local?xu:wu)(n,r,Qn(this,"attr."+t,e)):e==null?(n.local?yu:mu)(n):(n.local?_u:vu)(n,r,e))}function Mu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ku(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Tu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&ku(t,o)),n}return i._value=e,i}function Cu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Mu(t,o)),n}return i._value=e,i}function Nu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=an(t);return this.tween(n,(r.local?Tu:Cu)(r,e))}function Au(t,e){return function(){Gn(this,t).delay=+e.apply(this,arguments)}}function $u(t,e){return e=+e,function(){Gn(this,t).delay=e}}function Su(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Au:$u)(e,t)):Mt(this.node(),e).delay}function Du(t,e){return function(){St(this,t).duration=+e.apply(this,arguments)}}function Uu(t,e){return e=+e,function(){St(this,t).duration=e}}function Eu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Du:Uu)(e,t)):Mt(this.node(),e).duration}function Fu(t,e){if(typeof e!="function")throw new Error;return function(){St(this,t).ease=e}}function Iu(t){var e=this._id;return arguments.length?this.each(Fu(e,t)):Mt(this.node(),e).ease}function Yu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;St(this,t).ease=n}}function Ru(t){if(typeof t!="function")throw new Error;return this.each(Yu(this._id,t))}function Hu(t){typeof t!="function"&&(t=Mi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],c,u=0;u<a;++u)(c=o[u])&&t.call(c,c.__data__,u,o)&&s.push(c);return new It(r,this._parents,this._name,this._id)}function zu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c=e[s],u=n[s],l=c.length,f=a[s]=new Array(l),h,d=0;d<l;++d)(h=c[d]||u[d])&&(f[d]=h);for(;s<r;++s)a[s]=e[s];return new It(a,this._parents,this._name,this._id)}function Pu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ou(t,e,n){var r,i,o=Pu(e)?Gn:St;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Lu(t,e){var n=this._id;return arguments.length<2?Mt(this.node(),n).on.on(t):this.each(Ou(n,t,e))}function Wu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function qu(){return this.on("end.remove",Wu(this._id))}function Vu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=qn(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],c=s.length,u=o[a]=new Array(c),l,f,h=0;h<c;++h)(l=s[h])&&(f=t.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),u[h]=f,ln(u[h],e,n,h,u,Mt(l,n)));return new It(o,this._parents,e,n)}function Xu(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bi(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c=r[s],u=c.length,l,f=0;f<u;++f)if(l=c[f]){for(var h=t.call(l,l.__data__,f,c),d,m=Mt(l,n),v=0,g=h.length;v<g;++v)(d=h[v])&&ln(d,e,n,v,h,m);o.push(h),a.push(l)}return new It(o,a,e,n)}var Bu=Se.prototype.constructor;function Zu(){return new Bu(this._groups,this._parents)}function ju(t,e){var n,r,i;return function(){var o=se(this,t),a=(this.style.removeProperty(t),se(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Wi(t){return function(){this.style.removeProperty(t)}}function Gu(t,e,n){var r,i=n+"",o;return function(){var a=se(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function Qu(t,e,n){var r,i,o;return function(){var a=se(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),se(this,t))),a===c?null:a===r&&c===i?o:(i=c,o=e(r=a,s))}}function Ku(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var c=St(this,t),u=c.on,l=c.value[o]==null?s||(s=Wi(e)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(a,i=l),c.on=r}}function Ju(t,e,n){var r=(t+="")=="transform"?ru:Li;return e==null?this.styleTween(t,ju(t,r)).on("end.style."+t,Wi(t)):typeof e=="function"?this.styleTween(t,Qu(t,r,Qn(this,"style."+t,e))).each(Ku(this._id,t)):this.styleTween(t,Gu(t,r,e),n).on("end.style."+t,null)}function tl(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function el(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&tl(t,a,n)),r}return o._value=e,o}function nl(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,el(t,e,n??""))}function rl(t){return function(){this.textContent=t}}function il(t){return function(){var e=t(this);this.textContent=e??""}}function ol(t){return this.tween("text",typeof t=="function"?il(Qn(this,"text",t)):rl(t==null?"":t+""))}function al(t){return function(e){this.textContent=t.call(this,e)}}function sl(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&al(i)),e}return r._value=t,r}function ul(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,sl(t))}function ll(){for(var t=this._name,e=this._id,n=qi(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)if(c=a[u]){var l=Mt(c,e);ln(c,t,n,u,a,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new It(r,this._parents,t,n)}function cl(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},c={value:function(){--i===0&&o()}};n.each(function(){var u=St(this,r),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),i===0&&o()})}var fl=0;function It(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function qi(){return++fl}var Dt=Se.prototype;It.prototype={constructor:It,select:Vu,selectAll:Xu,selectChild:Dt.selectChild,selectChildren:Dt.selectChildren,filter:Hu,merge:zu,selection:Zu,transition:ll,call:Dt.call,nodes:Dt.nodes,node:Dt.node,size:Dt.size,empty:Dt.empty,each:Dt.each,on:Lu,attr:bu,attrTween:Nu,style:Ju,styleTween:nl,text:ol,textTween:ul,remove:qu,tween:pu,delay:Su,duration:Eu,ease:Iu,easeVarying:Ru,end:cl,[Symbol.iterator]:Dt[Symbol.iterator]};function hl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var On=4/11,gl=6/11,dl=8/11,pl=3/4,ml=9/11,yl=10/11,vl=15/16,_l=21/22,wl=63/64,Re=1/On/On;function xl(t){return(t=+t)<On?Re*t*t:t<dl?Re*(t-=gl)*t+pl:t<yl?Re*(t-=ml)*t+vl:Re*(t-=_l)*t+wl}var bl={time:null,delay:0,duration:250,ease:hl};function Ml(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function kl(t){var e,n;t instanceof It?(e=t._id,t=t._name):(e=qi(),(n=bl).time=Zn(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,c,u=0;u<s;++u)(c=a[u])&&ln(c,t,e,u,a,n||Ml(c,e));return new It(r,this._parents,t,e)}Se.prototype.interrupt=hu;Se.prototype.transition=kl;const pn=t=>()=>t;function Tl(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Cl(t){t.stopImmediatePropagation()}function mn(t){t.preventDefault(),t.stopImmediatePropagation()}var Dr={name:"drag"},yn={name:"space"},Jt={name:"handle"},te={name:"center"};const{abs:Ur,max:ot,min:at}=Math;function Er(t){return[+t[0],+t[1]]}function Fr(t){return[Er(t[0]),Er(t[1])]}var We={name:"x",handles:["w","e"].map(Ke),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},vn={name:"y",handles:["n","s"].map(Ke),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Ut={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ir={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Yr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Nl={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Al={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Ke(t){return{type:t}}function $l(t){return!t.ctrlKey&&!t.button}function Sl(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Dl(){return navigator.maxTouchPoints||"ontouchstart"in this}function _n(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ul(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function El(){return Fl(We)}function Fl(t){var e=Sl,n=$l,r=Dl,i=!0,o=on("start","brush","end"),a=6,s;function c(g){var p=g.property("__brush",v).selectAll(".overlay").data([Ke("overlay")]);p.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ut.overlay).merge(p).each(function(){var _=_n(this).extent;ht(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),g.selectAll(".selection").data([Ke("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ut.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var y=g.selectAll(".handle").data(t.handles,function(_){return _.type});y.exit().remove(),y.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return Ut[_.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(r).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}c.move=function(g,p,y){g.tween?g.on("start.brush",function(_){l(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){l(this,arguments).end(_)}).tween("brush",function(){var _=this,M=_.__brush,C=l(_,arguments),b=M.selection,w=t.input(typeof p=="function"?p.apply(this,arguments):p,M.extent),T=sn(b,w);function P(A){M.selection=A===1&&w===null?null:T(A),u.call(_),C.brush()}return b!==null&&w!==null?P:P(1)}):g.each(function(){var _=this,M=arguments,C=_.__brush,b=t.input(typeof p=="function"?p.apply(_,M):p,C.extent),w=l(_,M).beforestart();Pn(_),C.selection=b===null?null:b,u.call(_),w.start(y).brush(y).end(y)})},c.clear=function(g,p){c.move(g,null,p)};function u(){var g=ht(this),p=_n(this).selection;p?(g.selectAll(".selection").style("display",null).attr("x",p[0][0]).attr("y",p[0][1]).attr("width",p[1][0]-p[0][0]).attr("height",p[1][1]-p[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(y){return y.type[y.type.length-1]==="e"?p[1][0]-a/2:p[0][0]-a/2}).attr("y",function(y){return y.type[0]==="s"?p[1][1]-a/2:p[0][1]-a/2}).attr("width",function(y){return y.type==="n"||y.type==="s"?p[1][0]-p[0][0]+a:a}).attr("height",function(y){return y.type==="e"||y.type==="w"?p[1][1]-p[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(g,p,y){var _=g.__brush.emitter;return _&&(!y||!_.clean)?_:new f(g,p,y)}function f(g,p,y){this.that=g,this.args=p,this.state=g.__brush,this.active=0,this.clean=y}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,p){return this.starting?(this.starting=!1,this.emit("start",g,p)):this.emit("brush",g),this},brush:function(g,p){return this.emit("brush",g,p),this},end:function(g,p){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,p)),this},emit:function(g,p,y){var _=ht(this.that).datum();o.call(g,this.that,new Tl(g,{sourceEvent:p,target:c,selection:t.output(this.state.selection),mode:y,dispatch:o}),_)}};function h(g){if(s&&!g.touches||!n.apply(this,arguments))return;var p=this,y=g.target.__data__.type,_=(i&&g.metaKey?y="overlay":y)==="selection"?Dr:i&&g.altKey?te:Jt,M=t===vn?null:Nl[y],C=t===We?null:Al[y],b=_n(p),w=b.extent,T=b.selection,P=w[0][0],A,F,R=w[0][1],I,U,yt=w[1][0],J,B,dt=w[1][1],j,G,V=0,W=0,fe,jt=M&&C&&i&&g.shiftKey,Gt,Qt,it=Array.from(g.touches||[g],D=>{const K=D.identifier;return D=yr(D,p),D.point0=D.slice(),D.identifier=K,D});Pn(p);var Pt=l(p,arguments,!0).beforestart();if(y==="overlay"){T&&(fe=!0);const D=[it[0],it[1]||it[0]];b.selection=T=[[A=t===vn?P:at(D[0][0],D[1][0]),I=t===We?R:at(D[0][1],D[1][1])],[J=t===vn?yt:ot(D[0][0],D[1][0]),j=t===We?dt:ot(D[0][1],D[1][1])]],it.length>1&&Q(g)}else A=T[0][0],I=T[0][1],J=T[1][0],j=T[1][1];F=A,U=I,B=J,G=j;var N=ht(p).attr("pointer-events","none"),E=N.selectAll(".overlay").attr("cursor",Ut[y]);if(g.touches)Pt.moved=x,Pt.ended=O;else{var Y=ht(g.view).on("mousemove.brush",x,!0).on("mouseup.brush",O,!0);i&&Y.on("keydown.brush",st,!0).on("keyup.brush",ut,!0),Ss(g.view)}u.call(p),Pt.start(g,_.name);function x(D){for(const K of D.changedTouches||[D])for(const he of it)he.identifier===K.identifier&&(he.cur=yr(K,p));if(jt&&!Gt&&!Qt&&it.length===1){const K=it[0];Ur(K.cur[0]-K[0])>Ur(K.cur[1]-K[1])?Qt=!0:Gt=!0}for(const K of it)K.cur&&(K[0]=K.cur[0],K[1]=K.cur[1]);fe=!0,mn(D),Q(D)}function Q(D){const K=it[0],he=K.point0;var Ht;switch(V=K[0]-he[0],W=K[1]-he[1],_){case yn:case Dr:{M&&(V=ot(P-A,at(yt-J,V)),F=A+V,B=J+V),C&&(W=ot(R-I,at(dt-j,W)),U=I+W,G=j+W);break}case Jt:{it[1]?(M&&(F=ot(P,at(yt,it[0][0])),B=ot(P,at(yt,it[1][0])),M=1),C&&(U=ot(R,at(dt,it[0][1])),G=ot(R,at(dt,it[1][1])),C=1)):(M<0?(V=ot(P-A,at(yt-A,V)),F=A+V,B=J):M>0&&(V=ot(P-J,at(yt-J,V)),F=A,B=J+V),C<0?(W=ot(R-I,at(dt-I,W)),U=I+W,G=j):C>0&&(W=ot(R-j,at(dt-j,W)),U=I,G=j+W));break}case te:{M&&(F=ot(P,at(yt,A-V*M)),B=ot(P,at(yt,J+V*M))),C&&(U=ot(R,at(dt,I-W*C)),G=ot(R,at(dt,j+W*C)));break}}B<F&&(M*=-1,Ht=A,A=J,J=Ht,Ht=F,F=B,B=Ht,y in Ir&&E.attr("cursor",Ut[y=Ir[y]])),G<U&&(C*=-1,Ht=I,I=j,j=Ht,Ht=U,U=G,G=Ht,y in Yr&&E.attr("cursor",Ut[y=Yr[y]])),b.selection&&(T=b.selection),Gt&&(F=T[0][0],B=T[1][0]),Qt&&(U=T[0][1],G=T[1][1]),(T[0][0]!==F||T[0][1]!==U||T[1][0]!==B||T[1][1]!==G)&&(b.selection=[[F,U],[B,G]],u.call(p),Pt.brush(D,_.name))}function O(D){if(Cl(D),D.touches){if(D.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Ds(D.view,fe),Y.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);N.attr("pointer-events","all"),E.attr("cursor",Ut.overlay),b.selection&&(T=b.selection),Ul(T)&&(b.selection=null,u.call(p)),Pt.end(D,_.name)}function st(D){switch(D.keyCode){case 16:{jt=M&&C;break}case 18:{_===Jt&&(M&&(J=B-V*M,A=F+V*M),C&&(j=G-W*C,I=U+W*C),_=te,Q(D));break}case 32:{(_===Jt||_===te)&&(M<0?J=B-V:M>0&&(A=F-V),C<0?j=G-W:C>0&&(I=U-W),_=yn,E.attr("cursor",Ut.selection),Q(D));break}default:return}mn(D)}function ut(D){switch(D.keyCode){case 16:{jt&&(Gt=Qt=jt=!1,Q(D));break}case 18:{_===te&&(M<0?J=B:M>0&&(A=F),C<0?j=G:C>0&&(I=U),_=Jt,Q(D));break}case 32:{_===yn&&(D.altKey?(M&&(J=B-V*M,A=F+V*M),C&&(j=G-W*C,I=U+W*C),_=te):(M<0?J=B:M>0&&(A=F),C<0?j=G:C>0&&(I=U),_=Jt),E.attr("cursor",Ut[y]),Q(D));break}default:return}mn(D)}}function d(g){l(this,arguments).moved(g)}function m(g){l(this,arguments).ended(g)}function v(){var g=this.__brush||{selection:null};return g.extent=Fr(e.apply(this,arguments)),g.dim=t,g}return c.extent=function(g){return arguments.length?(e=typeof g=="function"?g:pn(Fr(g)),c):e},c.filter=function(g){return arguments.length?(n=typeof g=="function"?g:pn(!!g),c):n},c.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:pn(!!g),c):r},c.handleSize=function(g){return arguments.length?(a=+g,c):a},c.keyModifiers=function(g){return arguments.length?(i=!!g,c):i},c.on=function(){var g=o.on.apply(o,arguments);return g===o?c:g},c}var Rr={},wn={},xn=34,de=10,bn=13;function Vi(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Il(t,e){var n=Vi(t);return function(r,i){return e(n(r),i,t)}}function Hr(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function ft(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Yl(t){return t<0?"-"+ft(-t,6):t>9999?"+"+ft(t,6):ft(t,4)}function Rl(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Yl(t.getUTCFullYear())+"-"+ft(t.getUTCMonth()+1,2)+"-"+ft(t.getUTCDate(),2)+(i?"T"+ft(e,2)+":"+ft(n,2)+":"+ft(r,2)+"."+ft(i,3)+"Z":r?"T"+ft(e,2)+":"+ft(n,2)+":"+ft(r,2)+"Z":n||e?"T"+ft(e,2)+":"+ft(n,2)+"Z":"")}function Hl(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var d,m,v=i(f,function(g,p){if(d)return d(g,p-1);m=g,d=h?Il(g,h):Vi(g)});return v.columns=m||[],v}function i(f,h){var d=[],m=f.length,v=0,g=0,p,y=m<=0,_=!1;f.charCodeAt(m-1)===de&&--m,f.charCodeAt(m-1)===bn&&--m;function M(){if(y)return wn;if(_)return _=!1,Rr;var b,w=v,T;if(f.charCodeAt(w)===xn){for(;v++<m&&f.charCodeAt(v)!==xn||f.charCodeAt(++v)===xn;);return(b=v)>=m?y=!0:(T=f.charCodeAt(v++))===de?_=!0:T===bn&&(_=!0,f.charCodeAt(v)===de&&++v),f.slice(w+1,b-1).replace(/""/g,'"')}for(;v<m;){if((T=f.charCodeAt(b=v++))===de)_=!0;else if(T===bn)_=!0,f.charCodeAt(v)===de&&++v;else if(T!==n)continue;return f.slice(w,b)}return y=!0,f.slice(w,m)}for(;(p=M())!==wn;){for(var C=[];p!==Rr&&p!==wn;)C.push(p),p=M();h&&(C=h(C,g++))==null||d.push(C)}return d}function o(f,h){return f.map(function(d){return h.map(function(m){return l(d[m])}).join(t)})}function a(f,h){return h==null&&(h=Hr(f)),[h.map(l).join(t)].concat(o(f,h)).join(`
`)}function s(f,h){return h==null&&(h=Hr(f)),o(f,h).join(`
`)}function c(f){return f.map(u).join(`
`)}function u(f){return f.map(l).join(t)}function l(f){return f==null?"":f instanceof Date?Rl(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:c,formatRow:u,formatValue:l}}var zl=Hl(","),Pl=zl.parse;function Ol(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Ll(t,e){return fetch(t,e).then(Ol)}function Wl(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Ll(e,n).then(function(i){return t(i,r)})}}var ql=Wl(Pl);function Vl(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Xi(this.cover(e,n),e,n,t)}function Xi(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o=t._root,a={data:r},s=t._x0,c=t._y0,u=t._x1,l=t._y1,f,h,d,m,v,g,p,y;if(!o)return t._root=a,t;for(;o.length;)if((v=e>=(f=(s+u)/2))?s=f:u=f,(g=n>=(h=(c+l)/2))?c=h:l=h,i=o,!(o=o[p=g<<1|v]))return i[p]=a,t;if(d=+t._x.call(null,o.data),m=+t._y.call(null,o.data),e===d&&n===m)return a.next=o,i?i[p]=a:t._root=a,t;do i=i?i[p]=new Array(4):t._root=new Array(4),(v=e>=(f=(s+u)/2))?s=f:u=f,(g=n>=(h=(c+l)/2))?c=h:l=h;while((p=g<<1|v)===(y=(m>=h)<<1|d>=f));return i[y]=o,i[p]=a,t}function Xl(t){var e,n,r=t.length,i,o,a=new Array(r),s=new Array(r),c=1/0,u=1/0,l=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=i,s[n]=o,i<c&&(c=i),i>l&&(l=i),o<u&&(u=o),o>f&&(f=o));if(c>l||u>f)return this;for(this.cover(c,u).cover(l,f),n=0;n<r;++n)Xi(this,a[n],s[n],t[n]);return this}function Bl(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var a=i-n||1,s=this._root,c,u;n>t||t>=i||r>e||e>=o;)switch(u=(e<r)<<1|t<n,c=new Array(4),c[u]=s,s=c,a*=2,u){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Zl(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function jl(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function lt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Gl(t,e,n){var r,i=this._x0,o=this._y0,a,s,c,u,l=this._x1,f=this._y1,h=[],d=this._root,m,v;for(d&&h.push(new lt(d,i,o,l,f)),n==null?n=1/0:(i=t-n,o=e-n,l=t+n,f=e+n,n*=n);m=h.pop();)if(!(!(d=m.node)||(a=m.x0)>l||(s=m.y0)>f||(c=m.x1)<i||(u=m.y1)<o))if(d.length){var g=(a+c)/2,p=(s+u)/2;h.push(new lt(d[3],g,p,c,u),new lt(d[2],a,p,g,u),new lt(d[1],g,s,c,p),new lt(d[0],a,s,g,p)),(v=(e>=p)<<1|t>=g)&&(m=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=m)}else{var y=t-+this._x.call(null,d.data),_=e-+this._y.call(null,d.data),M=y*y+_*_;if(M<n){var C=Math.sqrt(n=M);i=t-C,o=e-C,l=t+C,f=e+C,r=d.data}}return r}function Ql(t){if(isNaN(l=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,o,a=this._x0,s=this._y0,c=this._x1,u=this._y1,l,f,h,d,m,v,g,p;if(!n)return this;if(n.length)for(;;){if((m=l>=(h=(a+c)/2))?a=h:c=h,(v=f>=(d=(s+u)/2))?s=d:u=d,e=n,!(n=n[g=v<<1|m]))return this;if(!n.length)break;(e[g+1&3]||e[g+2&3]||e[g+3&3])&&(r=e,p=g)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):e?(o?e[g]=o:delete e[g],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[p]=n:this._root=n),this):(this._root=o,this)}function Kl(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Jl(){return this._root}function tc(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function ec(t){var e=[],n,r=this._root,i,o,a,s,c;for(r&&e.push(new lt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,o=n.x0,a=n.y0,s=n.x1,c=n.y1)&&r.length){var u=(o+s)/2,l=(a+c)/2;(i=r[3])&&e.push(new lt(i,u,l,s,c)),(i=r[2])&&e.push(new lt(i,o,l,u,c)),(i=r[1])&&e.push(new lt(i,u,a,s,l)),(i=r[0])&&e.push(new lt(i,o,a,u,l))}return this}function nc(t){var e=[],n=[],r;for(this._root&&e.push(new lt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,c=r.x1,u=r.y1,l=(a+c)/2,f=(s+u)/2;(o=i[0])&&e.push(new lt(o,a,s,l,f)),(o=i[1])&&e.push(new lt(o,l,s,c,f)),(o=i[2])&&e.push(new lt(o,a,f,l,u)),(o=i[3])&&e.push(new lt(o,l,f,c,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function rc(t){return t[0]}function ic(t){return arguments.length?(this._x=t,this):this._x}function oc(t){return t[1]}function ac(t){return arguments.length?(this._y=t,this):this._y}function Bi(t,e,n){var r=new Kn(e??rc,n??oc,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Kn(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function zr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var ct=Bi.prototype=Kn.prototype;ct.copy=function(){var t=new Kn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=zr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=zr(r));return t};ct.add=Vl;ct.addAll=Xl;ct.cover=Bl;ct.data=Zl;ct.extent=jl;ct.find=Gl;ct.remove=Ql;ct.removeAll=Kl;ct.root=Jl;ct.size=tc;ct.visit=ec;ct.visitAfter=nc;ct.x=ic;ct.y=ac;function kt(t){return function(){return t}}function Pr(t){return(t()-.5)*1e-6}function sc(t){return t.x+t.vx}function uc(t){return t.y+t.vy}function Zi(t){var e,n,r,i=1,o=1;typeof t!="function"&&(t=kt(t==null?1:+t));function a(){for(var u,l=e.length,f,h,d,m,v,g,p=0;p<o;++p)for(f=Bi(e,sc,uc).visitAfter(s),u=0;u<l;++u)h=e[u],v=n[h.index],g=v*v,d=h.x+h.vx,m=h.y+h.vy,f.visit(y);function y(_,M,C,b,w){var T=_.data,P=_.r,A=v+P;if(T){if(T.index>h.index){var F=d-T.x-T.vx,R=m-T.y-T.vy,I=F*F+R*R;I<A*A&&(F===0&&(F=Pr(r),I+=F*F),R===0&&(R=Pr(r),I+=R*R),I=(A-(I=Math.sqrt(I)))/I*i,h.vx+=(F*=I)*(A=(P*=P)/(g+P)),h.vy+=(R*=I)*A,T.vx-=F*(A=1-A),T.vy-=R*A)}return}return M>d+A||b<d-A||C>m+A||w<m-A}}function s(u){if(u.data)return u.r=n[u.data.index];for(var l=u.r=0;l<4;++l)u[l]&&u[l].r>u.r&&(u.r=u[l].r)}function c(){if(e){var u,l=e.length,f;for(n=new Array(l),u=0;u<l;++u)f=e[u],n[f.index]=+t(f,u,e)}}return a.initialize=function(u,l){e=u,r=l,c()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(t=typeof u=="function"?u:kt(+u),c(),a):t},a}const lc=1664525,cc=1013904223,Or=4294967296;function fc(){let t=1;return()=>(t=(lc*t+cc)%Or)/Or}var hc=10,gc=Math.PI*(3-Math.sqrt(5));function ji(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,c=jn(f),u=on("tick","end"),l=fc();t==null&&(t=[]);function f(){h(),u.call("tick",e),n<r&&(c.stop(),u.call("end",e))}function h(v){var g,p=t.length,y;v===void 0&&(v=1);for(var _=0;_<v;++_)for(n+=(o-n)*i,s.forEach(function(M){M(n)}),g=0;g<p;++g)y=t[g],y.fx==null?y.x+=y.vx*=a:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=a:(y.y=y.fy,y.vy=0);return e}function d(){for(var v=0,g=t.length,p;v<g;++v){if(p=t[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var y=hc*Math.sqrt(.5+v),_=v*gc;p.x=y*Math.cos(_),p.y=y*Math.sin(_)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function m(v){return v.initialize&&v.initialize(t,l),v}return d(),e={tick:h,restart:function(){return c.restart(f),e},stop:function(){return c.stop(),e},nodes:function(v){return arguments.length?(t=v,d(),s.forEach(m),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(a=1-v,e):1-a},randomSource:function(v){return arguments.length?(l=v,s.forEach(m),e):l},force:function(v,g){return arguments.length>1?(g==null?s.delete(v):s.set(v,m(g)),e):s.get(v)},find:function(v,g,p){var y=0,_=t.length,M,C,b,w,T;for(p==null?p=1/0:p*=p,y=0;y<_;++y)w=t[y],M=v-w.x,C=g-w.y,b=M*M+C*C,b<p&&(T=w,p=b);return T},on:function(v,g){return arguments.length>1?(u.on(v,g),e):u.on(v)}}}function Gi(t){var e=kt(.1),n,r,i;typeof t!="function"&&(t=kt(t==null?0:+t));function o(s){for(var c=0,u=n.length,l;c<u;++c)l=n[c],l.vx+=(i[c]-l.x)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kt(+s),a(),o):e},o.x=function(s){return arguments.length?(t=typeof s=="function"?s:kt(+s),a(),o):t},o}function Qi(t){var e=kt(.1),n,r,i;typeof t!="function"&&(t=kt(t==null?0:+t));function o(s){for(var c=0,u=n.length,l;c<u;++c)l=n[c],l.vy+=(i[c]-l.y)*r[c]*s}function a(){if(n){var s,c=n.length;for(r=new Array(c),i=new Array(c),s=0;s<c;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(e=typeof s=="function"?s:kt(+s),a(),o):e},o.y=function(s){return arguments.length?(t=typeof s=="function"?s:kt(+s),a(),o):t},o}function dc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function pc(t){return function(){return t}}function mc(t){return+t}var Lr=[0,1];function re(t){return t}function Ln(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:pc(isNaN(e)?NaN:.5)}function yc(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function vc(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ln(i,r),o=n(a,o)):(r=Ln(r,i),o=n(o,a)),function(s){return o(r(s))}}function _c(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ln(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var c=Ao(t,s,1,r)-1;return o[c](i[c](s))}}function wc(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function xc(){var t=Lr,e=Lr,n=sn,r,i,o,a=re,s,c,u;function l(){var h=Math.min(t.length,e.length);return a!==re&&(a=yc(t[0],t[h-1])),s=h>2?_c:vc,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?o:(c||(c=s(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=s(e,t.map(r),_t)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,mc),l()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),l()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=tu,l()},f.clamp=function(h){return arguments.length?(a=h?!0:re,l()):a!==re},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,d){return r=h,i=d,l()}}function bc(){return xc()(re,re)}function Mc(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Mn=new Date,kn=new Date;function nt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const c=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return c;let u;do c.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return c},i.filter=o=>nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Mn.setTime(+o),kn.setTime(+a),t(Mn),t(kn),Math.floor(n(Mn,kn))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Je=nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Je.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Je);Je.range;const Et=1e3,vt=Et*60,Ft=vt*60,Yt=Ft*24,Jn=Yt*7,Wr=Yt*30,Tn=Yt*365,ie=nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Et)},(t,e)=>(e-t)/Et,t=>t.getUTCSeconds());ie.range;const tr=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Et)},(t,e)=>{t.setTime(+t+e*vt)},(t,e)=>(e-t)/vt,t=>t.getMinutes());tr.range;const kc=nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*vt)},(t,e)=>(e-t)/vt,t=>t.getUTCMinutes());kc.range;const er=nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Et-t.getMinutes()*vt)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getHours());er.range;const Tc=nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Ft)},(t,e)=>(e-t)/Ft,t=>t.getUTCHours());Tc.range;const Ue=nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*vt)/Yt,t=>t.getDate()-1);Ue.range;const nr=nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yt,t=>t.getUTCDate()-1);nr.range;const Cc=nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Yt,t=>Math.floor(t/Yt));Cc.range;function Bt(t){return nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*vt)/Jn)}const cn=Bt(0),tn=Bt(1),Nc=Bt(2),Ac=Bt(3),le=Bt(4),$c=Bt(5),Sc=Bt(6);cn.range;tn.range;Nc.range;Ac.range;le.range;$c.range;Sc.range;function Zt(t){return nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Jn)}const Ki=Zt(0),en=Zt(1),Dc=Zt(2),Uc=Zt(3),ce=Zt(4),Ec=Zt(5),Fc=Zt(6);Ki.range;en.range;Dc.range;Uc.range;ce.range;Ec.range;Fc.range;const rr=nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());rr.range;const Ic=nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Ic.range;const Rt=nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Rt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Rt.range;const Xt=nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Xt.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Xt.range;function Yc(t,e,n,r,i,o){const a=[[ie,1,Et],[ie,5,5*Et],[ie,15,15*Et],[ie,30,30*Et],[o,1,vt],[o,5,5*vt],[o,15,15*vt],[o,30,30*vt],[i,1,Ft],[i,3,3*Ft],[i,6,6*Ft],[i,12,12*Ft],[r,1,Yt],[r,2,2*Yt],[n,1,Jn],[e,1,Wr],[e,3,3*Wr],[t,1,Tn]];function s(u,l,f){const h=l<u;h&&([u,l]=[l,u]);const d=f&&typeof f.range=="function"?f:c(u,l,f),m=d?d.range(u,+l+1):[];return h?m.reverse():m}function c(u,l,f){const h=Math.abs(l-u)/f,d=Wn(([,,g])=>g).right(a,h);if(d===a.length)return t.every(gr(u/Tn,l/Tn,f));if(d===0)return Je.every(Math.max(gr(u,l,f),1));const[m,v]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return m.every(v)}return[s,c]}const[Rc,Hc]=Yc(Rt,rr,cn,Ue,er,tr);function Cn(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Nn(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function pe(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function zc(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,c=t.shortMonths,u=me(i),l=ye(i),f=me(o),h=ye(o),d=me(a),m=ye(a),v=me(s),g=ye(s),p=me(c),y=ye(c),_={a:B,A:dt,b:j,B:G,c:null,d:jr,e:jr,f:lf,g:_f,G:xf,H:af,I:sf,j:uf,L:Ji,m:cf,M:ff,p:V,q:W,Q:Kr,s:Jr,S:hf,u:gf,U:df,V:pf,w:mf,W:yf,x:null,X:null,y:vf,Y:wf,Z:bf,"%":Qr},M={a:fe,A:jt,b:Gt,B:Qt,c:null,d:Gr,e:Gr,f:Cf,g:Yf,G:Hf,H:Mf,I:kf,j:Tf,L:eo,m:Nf,M:Af,p:it,q:Pt,Q:Kr,s:Jr,S:$f,u:Sf,U:Df,V:Uf,w:Ef,W:Ff,x:null,X:null,y:If,Y:Rf,Z:zf,"%":Qr},C={a:A,A:F,b:R,B:I,c:U,d:Br,e:Br,f:ef,g:Xr,G:Vr,H:Zr,I:Zr,j:Qc,L:tf,m:Gc,M:Kc,p:P,q:jc,Q:rf,s:of,S:Jc,u:qc,U:Vc,V:Xc,w:Wc,W:Bc,x:yt,X:J,y:Xr,Y:Vr,Z:Zc,"%":nf};_.x=b(n,_),_.X=b(r,_),_.c=b(e,_),M.x=b(n,M),M.X=b(r,M),M.c=b(e,M);function b(N,E){return function(Y){var x=[],Q=-1,O=0,st=N.length,ut,D,K;for(Y instanceof Date||(Y=new Date(+Y));++Q<st;)N.charCodeAt(Q)===37&&(x.push(N.slice(O,Q)),(D=qr[ut=N.charAt(++Q)])!=null?ut=N.charAt(++Q):D=ut==="e"?" ":"0",(K=E[ut])&&(ut=K(Y,D)),x.push(ut),O=Q+1);return x.push(N.slice(O,Q)),x.join("")}}function w(N,E){return function(Y){var x=pe(1900,void 0,1),Q=T(x,N,Y+="",0),O,st;if(Q!=Y.length)return null;if("Q"in x)return new Date(x.Q);if("s"in x)return new Date(x.s*1e3+("L"in x?x.L:0));if(E&&!("Z"in x)&&(x.Z=0),"p"in x&&(x.H=x.H%12+x.p*12),x.m===void 0&&(x.m="q"in x?x.q:0),"V"in x){if(x.V<1||x.V>53)return null;"w"in x||(x.w=1),"Z"in x?(O=Nn(pe(x.y,0,1)),st=O.getUTCDay(),O=st>4||st===0?en.ceil(O):en(O),O=nr.offset(O,(x.V-1)*7),x.y=O.getUTCFullYear(),x.m=O.getUTCMonth(),x.d=O.getUTCDate()+(x.w+6)%7):(O=Cn(pe(x.y,0,1)),st=O.getDay(),O=st>4||st===0?tn.ceil(O):tn(O),O=Ue.offset(O,(x.V-1)*7),x.y=O.getFullYear(),x.m=O.getMonth(),x.d=O.getDate()+(x.w+6)%7)}else("W"in x||"U"in x)&&("w"in x||(x.w="u"in x?x.u%7:"W"in x?1:0),st="Z"in x?Nn(pe(x.y,0,1)).getUTCDay():Cn(pe(x.y,0,1)).getDay(),x.m=0,x.d="W"in x?(x.w+6)%7+x.W*7-(st+5)%7:x.w+x.U*7-(st+6)%7);return"Z"in x?(x.H+=x.Z/100|0,x.M+=x.Z%100,Nn(x)):Cn(x)}}function T(N,E,Y,x){for(var Q=0,O=E.length,st=Y.length,ut,D;Q<O;){if(x>=st)return-1;if(ut=E.charCodeAt(Q++),ut===37){if(ut=E.charAt(Q++),D=C[ut in qr?E.charAt(Q++):ut],!D||(x=D(N,Y,x))<0)return-1}else if(ut!=Y.charCodeAt(x++))return-1}return x}function P(N,E,Y){var x=u.exec(E.slice(Y));return x?(N.p=l.get(x[0].toLowerCase()),Y+x[0].length):-1}function A(N,E,Y){var x=d.exec(E.slice(Y));return x?(N.w=m.get(x[0].toLowerCase()),Y+x[0].length):-1}function F(N,E,Y){var x=f.exec(E.slice(Y));return x?(N.w=h.get(x[0].toLowerCase()),Y+x[0].length):-1}function R(N,E,Y){var x=p.exec(E.slice(Y));return x?(N.m=y.get(x[0].toLowerCase()),Y+x[0].length):-1}function I(N,E,Y){var x=v.exec(E.slice(Y));return x?(N.m=g.get(x[0].toLowerCase()),Y+x[0].length):-1}function U(N,E,Y){return T(N,e,E,Y)}function yt(N,E,Y){return T(N,n,E,Y)}function J(N,E,Y){return T(N,r,E,Y)}function B(N){return a[N.getDay()]}function dt(N){return o[N.getDay()]}function j(N){return c[N.getMonth()]}function G(N){return s[N.getMonth()]}function V(N){return i[+(N.getHours()>=12)]}function W(N){return 1+~~(N.getMonth()/3)}function fe(N){return a[N.getUTCDay()]}function jt(N){return o[N.getUTCDay()]}function Gt(N){return c[N.getUTCMonth()]}function Qt(N){return s[N.getUTCMonth()]}function it(N){return i[+(N.getUTCHours()>=12)]}function Pt(N){return 1+~~(N.getUTCMonth()/3)}return{format:function(N){var E=b(N+="",_);return E.toString=function(){return N},E},parse:function(N){var E=w(N+="",!1);return E.toString=function(){return N},E},utcFormat:function(N){var E=b(N+="",M);return E.toString=function(){return N},E},utcParse:function(N){var E=w(N+="",!0);return E.toString=function(){return N},E}}}var qr={"-":"",_:" ",0:"0"},rt=/^\s*\d+/,Pc=/^%/,Oc=/[\\^$*+?|[\]().{}]/g;function H(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Lc(t){return t.replace(Oc,"\\$&")}function me(t){return new RegExp("^(?:"+t.map(Lc).join("|")+")","i")}function ye(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function Wc(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function qc(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Vc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Xc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Bc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=rt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Xr(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Zc(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jc(t,e,n){var r=rt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Gc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Br(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Qc(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Zr(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Kc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Jc(t,e,n){var r=rt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function tf(t,e,n){var r=rt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ef(t,e,n){var r=rt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function nf(t,e,n){var r=Pc.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function rf(t,e,n){var r=rt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function of(t,e,n){var r=rt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function jr(t,e){return H(t.getDate(),e,2)}function af(t,e){return H(t.getHours(),e,2)}function sf(t,e){return H(t.getHours()%12||12,e,2)}function uf(t,e){return H(1+Ue.count(Rt(t),t),e,3)}function Ji(t,e){return H(t.getMilliseconds(),e,3)}function lf(t,e){return Ji(t,e)+"000"}function cf(t,e){return H(t.getMonth()+1,e,2)}function ff(t,e){return H(t.getMinutes(),e,2)}function hf(t,e){return H(t.getSeconds(),e,2)}function gf(t){var e=t.getDay();return e===0?7:e}function df(t,e){return H(cn.count(Rt(t)-1,t),e,2)}function to(t){var e=t.getDay();return e>=4||e===0?le(t):le.ceil(t)}function pf(t,e){return t=to(t),H(le.count(Rt(t),t)+(Rt(t).getDay()===4),e,2)}function mf(t){return t.getDay()}function yf(t,e){return H(tn.count(Rt(t)-1,t),e,2)}function vf(t,e){return H(t.getFullYear()%100,e,2)}function _f(t,e){return t=to(t),H(t.getFullYear()%100,e,2)}function wf(t,e){return H(t.getFullYear()%1e4,e,4)}function xf(t,e){var n=t.getDay();return t=n>=4||n===0?le(t):le.ceil(t),H(t.getFullYear()%1e4,e,4)}function bf(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+H(e/60|0,"0",2)+H(e%60,"0",2)}function Gr(t,e){return H(t.getUTCDate(),e,2)}function Mf(t,e){return H(t.getUTCHours(),e,2)}function kf(t,e){return H(t.getUTCHours()%12||12,e,2)}function Tf(t,e){return H(1+nr.count(Xt(t),t),e,3)}function eo(t,e){return H(t.getUTCMilliseconds(),e,3)}function Cf(t,e){return eo(t,e)+"000"}function Nf(t,e){return H(t.getUTCMonth()+1,e,2)}function Af(t,e){return H(t.getUTCMinutes(),e,2)}function $f(t,e){return H(t.getUTCSeconds(),e,2)}function Sf(t){var e=t.getUTCDay();return e===0?7:e}function Df(t,e){return H(Ki.count(Xt(t)-1,t),e,2)}function no(t){var e=t.getUTCDay();return e>=4||e===0?ce(t):ce.ceil(t)}function Uf(t,e){return t=no(t),H(ce.count(Xt(t),t)+(Xt(t).getUTCDay()===4),e,2)}function Ef(t){return t.getUTCDay()}function Ff(t,e){return H(en.count(Xt(t)-1,t),e,2)}function If(t,e){return H(t.getUTCFullYear()%100,e,2)}function Yf(t,e){return t=no(t),H(t.getUTCFullYear()%100,e,2)}function Rf(t,e){return H(t.getUTCFullYear()%1e4,e,4)}function Hf(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ce(t):ce.ceil(t),H(t.getUTCFullYear()%1e4,e,4)}function zf(){return"+0000"}function Qr(){return"%"}function Kr(t){return+t}function Jr(t){return Math.floor(+t/1e3)}var ee,ir;Pf({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Pf(t){return ee=zc(t),ir=ee.format,ee.parse,ee.utcFormat,ee.utcParse,ee}function Of(t){return new Date(t)}function Lf(t){return t instanceof Date?+t:+new Date(+t)}function ro(t,e,n,r,i,o,a,s,c,u){var l=bc(),f=l.invert,h=l.domain,d=u(".%L"),m=u(":%S"),v=u("%I:%M"),g=u("%I %p"),p=u("%a %d"),y=u("%b %d"),_=u("%B"),M=u("%Y");function C(b){return(c(b)<b?d:s(b)<b?m:a(b)<b?v:o(b)<b?g:r(b)<b?i(b)<b?p:y:n(b)<b?_:M)(b)}return l.invert=function(b){return new Date(f(b))},l.domain=function(b){return arguments.length?h(Array.from(b,Lf)):h().map(Of)},l.ticks=function(b){var w=h();return t(w[0],w[w.length-1],b??10)},l.tickFormat=function(b,w){return w==null?C:u(w)},l.nice=function(b){var w=h();return(!b||typeof b.range!="function")&&(b=e(w[0],w[w.length-1],b??10)),b?h(Mc(w,b)):l},l.copy=function(){return wc(l,ro(t,e,n,r,i,o,a,s,c,u))},l}function Wf(){return dc.apply(ro(Rc,Hc,Rt,rr,cn,Ue,er,tr,ie,ir).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function we(t,e,n){this.k=t,this.x=e,this.y=n}we.prototype={constructor:we,scale:function(t){return t===1?this:new we(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new we(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};we.prototype;function qf(t){let e,n,r;return{c(){e=S("div"),n=di("svg"),$(n,"class","svelte-188n190"),$(e,"class","beeswarm svelte-188n190"),Me(()=>t[7].call(e))},m(i,o){q(i,e,o),k(e,n),t[6](n),r=mi(e,t[7].bind(e))},p:Z,i:Z,o:Z,d(i){i&&z(e),t[6](null),r()}}}function Vf(t,e,n){let r,{data:i}=e,{selectedIndicator:o}=e;const a=vi();let s,c,u,l=null;function f(){if(!s||!c||!u||!(r!=null&&r.length))return;const m={top:20,right:20,bottom:30,left:40},v=c-m.left-m.right,g=u-m.top-m.bottom;ht(s).selectAll("*").remove();const p=ht(s).append("g").attr("transform",`translate(${m.left},${m.top})`),y=+Ho(r,U=>U.year),_=+Ro(r,U=>U.year),M=Wf().domain([new Date(1983,0),new Date(2025,0)]).range([0,v]),C=r.map(U=>({id:Math.random(),fx:M(new Date(U.year,0)),y:g/2,year:U.year,country:U.country,region:U.region,indicator:U.indicator,value:U.value,color:U.color})),b=ji(C).force("y",Qi(g/2).strength(.1)).force("collide",Zi().radius(6).strength(1)).force("x",Gi(U=>U.fx).strength(1)).stop();for(let U=0;U<300;++U)b.tick();const w=p.append("g").attr("class","points");w.selectAll("circle").data(C).join("circle").attr("cx",U=>U.fx).attr("cy",g).attr("r",0).attr("fill",U=>U.color).attr("stroke","none").transition().duration(1500).ease(xl).attr("cy",U=>U.y).attr("r",5);const P=zo(1984,_+1,5).map(U=>new Date(U,0));p.append("g").attr("transform",`translate(0,${g})`).call(Bo(M).tickValues(P).tickFormat(ir("%Y")));const A=M(new Date(1985,0))-M(new Date(1984,0));function F(U){var G;if(!U.selection)return;const[yt,J]=U.selection,B=r.filter(V=>{const W=M(new Date(V.year,0));return W>=yt&&W<=J}),dt=((G=B[0])==null?void 0:G.year)||null,j=B||[];console.log("Dispatching yearSelect:",{year:dt,events:j}),w.selectAll("circle").data(C).attr("stroke",V=>B.find(W=>W.year===V.year)?"#000":"none").attr("stroke-width",V=>B.find(W=>W.year===V.year)?2:0),a("yearSelect",{year:dt,events:j})}const R=M(new Date(y,0)),I=p.append("g").attr("class","brush");l=El().extent([[0,0],[v,g]]).on("brush",F),I.call(l),R&&l.move(I,[R-A/2,R+A/2])}rn(()=>{(r==null?void 0:r.length)>0&&f()});function h(m){qe[m?"unshift":"push"](()=>{s=m,n(0,s)})}function d(){c=this.clientWidth,u=this.clientHeight,n(1,c),n(2,u)}return t.$$set=m=>{"data"in m&&n(3,i=m.data),"selectedIndicator"in m&&n(4,o=m.selectedIndicator)},t.$$.update=()=>{t.$$.dirty&24&&n(5,r=i.filter(m=>(console.log("Checking indicator match:",{dataIndicator:m.indicator,selectedIndicator:o,matches:m.indicator===o}),m.indicator===o)).map(m=>({...m,year:+m.year<1984?1984:+m.year})).filter(m=>!isNaN(m.year))),t.$$.dirty&32&&(r==null?void 0:r.length)>0&&f()},[s,c,u,i,o,r,h,d]}class Xf extends $t{constructor(e){super(),At(this,e,Vf,qf,Nt,{data:3,selectedIndicator:4})}}function ti(t,e,n){const r=t.slice();return r[3]=e[n][0],r[4]=e[n][1],r}function ei(t,e,n){const r=t.slice();return r[7]=e[n],r}function Bf(t){let e;return{c(){e=S("div"),e.innerHTML="<p>Hover over the points above to see details</p>",$(e,"class","placeholder")},m(n,r){q(n,e,r)},p:Z,d(n){n&&z(e)}}}function Zf(t){let e,n,r,i,o,a,s=zt([...t[2]]),c=[];for(let u=0;u<s.length;u+=1)c[u]=ri(ti(t,s,u));return{c(){e=S("div"),n=S("h3"),r=tt(t[1]),i=tt(" Milestones"),o=L(),a=S("div");for(let u=0;u<c.length;u+=1)c[u].c();$(n,"class","svelte-1mxnad2"),$(a,"class","events-grid"),$(e,"class","timeline-details")},m(u,l){q(u,e,l),k(e,n),k(n,r),k(n,i),k(e,o),k(e,a);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(a,null)},p(u,l){if(l&2&&pt(r,u[1]),l&4){s=zt([...u[2]]);let f;for(f=0;f<s.length;f+=1){const h=ti(u,s,f);c[f]?c[f].p(h,l):(c[f]=ri(h),c[f].c(),c[f].m(a,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=s.length}},d(u){u&&z(e),nn(c,u)}}}function ni(t){let e,n,r=t[7].country+"",i,o,a,s=t[7].indicator+"",c,u,l,f=t[7].value==="Yes"?"Full Implementation":"Partial Implementation",h,d;return{c(){e=S("li"),n=S("span"),i=tt(r),o=L(),a=S("span"),c=tt(s),u=L(),l=S("span"),h=tt(f),d=L(),$(n,"class","country svelte-1mxnad2"),$(a,"class","indicator svelte-1mxnad2"),$(l,"class","status svelte-1mxnad2"),ur(l,"partial",t[7].value==="Partially"),$(e,"class","svelte-1mxnad2")},m(m,v){q(m,e,v),k(e,n),k(n,i),k(e,o),k(e,a),k(a,c),k(e,u),k(e,l),k(l,h),k(e,d)},p(m,v){v&4&&r!==(r=m[7].country+"")&&pt(i,r),v&4&&s!==(s=m[7].indicator+"")&&pt(c,s),v&4&&f!==(f=m[7].value==="Yes"?"Full Implementation":"Partial Implementation")&&pt(h,f),v&4&&ur(l,"partial",m[7].value==="Partially")},d(m){m&&z(e)}}}function ri(t){let e,n,r=t[3]+"",i,o,a,s,c=zt(t[4]),u=[];for(let l=0;l<c.length;l+=1)u[l]=ni(ei(t,c,l));return{c(){e=S("div"),n=S("h4"),i=tt(r),o=L(),a=S("ul");for(let l=0;l<u.length;l+=1)u[l].c();s=L(),$(n,"class","svelte-1mxnad2"),$(a,"class","country-grid svelte-1mxnad2"),$(e,"class","region-group")},m(l,f){q(l,e,f),k(e,n),k(n,i),k(e,o),k(e,a);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(a,null);k(e,s)},p(l,f){if(f&4&&r!==(r=l[3]+"")&&pt(i,r),f&4){c=zt(l[4]);let h;for(h=0;h<c.length;h+=1){const d=ei(l,c,h);u[h]?u[h].p(d,f):(u[h]=ni(d),u[h].c(),u[h].m(a,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=c.length}},d(l){l&&z(e),nn(u,l)}}}function jf(t){let e;function n(o,a){return o[1]&&o[0].length>0?Zf:Bf}let r=n(t),i=r(t);return{c(){i.c(),e=pi()},m(o,a){i.m(o,a),q(o,e,a)},p(o,[a]){r===(r=n(o))&&i?i.p(o,a):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},i:Z,o:Z,d(o){o&&z(e),i.d(o)}}}function Gf(t,e,n){let r,{events:i=[]}=e,{year:o=null}=e;return t.$$set=a=>{"events"in a&&n(0,i=a.events),"year"in a&&n(1,o=a.year)},t.$$.update=()=>{t.$$.dirty&1&&n(2,r=Sn(i,a=>a.region))},[i,o,r]}class Qf extends $t{constructor(e){super(),At(this,e,Gf,jf,Nt,{events:0,year:1})}}function ii(t,e,n){const r=t.slice();return r[4]=e[n],r}function oi(t){let e,n=t[4]+"",r,i;return{c(){e=S("option"),r=tt(n),e.__value=i=t[4],ar(e,e.__value)},m(o,a){q(o,e,a),k(e,r)},p(o,a){a&1&&n!==(n=o[4]+"")&&pt(r,n),a&1&&i!==(i=o[4])&&(e.__value=i,ar(e,e.__value))},d(o){o&&z(e)}}}function Kf(t){let e,n,r,i,o,a,s=zt(t[0]),c=[];for(let u=0;u<s.length;u+=1)c[u]=oi(ii(t,s,u));return{c(){e=S("div"),n=S("label"),n.textContent="Select Indicator:",r=L(),i=S("select");for(let u=0;u<c.length;u+=1)c[u].c();$(n,"for","indicator"),$(n,"class","svelte-o395lv"),$(i,"id","indicator"),$(i,"class","svelte-o395lv"),$(e,"class","selector svelte-o395lv")},m(u,l){q(u,e,l),k(e,n),k(e,r),k(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null);sr(i,t[1]),o||(a=An(i,"change",t[2]),o=!0)},p(u,[l]){if(l&1){s=zt(u[0]);let f;for(f=0;f<s.length;f+=1){const h=ii(u,s,f);c[f]?c[f].p(h,l):(c[f]=oi(h),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=s.length}l&3&&sr(i,u[1])},i:Z,o:Z,d(u){u&&z(e),nn(c,u),o=!1,a()}}}function Jf(t,e,n){const r=vi();let{indicators:i=["Ratification of the UN Convention against Torture","Ratification of Optional Protocol (OPCAT)","Submission of initial report to CAT","Prohibition of torture in the constitution","Criminalisation of torture under domestic law","Designation of the National Preventive Mechanism (in law)","Operationality of the National Preventive Mechanism","Existence of National Human Rights Institution that fully complies with Paris Principles"].map(s=>s.trim())}=e,o=i[0];rn(()=>{r("select",{indicator:o})});function a(s){n(1,o=s.target.value),r("select",{indicator:o})}return t.$$set=s=>{"indicators"in s&&n(0,i=s.indicators)},[i,o,a]}class io extends $t{constructor(e){super(),At(this,e,Jf,Kf,Nt,{indicators:0})}}function ai(t){let e,n,r,i,o;n=new Xf({props:{data:t[3],selectedIndicator:t[0]}}),n.$on("yearSelect",t[5]);let a=t[1]&&si(t);return{c(){e=S("div"),Ct(n.$$.fragment),r=L(),a&&a.c(),i=pi(),$(e,"class","beeswarm-container svelte-dbdqb7")},m(s,c){q(s,e,c),xt(n,e,null),q(s,r,c),a&&a.m(s,c),q(s,i,c),o=!0},p(s,c){const u={};c&8&&(u.data=s[3]),c&1&&(u.selectedIndicator=s[0]),n.$set(u),s[1]?a?(a.p(s,c),c&2&&X(a,1)):(a=si(s),a.c(),X(a,1),a.m(i.parentNode,i)):a&&(ke(),et(a,1,1,()=>{a=null}),Te())},i(s){o||(X(n.$$.fragment,s),X(a),o=!0)},o(s){et(n.$$.fragment,s),et(a),o=!1},d(s){s&&(z(e),z(r),z(i)),bt(n),a&&a.d(s)}}}function si(t){let e,n,r;return n=new Qf({props:{events:t[2],year:t[1]}}),{c(){e=S("div"),Ct(n.$$.fragment),$(e,"class","details-container svelte-dbdqb7")},m(i,o){q(i,e,o),xt(n,e,null),r=!0},p(i,o){const a={};o&4&&(a.events=i[2]),o&2&&(a.year=i[1]),n.$set(a)},i(i){r||(X(n.$$.fragment,i),r=!0)},o(i){et(n.$$.fragment,i),r=!1},d(i){i&&z(e),bt(n)}}}function th(t){let e,n,r,i,o,a,s,c;a=new io({}),a.$on("select",t[4]);let u=t[0]&&ai(t);return{c(){e=S("section"),n=S("h2"),n.textContent="Progress Timeline",r=L(),i=S("p"),i.innerHTML=`Explore how countries have adopted various torture prevention measures over time. 
      Each dot represents a country and highlights a milestone in implementing anti-torture mechanisms. 
      For most indicators, progress is marked as <span class="text-label full svelte-dbdqb7">Yes (fully implemented)</span>. However, for &#39;Criminalisation of torture under domestic law,&#39; progress can be categorized as <span class="text-label full svelte-dbdqb7">Full</span> or <span class="text-label partial svelte-dbdqb7">Partial</span>.`,o=L(),Ct(a.$$.fragment),s=L(),u&&u.c(),$(n,"class","svelte-dbdqb7"),$(i,"class","description svelte-dbdqb7"),$(e,"class","timeline-section svelte-dbdqb7")},m(l,f){q(l,e,f),k(e,n),k(e,r),k(e,i),k(e,o),xt(a,e,null),k(e,s),u&&u.m(e,null),c=!0},p(l,[f]){l[0]?u?(u.p(l,f),f&1&&X(u,1)):(u=ai(l),u.c(),X(u,1),u.m(e,null)):u&&(ke(),et(u,1,1,()=>{u=null}),Te())},i(l){c||(X(a.$$.fragment,l),X(u),c=!0)},o(l){et(a.$$.fragment,l),et(u),c=!1},d(l){l&&z(e),bt(a),u&&u.d()}}}function eh(t,e,n){let r,{data:i}=e,o="Ratification of the UN Convention against Torture",a=null,s=[];function c(l){n(0,o=l.detail.indicator),n(1,a=null),n(2,s=[])}function u(l){n(1,a=l.detail.year),n(2,s=l.detail.events||[])}return t.$$set=l=>{"data"in l&&n(6,i=l.data)},t.$$.update=()=>{t.$$.dirty&64&&n(3,r=i.map(l=>({year:+l.Date,country:l.Country,region:l.Region,indicator:l.Indicator.trim(),value:l.Input,color:l.Input==="Yes"?"var(--color-primary)":"var(--color-primary-light)"})).filter(l=>l.value==="Yes"||l.value==="Partially"))},[o,a,s,r,c,u,i]}class nh extends $t{constructor(e){super(),At(this,e,eh,th,Nt,{data:6})}}function rh(t){let e,n,r,i,o;return{c(){e=S("div"),n=di("svg"),i=L(),o=S("div"),$(n,"class","svelte-3jkjlx"),$(e,"class","circles-viz svelte-3jkjlx"),Me(()=>t[5].call(e)),$(o,"id","tooltip"),$(o,"class","tooltip hidden svelte-3jkjlx")},m(a,s){q(a,e,s),k(e,n),t[4](n),r=mi(e,t[5].bind(e)),q(a,i,s),q(a,o,s)},p:Z,i:Z,o:Z,d(a){a&&(z(e),z(i),z(o)),t[4](null),r()}}}function ih(t,e,n){let{processedData:r}=e,i,o,a;function s(){if(!i||!o||!a||!(r!=null&&r.length))return;const l={top:30,right:50,bottom:50,left:50},f=o-l.left-l.right,h=a-l.top-l.bottom;ht(i).selectAll("*").remove();const d=ht(i).append("g").attr("transform",`translate(${l.left},${l.top})`),m=Math.min(20,Math.floor(f/(Math.sqrt(r.length)*3))),v={x:[m,f-m],y:[m,h-m]},g=[...new Set(r.map(w=>w.region))];console.log("Unique Regions:",g);const p={};g.forEach((w,T)=>{p[w]={x:f*(.2+.7*T/Math.max(1,g.length-1)),y:h*.5}}),console.log("Region Centers:",p);const y=ji(r).force("x",Gi(f/2).strength(.1)).force("y",Qi(h/2).strength(.1)).force("collide",Zi().radius(m+5).strength(.5)).force("cluster",C()).force("bounds",b(v)).on("tick",()=>{_.attr("transform",w=>{const T=(Math.random()-.5)*.5;return`translate(${w.x+T},${w.y+T})`})});for(let w=0;w<300;++w)y.tick();const _=d.selectAll("g").data(r).join("g").attr("transform",w=>`translate(${f/2},${h/2})`);_.transition().duration(1e3).delay((w,T)=>T*50).attr("transform",w=>`translate(${w.x},${w.y})`),setTimeout(()=>{y.alpha(.1)},1e3+r.length*50),_.append("circle").attr("r",0).attr("fill","white").attr("stroke",w=>w.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)").attr("stroke-width",3).transition().duration(500).delay((w,T)=>T*50).attr("r",m),_.append("image").attr("x",-m*.7).attr("y",-m*.7).attr("width",m*1.4).attr("height",m*1.4).attr("xlink:href",w=>`/images/${w.iso2}.svg`).attr("preserveAspectRatio","xMidYMid meet").style("opacity",0).transition().duration(500).delay((w,T)=>T*50).style("opacity",1);const M=ht("#tooltip");_.on("mouseover",(w,T)=>{M.style("--tooltip-color",T.value==="Yes"?"var(--color-primary)":"var(--color-primary-light)"),M.html(`
            <div class="tooltip-content">
                <div class="section">
                    <div class="title">${T.country} | ${T.iso2.toUpperCase()}</div>
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <img src="/images/${T.iso2}.svg" alt="${T.country}" class="country-flag" />
                </div>
                <div class="divider"></div>
                
                <div class="section">
                    <div class="label">Region</div>
                    <div class="region-value">${T.region}</div>
                    <div class="indicator">${T.indicator}</div>
                    <div class="date-value">${Math.floor(T.date)}</div>
                </div>
            </div>
        `).style("left",`${w.pageX+10}px`).style("top",`${w.pageY-50}px`).classed("hidden",!1),ht(w.currentTarget).transition().duration(200).attr("transform",`translate(${T.x},${T.y}) scale(1.3)`)}).on("mousemove",w=>{M.style("left",`${w.pageX+10}px`).style("top",`${w.pageY-50}px`)}).on("mouseout",(w,T)=>{M.classed("hidden",!0),ht(w.currentTarget).transition().duration(200).attr("transform",`translate(${T.x},${T.y}) scale(1)`)});function C(w=.5){return function(P){r.forEach(A=>{const F=p[A.region];if(!F){console.warn(`Region "${A.region}" not found in centers.`);return}A.vx+=(F.x-A.x)*w*P,A.vy+=(F.y-A.y)*w*P})}}function b(w){return function(P){r.forEach(A=>{A.x<w.x[0]&&(A.x=w.x[0]),A.x>w.x[1]&&(A.x=w.x[1]),A.y<w.y[0]&&(A.y=w.y[0]),A.y>w.y[1]&&(A.y=w.y[1])})}}}rn(()=>{r&&s()});function c(l){qe[l?"unshift":"push"](()=>{i=l,n(0,i)})}function u(){o=this.clientWidth,a=this.clientHeight,n(1,o),n(2,a),n(3,r)}return t.$$set=l=>{"processedData"in l&&n(3,r=l.processedData)},t.$$.update=()=>{if(t.$$.dirty&8){const h=Math.ceil(Math.sqrt((r==null?void 0:r.length)||1))*40;n(2,a=Math.max(700,h*1))}t.$$.dirty&8&&r&&s()},[i,o,a,r,c,u]}class oh extends $t{constructor(e){super(),At(this,e,ih,rh,Nt,{processedData:3})}}function ui(t,e,n){const r=t.slice();return r[3]=e[n],r}function li(t){let e,n,r=t[3].region+"",i,o,a,s=t[3].percentage+"",c,u,l,f,h,d,m=t[3].implemented+"",v,g,p,y,_=t[3].partial+"",M,C;return{c(){e=S("div"),n=S("h3"),i=tt(r),o=L(),a=S("div"),c=tt(s),u=tt("%"),l=L(),f=S("div"),h=S("span"),d=tt("Full: "),v=tt(m),g=L(),p=S("span"),y=tt("Partial: "),M=tt(_),C=L(),$(n,"class","svelte-1tdfzl5"),$(a,"class","percentage svelte-1tdfzl5"),$(h,"class","implemented svelte-1tdfzl5"),$(p,"class","partial svelte-1tdfzl5"),$(f,"class","details svelte-1tdfzl5"),$(e,"class","region-card svelte-1tdfzl5")},m(b,w){q(b,e,w),k(e,n),k(n,i),k(e,o),k(e,a),k(a,c),k(a,u),k(e,l),k(e,f),k(f,h),k(h,d),k(h,v),k(f,g),k(f,p),k(p,y),k(p,M),k(e,C)},p(b,w){w&1&&r!==(r=b[3].region+"")&&pt(i,r),w&1&&s!==(s=b[3].percentage+"")&&pt(c,s),w&1&&m!==(m=b[3].implemented+"")&&pt(v,m),w&1&&_!==(_=b[3].partial+"")&&pt(M,_)},d(b){b&&z(e)}}}function ah(t){let e,n,r,i,o=zt(t[0]),a=[];for(let s=0;s<o.length;s+=1)a[s]=li(ui(t,o,s));return{c(){e=S("div"),n=S("h2"),n.textContent="Regional Progress",r=L(),i=S("div");for(let s=0;s<a.length;s+=1)a[s].c();$(n,"class","svelte-1tdfzl5"),$(i,"class","regions-list svelte-1tdfzl5"),$(e,"class","regional-breakdown svelte-1tdfzl5")},m(s,c){q(s,e,c),k(e,n),k(e,r),k(e,i);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(i,null)},p(s,[c]){if(c&1){o=zt(s[0]);let u;for(u=0;u<o.length;u+=1){const l=ui(s,o,u);a[u]?a[u].p(l,c):(a[u]=li(l),a[u].c(),a[u].m(i,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},i:Z,o:Z,d(s){s&&z(e),nn(a,s)}}}function sh(t,e,n){let r,{regionalData:i}=e,{processedRegionalData:o}=e;return t.$$set=a=>{"regionalData"in a&&n(1,i=a.regionalData),"processedRegionalData"in a&&n(2,o=a.processedRegionalData)},t.$$.update=()=>{t.$$.dirty&6&&n(0,r=[...i].map(([a,s])=>{const c=o.get(a)||[];return{region:a,total:s.length,implemented:c.filter(u=>u.value==="Yes").length,partial:c.filter(u=>u.value==="Partially").length,percentage:(c.length/s.length*100).toFixed(1)}}).sort((a,s)=>parseFloat(s.percentage)-parseFloat(a.percentage)))},[r,i,o]}class uh extends $t{constructor(e){super(),At(this,e,sh,ah,Nt,{regionalData:1,processedRegionalData:2})}}function ci(t){let e,n,r,i,o=t[4].percentage+"",a,s,c,u,l,f,h,d,m,v,g,p;return d=new oh({props:{processedData:t[1]}}),g=new uh({props:{regionalData:t[3],processedRegionalData:t[2]}}),{c(){e=S("div"),n=S("h4"),n.textContent="Global Implementation",r=L(),i=S("div"),a=tt(o),s=tt("%"),c=L(),u=S("p"),u.textContent="of countries have implemented or partially implemented this measure",l=L(),f=S("div"),h=S("div"),Ct(d.$$.fragment),m=L(),v=S("div"),Ct(g.$$.fragment),$(n,"class","svelte-jdjhuu"),$(i,"class","stats-number svelte-jdjhuu"),$(u,"class","stats-detail svelte-jdjhuu"),$(e,"class","global-stats svelte-jdjhuu"),$(h,"class","circles-container svelte-jdjhuu"),$(v,"class","breakdown-container svelte-jdjhuu"),$(f,"class","visualization-container svelte-jdjhuu")},m(y,_){q(y,e,_),k(e,n),k(e,r),k(e,i),k(i,a),k(i,s),k(e,c),k(e,u),q(y,l,_),q(y,f,_),k(f,h),xt(d,h,null),k(f,m),k(f,v),xt(g,v,null),p=!0},p(y,_){(!p||_&16)&&o!==(o=y[4].percentage+"")&&pt(a,o);const M={};_&2&&(M.processedData=y[1]),d.$set(M);const C={};_&8&&(C.regionalData=y[3]),_&4&&(C.processedRegionalData=y[2]),g.$set(C)},i(y){p||(X(d.$$.fragment,y),X(g.$$.fragment,y),p=!0)},o(y){et(d.$$.fragment,y),et(g.$$.fragment,y),p=!1},d(y){y&&(z(e),z(l),z(f)),bt(d),bt(g)}}}function lh(t){let e,n,r,i,o,a,s,c,u;s=new io({}),s.$on("select",t[5]);let l=t[0]&&ci(t);return{c(){e=S("section"),n=S("h2"),n.textContent="Implementation Status Overview",r=L(),i=S("p"),i.textContent=`Explore the global and regional progress of countries implementing key anti-torture mechanisms. \r
        The visualizations below provide insights into the distribution and extent of implementation for the selected indicator, highlighting successes and areas for improvement.`,o=L(),a=S("div"),Ct(s.$$.fragment),c=L(),l&&l.c(),$(n,"class","svelte-jdjhuu"),$(i,"class","description svelte-jdjhuu"),$(a,"class","selector-container svelte-jdjhuu"),$(e,"class","indicator-view svelte-jdjhuu")},m(f,h){q(f,e,h),k(e,n),k(e,r),k(e,i),k(e,o),k(e,a),xt(s,a,null),k(e,c),l&&l.m(e,null),u=!0},p(f,[h]){f[0]?l?(l.p(f,h),h&1&&X(l,1)):(l=ci(f),l.c(),X(l,1),l.m(e,null)):l&&(ke(),et(l,1,1,()=>{l=null}),Te())},i(f){u||(X(s.$$.fragment,f),X(l),u=!0)},o(f){et(s.$$.fragment,f),et(l),u=!1},d(f){f&&z(e),bt(s),l&&l.d()}}}function ch(t,e,n){let r,i,o,a,{data:s}=e,c;function u(l){n(0,c=l.detail.indicator)}return t.$$set=l=>{"data"in l&&n(6,s=l.data)},t.$$.update=()=>{t.$$.dirty&65&&n(1,r=c&&s?s.filter(l=>{const f=l.Indicator.trim(),h=c.trim();return console.log("Filtering:",{currentIndicator:f,selectedIndicator:h,isMatch:f===h,value:l.Input}),f===h&&(l.Input==="Yes"||l.Input==="Partially")}).map(l=>({country:l.Country,region:l.Region,indicator:l.Indicator,date:l.Date,value:l.Input,iso2:l.iso2})):[]),t.$$.dirty&67&&n(4,i={total:r.length,implemented:r.filter(l=>l.value==="Yes").length,partial:r.filter(l=>l.value==="Partially").length,percentage:c?(r.length/s.filter(l=>l.Indicator.trim()===c.trim()).length*100).toFixed(1):"0.0"}),t.$$.dirty&65&&n(3,o=Sn(s.filter(l=>l.Indicator.trim()===(c==null?void 0:c.trim())),l=>l.Region)),t.$$.dirty&2&&n(2,a=Sn(r,l=>l.region))},[c,r,a,o,i,u,s]}class fh extends $t{constructor(e){super(),At(this,e,ch,lh,Nt,{data:6})}}function hh(t){let e;return{c(){e=S("div"),e.textContent="Loading data...",$(e,"class","loading svelte-o574d9")},m(n,r){q(n,e,r)},p:Z,i:Z,o:Z,d(n){n&&z(e)}}}function gh(t){let e,n;return e=new nh({props:{data:t[0]}}),{c(){Ct(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(X(e.$$.fragment,r),n=!0)},o(r){et(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function fi(t){let e,n;return e=new fh({props:{data:t[0]}}),{c(){Ct(e.$$.fragment)},m(r,i){xt(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.data=r[0]),e.$set(o)},i(r){n||(X(e.$$.fragment,r),n=!0)},o(r){et(e.$$.fragment,r),n=!1},d(r){bt(e,r)}}}function dh(t){let e,n,r,i,o,a,s,c,u,l,f,h;e=new wo({});const d=[gh,hh],m=[];function v(p,y){return p[1]&&p[0].length>0?0:1}a=v(t),s=m[a]=d[a](t);let g=t[0]&&fi(t);return f=new Mo({}),{c(){Ct(e.$$.fragment),n=L(),r=S("main"),i=S("div"),o=S("section"),s.c(),c=L(),u=S("section"),g&&g.c(),l=L(),Ct(f.$$.fragment),$(o,"class","timeline svelte-o574d9"),$(u,"class","indicators svelte-o574d9"),$(i,"class","container svelte-o574d9")},m(p,y){xt(e,p,y),q(p,n,y),q(p,r,y),k(r,i),k(i,o),m[a].m(o,null),k(i,c),k(i,u),g&&g.m(u,null),q(p,l,y),xt(f,p,y),h=!0},p(p,[y]){let _=a;a=v(p),a===_?m[a].p(p,y):(ke(),et(m[_],1,1,()=>{m[_]=null}),Te(),s=m[a],s?s.p(p,y):(s=m[a]=d[a](p),s.c()),X(s,1),s.m(o,null)),p[0]?g?(g.p(p,y),y&1&&X(g,1)):(g=fi(p),g.c(),X(g,1),g.m(u,null)):g&&(ke(),et(g,1,1,()=>{g=null}),Te())},i(p){h||(X(e.$$.fragment,p),X(s),X(g),X(f.$$.fragment,p),h=!0)},o(p){et(e.$$.fragment,p),et(s),et(g),et(f.$$.fragment,p),h=!1},d(p){p&&(z(n),z(r),z(l)),bt(e,p),m[a].d(),g&&g.d(),bt(f,p)}}}function ph(t,e,n){let r=[],i=!1;return rn(async()=>{try{n(0,r=await ql("/src/lib/data/apt-data_updated.csv")),n(1,i=!0),console.log("Data loaded:",r)}catch(o){console.error("Failed to load data:",o),n(1,i=!1),n(0,r=[])}}),[r,i]}class mh extends $t{constructor(e){super(),At(this,e,ph,dh,Nt,{})}}new mh({target:document.getElementById("app")});
